{"version":3,"file":"chunks/app_components_alerts_snoozeAlert_tsx-app_components_keyValueTable_tsx-app_views_alerts_rules-d45f06.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/alerts/snoozeAlert.tsx","webpack:///./app/components/keyValueTable.tsx","webpack:///./app/views/alerts/rules/metric/details/constants.tsx"],"sourcesContent":["import {useCallback, useEffect, useState} from 'react';\nimport {browserHistory} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport {addErrorMessage, addSuccessMessage} from 'sentry/actionCreators/indicator';\nimport {Button} from 'sentry/components/button';\nimport ButtonBar from 'sentry/components/buttonBar';\nimport {DropdownMenu, MenuItemProps} from 'sentry/components/dropdownMenu';\nimport {IconChevron, IconMute, IconSound} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport {RuleActionsCategories} from 'sentry/types/alerts';\nimport useApi from 'sentry/utils/useApi';\nimport {useLocation} from 'sentry/utils/useLocation';\nimport useOrganization from 'sentry/utils/useOrganization';\n\ntype Props = {\n  hasAccess: boolean;\n  isSnoozed: boolean;\n  onSnooze: (nextState: {\n    snooze: boolean;\n    snoozeCreatedBy?: string;\n    snoozeForEveryone?: boolean;\n  }) => void;\n  projectSlug: string;\n  ruleActionCategory: RuleActionsCategories;\n  type: 'issue' | 'metric';\n  ruleId?: string;\n};\n\nfunction SnoozeAlert({\n  isSnoozed,\n  onSnooze,\n  projectSlug,\n  ruleId,\n  ruleActionCategory,\n  hasAccess,\n  type,\n}: Props) {\n  const organization = useOrganization();\n  const api = useApi();\n  const location = useLocation();\n\n  const [disabled, setDisabled] = useState(false);\n\n  const alertPath = type === 'issue' ? 'rules' : 'alert-rules';\n\n  const handleMute = useCallback(\n    async (target: 'me' | 'everyone', autoMute = false) => {\n      setDisabled(true);\n      try {\n        await api.requestPromise(\n          `/projects/${organization.slug}/${projectSlug}/${alertPath}/${ruleId}/snooze/`,\n          {\n            method: 'POST',\n            data: {\n              target,\n            },\n          }\n        );\n\n        if (autoMute) {\n          browserHistory.replace({\n            pathname: location.pathname,\n            query: {...location.query, mute: undefined},\n          });\n        }\n\n        setDisabled(false);\n        addSuccessMessage(t('Alert muted'));\n        onSnooze({\n          snooze: !isSnoozed,\n          snoozeCreatedBy: 'You',\n          snoozeForEveryone: target === 'me' ? false : true,\n        });\n      } catch (err) {\n        if (err.status === 403) {\n          addErrorMessage(t('You do not have permission to mute this alert'));\n        } else if (err.status === 410) {\n          addErrorMessage(t('This alert has already been muted'));\n        } else {\n          addErrorMessage(t('Unable to mute this alert'));\n        }\n      }\n    },\n    [\n      api,\n      isSnoozed,\n      location.pathname,\n      location.query,\n      onSnooze,\n      organization.slug,\n      projectSlug,\n      ruleId,\n      alertPath,\n    ]\n  );\n\n  async function handleUnmute() {\n    setDisabled(true);\n\n    try {\n      await api.requestPromise(\n        `/projects/${organization.slug}/${projectSlug}/${alertPath}/${ruleId}/snooze/`,\n        {\n          method: 'DELETE',\n        }\n      );\n\n      setDisabled(false);\n      addSuccessMessage(t('Alert unmuted'));\n      onSnooze({snooze: !isSnoozed});\n    } catch (err) {\n      if (err.status === 403) {\n        addErrorMessage(t('You do not have permission to unmute this alert'));\n      } else {\n        addErrorMessage(t('Unable to unmute this alert'));\n      }\n    }\n  }\n\n  const primaryMuteAction =\n    ruleActionCategory === RuleActionsCategories.ALL_DEFAULT ? 'me' : 'everyone';\n\n  useEffect(() => {\n    if (location.query.mute === '1' && !isSnoozed) {\n      handleMute(primaryMuteAction, true);\n    }\n  }, [location.query, isSnoozed, handleMute, primaryMuteAction]);\n\n  const dropdownItems: MenuItemProps[] = [\n    {\n      key: 'me',\n      label: t('Mute for me'),\n      onAction: () => handleMute('me'),\n      // Hidden if all default actions because it will be the primary button and no default actions since it shouldn't be an option\n      hidden: ruleActionCategory !== RuleActionsCategories.SOME_DEFAULT,\n    },\n    {\n      key: 'everyone',\n      label: t('Mute for everyone'),\n      onAction: () => handleMute('everyone'),\n      // Hidden if some default or no default actions since it will be the primary button, not in dropdown\n      hidden: ruleActionCategory !== RuleActionsCategories.ALL_DEFAULT,\n    },\n  ];\n\n  const hasDropdown = dropdownItems.filter(item => !item.hidden).length > 0;\n\n  if (isSnoozed) {\n    return (\n      <Button\n        size=\"sm\"\n        icon={<IconMute />}\n        disabled={disabled || !hasAccess}\n        onClick={() => handleUnmute()}\n      >\n        {t('Unmute')}\n      </Button>\n    );\n  }\n  return (\n    <ButtonBar>\n      <MuteButton\n        size=\"sm\"\n        icon={<IconSound />}\n        disabled={disabled || !hasAccess}\n        hasDropdown={hasDropdown}\n        onClick={() => {\n          handleMute(primaryMuteAction);\n        }}\n      >\n        {primaryMuteAction === 'me' ? t('Mute for me') : t('Mute for everyone')}\n      </MuteButton>\n      {ruleActionCategory !== RuleActionsCategories.NO_DEFAULT && (\n        <DropdownMenu\n          size=\"sm\"\n          trigger={triggerProps => (\n            <DropdownTrigger\n              {...triggerProps}\n              size=\"sm\"\n              aria-label={t('Mute alert options')}\n              icon={<IconChevron direction=\"down\" size=\"xs\" />}\n            />\n          )}\n          items={dropdownItems}\n          isDisabled={disabled || !hasAccess}\n        />\n      )}\n    </ButtonBar>\n  );\n}\n\nexport default SnoozeAlert;\n\nconst DropdownTrigger = styled(Button)`\n  box-shadow: none;\n  border-radius: ${p => p.theme.borderRadiusRight};\n  border-left: none;\n`;\n\nconst MuteButton = styled(Button)<{hasDropdown: boolean}>`\n  box-shadow: none;\n  border-radius: ${p =>\n    p.hasDropdown ? p.theme.borderRadiusLeft : p.theme.borderRadius};\n`;\n","import {Fragment} from 'react';\nimport {Theme} from '@emotion/react';\nimport styled from '@emotion/styled';\n\nimport {space} from 'sentry/styles/space';\n\ntype Props = {\n  keyName: React.ReactNode;\n  value: React.ReactNode;\n};\n\nexport const KeyValueTable = styled('dl')<{noMargin?: boolean}>`\n  display: grid;\n  grid-template-columns: 50% 50%;\n  ${p => (p.noMargin ? 'margin-bottom: 0;' : null)}\n`;\n\nexport function KeyValueTableRow({keyName, value}: Props) {\n  return (\n    <Fragment>\n      <Key>{keyName}</Key>\n      <Value>{value}</Value>\n    </Fragment>\n  );\n}\n\nconst commonStyles = ({theme}: {theme: Theme}) => `\nfont-size: ${theme.fontSizeMedium};\npadding: ${space(0.5)} ${space(1)};\nfont-weight: normal;\nline-height: inherit;\n${p => p.theme.overflowEllipsis};\n&:nth-of-type(2n-1) {\n  background-color: ${theme.backgroundSecondary};\n}\n`;\n\nconst Key = styled('dt')`\n  ${commonStyles};\n  color: ${p => p.theme.textColor};\n`;\n\nconst Value = styled('dd')`\n  ${commonStyles};\n  color: ${p => p.theme.subText};\n  text-align: right;\n`;\n","import {t} from 'sentry/locale';\nimport {SelectValue} from 'sentry/types';\nimport {TimePeriod, TimeWindow} from 'sentry/views/alerts/rules/metric/types';\n\nexport const SELECTOR_RELATIVE_PERIODS = {\n  [TimePeriod.SIX_HOURS]: t('Last 6 hours'),\n  [TimePeriod.ONE_DAY]: t('Last 24 hours'),\n  [TimePeriod.THREE_DAYS]: t('Last 3 days'),\n  [TimePeriod.SEVEN_DAYS]: t('Last 7 days'),\n};\n\nexport const ALERT_DEFAULT_CHART_PERIOD = '7d';\n\nexport const TIME_OPTIONS: SelectValue<string>[] = [\n  {label: t('Last 6 hours'), value: TimePeriod.SIX_HOURS},\n  {label: t('Last 24 hours'), value: TimePeriod.ONE_DAY},\n  {label: t('Last 3 days'), value: TimePeriod.THREE_DAYS},\n  {label: t('Last 7 days'), value: TimePeriod.SEVEN_DAYS},\n  {label: t('Last 14 days'), value: TimePeriod.FOURTEEN_DAYS},\n];\n\nexport const TIME_WINDOWS = {\n  [TimePeriod.SIX_HOURS]: TimeWindow.ONE_HOUR * 6 * 60 * 1000,\n  [TimePeriod.ONE_DAY]: TimeWindow.ONE_DAY * 60 * 1000,\n  [TimePeriod.THREE_DAYS]: TimeWindow.ONE_DAY * 3 * 60 * 1000,\n  [TimePeriod.SEVEN_DAYS]: TimeWindow.ONE_DAY * 7 * 60 * 1000,\n  [TimePeriod.FOURTEEN_DAYS]: TimeWindow.ONE_DAY * 14 * 60 * 1000,\n};\n\nexport const SELECTOR_DEFAULT_PERIOD = TimePeriod.FOURTEEN_DAYS;\nexport const API_INTERVAL_POINTS_LIMIT = 10000;\nexport const API_INTERVAL_POINTS_MIN = 150;\n\nexport type TimePeriodType = {\n  display: React.ReactNode;\n  end: string;\n  label: string;\n  period: string;\n  start: string;\n  /**\n   * The start/end were chosen from the period and not the user\n   */\n  usingPeriod: boolean;\n  custom?: boolean;\n  utc?: boolean;\n};\n"],"names":["SnoozeAlert","_ref","isSnoozed","onSnooze","projectSlug","ruleId","ruleActionCategory","hasAccess","type","organization","useOrganization","api","useApi","location","useLocation","disabled","setDisabled","useState","alertPath","handleMute","useCallback","async","target","autoMute","arguments","length","undefined","requestPromise","slug","method","data","browserHistory","pathname","query","mute","addSuccessMessage","t","snooze","snoozeCreatedBy","snoozeForEveryone","err","status","addErrorMessage","primaryMuteAction","RuleActionsCategories","useEffect","dropdownItems","key","label","onAction","hidden","hasDropdown","filter","item","_jsx","Button","size","icon","IconMute","onClick","handleUnmute","children","_jsxs","ButtonBar","MuteButton","IconSound","DropdownMenu","trigger","triggerProps","DropdownTrigger","IconChevron","direction","items","isDisabled","displayName","_styled","p","theme","borderRadiusRight","borderRadiusLeft","borderRadius","KeyValueTable","noMargin","KeyValueTableRow","keyName","value","Fragment","Key","Value","commonStyles","_ref2","fontSizeMedium","space","overflowEllipsis","backgroundSecondary","textColor","subText","SELECTOR_RELATIVE_PERIODS","TimePeriod","ALERT_DEFAULT_CHART_PERIOD","TIME_OPTIONS","TIME_WINDOWS","TimeWindow","API_INTERVAL_POINTS_LIMIT","API_INTERVAL_POINTS_MIN"],"sourceRoot":""}