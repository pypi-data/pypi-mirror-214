{"version":3,"file":"chunks/app_views_settings_organization_organizationSettingsLayout_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"6sBAqBA,MAAMA,UAAuCC,EAAAA,UAAwBC,cAAA,SAAAC,YAAAC,EAAAA,EAAAA,GAAA,aACpDC,KAAKC,aAWpBF,EAAAA,EAAAA,GAAA,mBAQcG,EAAAA,EAAAA,QACZ,CAACC,EAAoBC,KACnBJ,KAAKK,YAAYF,EAAUC,EAAM,QAEnCE,GACD,CAtBDC,oBAEEP,KAAKQ,SAASR,KAAKC,WACrB,CAEAQ,uBACET,KAAKU,aACP,CAiBAT,WAEE,MAAM,aAACU,GAAgBX,KAAKY,MAE5B,MAAO,CACLC,YAAaX,EAAAA,EAAAA,IAAc,2CAA2CY,KAAIC,GACxEA,EAAGJ,KAELP,MAAOF,EAAAA,EAAAA,IAAc,oCAAoCY,KAAIC,GAC3DA,EAAGJ,KAGT,CAEAN,YAAYW,EAAgBZ,GAC1B,MAAMa,EAAMjB,KAAKY,MAAMD,aACV,4CAATK,GAGJhB,KAAKQ,SAAS,CAACK,YAAaT,EAAMU,KAAIC,GAAMA,EAAGE,MACjD,CAEAC,SACE,MAAM,MAACd,EAAK,YAAES,GAAeb,KAAKmB,OAC5B,aAACR,GAAgBX,KAAKY,MACtBQ,EAAS,IAAIC,IAAIV,EAAaS,QAC9BE,EAAW,IAAID,IAAIV,EAAaW,UAEhCC,EAAoBD,EAASE,IAAI,mBACnCC,EAAAA,EACAC,EAAAA,EAEJ,OACEC,EAAAA,EAAAA,IAACC,EAAAA,EAAkB,CACjBL,kBAAmBA,EACnBH,OAAQA,EACRE,SAAUA,EACVX,aAAcA,EACdP,MAAOA,EACPS,YAAaA,GAGnB,EArEIlB,EAA8BkC,YAAA,iCAwEpC,SAAeC,EAAAA,EAAAA,GAAiBnC,GCpFhC,SAASoC,EAA2BnB,GAClC,OACEe,EAAAA,EAAAA,IAACK,EAAAA,EAAc,IACTpB,EACJqB,iBAAkBA,KAAMN,EAAAA,EAAAA,IAAChC,EAA8B,KAG7D,CAPSoC,EAA0BF,YAAA,6BASnC,S","sources":["webpack:///./app/views/settings/organization/organizationSettingsNavigation.tsx","webpack:///./app/views/settings/organization/organizationSettingsLayout.tsx"],"sourcesContent":["import {Component} from 'react';\n\nimport HookStore from 'sentry/stores/hookStore';\nimport {Organization} from 'sentry/types';\nimport {HookName, Hooks} from 'sentry/types/hooks';\nimport withOrganization from 'sentry/utils/withOrganization';\nimport SettingsNavigation from 'sentry/views/settings/components/settingsNavigation';\nimport navigationConfiguration, {\n  organizationNavigationWithAuthTokens,\n} from 'sentry/views/settings/organization/navigationConfiguration';\nimport {NavigationSection} from 'sentry/views/settings/types';\n\ntype Props = {\n  organization: Organization;\n};\n\ntype State = {\n  hookConfigs: NavigationSection[];\n  hooks: React.ReactElement[];\n};\n\nclass OrganizationSettingsNavigation extends Component<Props, State> {\n  state: State = this.getHooks();\n\n  componentDidMount() {\n    // eslint-disable-next-line react/no-did-mount-set-state\n    this.setState(this.getHooks());\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n\n  /**\n   * TODO(epurkhiser): Becase the settings organization navigation hooks\n   * do not conform to a normal component style hook, and take a single\n   * parameter 'organization', we cannot use the `Hook` component here,\n   * and must resort to using listening to the HookStore to retrieve hook data.\n   *\n   * We should update the hook interface for the two hooks used here\n   */\n  unsubscribe = HookStore.listen(\n    (hookName: HookName, hooks: Hooks['settings:organization-navigation-config'][]) => {\n      this.handleHooks(hookName, hooks);\n    },\n    undefined\n  );\n\n  getHooks() {\n    // Allow injection via getsentry et all\n    const {organization} = this.props as Props;\n\n    return {\n      hookConfigs: HookStore.get('settings:organization-navigation-config').map(cb =>\n        cb(organization)\n      ),\n      hooks: HookStore.get('settings:organization-navigation').map(cb =>\n        cb(organization)\n      ),\n    };\n  }\n\n  handleHooks(name: HookName, hooks: Hooks['settings:organization-navigation-config'][]) {\n    const org = this.props.organization;\n    if (name !== 'settings:organization-navigation-config') {\n      return;\n    }\n    this.setState({hookConfigs: hooks.map(cb => cb(org))});\n  }\n\n  render() {\n    const {hooks, hookConfigs} = this.state as State;\n    const {organization} = this.props as Props;\n    const access = new Set(organization.access);\n    const features = new Set(organization.features);\n\n    const navigationObjects = features.has('org-auth-tokens')\n      ? organizationNavigationWithAuthTokens\n      : navigationConfiguration;\n\n    return (\n      <SettingsNavigation\n        navigationObjects={navigationObjects}\n        access={access}\n        features={features}\n        organization={organization}\n        hooks={hooks}\n        hookConfigs={hookConfigs}\n      />\n    );\n  }\n}\n\nexport default withOrganization(OrganizationSettingsNavigation);\n","import {RouteComponentProps} from 'react-router';\n\nimport SettingsLayout from 'sentry/views/settings/components/settingsLayout';\nimport OrganizationSettingsNavigation from 'sentry/views/settings/organization/organizationSettingsNavigation';\n\ntype Props = RouteComponentProps<{}, {}> & {\n  children: React.ReactNode;\n};\n\nfunction OrganizationSettingsLayout(props: Props) {\n  return (\n    <SettingsLayout\n      {...props}\n      renderNavigation={() => <OrganizationSettingsNavigation />}\n    />\n  );\n}\n\nexport default OrganizationSettingsLayout;\n"],"names":["OrganizationSettingsNavigation","Component","constructor","arguments","_defineProperty","this","getHooks","HookStore","hookName","hooks","handleHooks","undefined","componentDidMount","setState","componentWillUnmount","unsubscribe","organization","props","hookConfigs","map","cb","name","org","render","state","access","Set","features","navigationObjects","has","organizationNavigationWithAuthTokens","navigationConfiguration","_jsx","SettingsNavigation","displayName","withOrganization","OrganizationSettingsLayout","SettingsLayout","renderNavigation"],"sourceRoot":""}