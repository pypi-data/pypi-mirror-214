{"version":3,"file":"chunks/app_components_searchBar_tsx-app_views_alerts_list_rules_teamFilter_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/searchBar.tsx","webpack:///./app/views/alerts/list/rules/teamFilter.tsx"],"sourcesContent":["import {useCallback, useEffect, useRef, useState} from 'react';\nimport styled from '@emotion/styled';\n\nimport {Button} from 'sentry/components/button';\nimport {InputGroup, InputProps} from 'sentry/components/inputGroup';\nimport {IconSearch} from 'sentry/icons';\nimport {IconClose} from 'sentry/icons/iconClose';\nimport {t} from 'sentry/locale';\nimport {space} from 'sentry/styles/space';\n\ninterface SearchBarProps extends Omit<InputProps, 'onChange'> {\n  defaultQuery?: string;\n  onChange?: (query: string) => void;\n  onSearch?: (query: string) => void;\n  query?: string;\n  trailing?: React.ReactNode;\n  width?: string;\n}\n\nfunction SearchBar({\n  query: queryProp,\n  defaultQuery = '',\n  onChange,\n  onSearch,\n  width,\n  size,\n  className,\n  trailing,\n  ...inputProps\n}: SearchBarProps) {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const [query, setQuery] = useState(queryProp ?? defaultQuery);\n\n  // if query prop keeps changing we should treat this as\n  // a controlled component and its internal state should be in sync\n  useEffect(() => {\n    if (typeof queryProp === 'string') {\n      setQuery(queryProp);\n    }\n  }, [queryProp]);\n\n  const onQueryChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      const {value} = e.target;\n      setQuery(value);\n      onChange?.(value);\n    },\n    [onChange]\n  );\n\n  const onSubmit = useCallback(\n    (e: React.FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n      inputRef.current?.blur();\n      onSearch?.(query);\n    },\n    [onSearch, query]\n  );\n\n  const clearSearch = useCallback(() => {\n    setQuery('');\n    onChange?.('');\n    onSearch?.('');\n  }, [onChange, onSearch]);\n\n  return (\n    <FormWrap onSubmit={onSubmit} className={className}>\n      <InputGroup>\n        <InputGroup.LeadingItems disablePointerEvents>\n          <IconSearch color=\"subText\" size={size === 'xs' ? 'xs' : 'sm'} />\n        </InputGroup.LeadingItems>\n        <StyledInput\n          {...inputProps}\n          ref={inputRef}\n          type=\"text\"\n          name=\"query\"\n          autoComplete=\"off\"\n          value={query}\n          onChange={onQueryChange}\n          width={width}\n          size={size}\n        />\n        <InputGroup.TrailingItems>\n          {trailing}\n          {!!query && (\n            <SearchBarTrailingButton\n              size=\"zero\"\n              borderless\n              onClick={clearSearch}\n              icon={<IconClose size=\"xs\" />}\n              aria-label={t('Clear')}\n            />\n          )}\n        </InputGroup.TrailingItems>\n      </InputGroup>\n    </FormWrap>\n  );\n}\n\nconst FormWrap = styled('form')`\n  display: block;\n  position: relative;\n`;\n\nconst StyledInput = styled(InputGroup.Input)`\n  ${p => p.width && `width: ${p.width};`}\n`;\n\nexport const SearchBarTrailingButton = styled(Button)`\n  color: ${p => p.theme.subText};\n  padding: ${space(0.5)};\n`;\n\nexport default SearchBar;\n","import {Fragment, useMemo} from 'react';\nimport styled from '@emotion/styled';\nimport debounce from 'lodash/debounce';\n\nimport TeamAvatar from 'sentry/components/avatar/teamAvatar';\nimport Badge from 'sentry/components/badge';\nimport {CompactSelect} from 'sentry/components/compactSelect';\nimport {DEFAULT_DEBOUNCE_DURATION} from 'sentry/constants';\nimport {IconUser} from 'sentry/icons';\nimport {t} from 'sentry/locale';\nimport {useTeams} from 'sentry/utils/useTeams';\n\ninterface Props {\n  handleChangeFilter: (activeFilters: string[]) => void;\n  selectedTeams: string[];\n  /**\n   * only show teams user is a member of\n   */\n  showIsMemberTeams?: boolean;\n  /**\n   * show My Teams as the default dropdown description\n   */\n  showMyTeamsDescription?: boolean;\n  /**\n   * show suggested options (My Teams and Unassigned)\n   */\n  showSuggestedOptions?: boolean;\n}\n\nconst suggestedOptions = [\n  {\n    label: t('My Teams'),\n    value: 'myteams',\n  },\n  {\n    label: t('Unassigned'),\n    value: 'unassigned',\n  },\n];\n\nfunction TeamFilter({\n  selectedTeams,\n  handleChangeFilter,\n  showIsMemberTeams = false,\n  showSuggestedOptions = true,\n  showMyTeamsDescription = false,\n}: Props) {\n  const {teams, onSearch, fetching} = useTeams({provideUserTeams: showIsMemberTeams});\n\n  const teamOptions = useMemo(\n    () =>\n      teams.map(team => ({\n        value: team.id,\n        label: `#${team.slug}`,\n        leadingItems: <TeamAvatar team={team} size={18} />,\n      })),\n    [teams]\n  );\n\n  const [triggerIcon, triggerLabel] = useMemo(() => {\n    const firstSelectedSuggestion =\n      selectedTeams[0] && suggestedOptions.find(opt => opt.value === selectedTeams[0]);\n\n    const firstSelectedTeam =\n      selectedTeams[0] && teams.find(team => team.id === selectedTeams[0]);\n\n    if (firstSelectedSuggestion) {\n      return [<IconUser key={0} />, firstSelectedSuggestion.label];\n    }\n\n    if (firstSelectedTeam) {\n      return [\n        <TeamAvatar team={firstSelectedTeam} size={16} key={0} />,\n        `#${firstSelectedTeam.slug}`,\n      ];\n    }\n\n    return [\n      <IconUser key={0} />,\n      showMyTeamsDescription ? t('My Teams') : t('All Teams'),\n    ];\n  }, [selectedTeams, teams, showMyTeamsDescription]);\n\n  return (\n    <CompactSelect\n      multiple\n      clearable\n      searchable\n      loading={fetching}\n      menuTitle={t('Filter teams')}\n      options={\n        showSuggestedOptions\n          ? [\n              {value: '_suggested', label: t('Suggested'), options: suggestedOptions},\n              {value: '_teams', label: t('Teams'), options: teamOptions},\n            ]\n          : teamOptions\n      }\n      value={selectedTeams}\n      onSearch={debounce(val => void onSearch(val), DEFAULT_DEBOUNCE_DURATION)}\n      onChange={opts => {\n        // Compact select type inference does not work - onChange type is actually T | null.\n        if (!opts) {\n          return handleChangeFilter([]);\n        }\n        return handleChangeFilter(opts.map(opt => opt.value));\n      }}\n      triggerLabel={\n        <Fragment>\n          {triggerLabel}\n          {selectedTeams.length > 1 && (\n            <StyledBadge text={`+${selectedTeams.length - 1}`} />\n          )}\n        </Fragment>\n      }\n      triggerProps={{icon: triggerIcon}}\n    />\n  );\n}\n\nexport default TeamFilter;\n\nconst StyledBadge = styled(Badge)`\n  flex-shrink: 0;\n`;\n"],"names":["SearchBar","_ref","query","queryProp","defaultQuery","onChange","onSearch","width","size","className","trailing","inputProps","inputRef","useRef","setQuery","useState","useEffect","onQueryChange","useCallback","e","value","target","onSubmit","preventDefault","current","blur","clearSearch","_jsx","FormWrap","children","_jsxs","InputGroup","disablePointerEvents","IconSearch","color","StyledInput","ref","type","name","autoComplete","SearchBarTrailingButton","borderless","onClick","icon","IconClose","t","displayName","_styled","styles","p","Button","theme","subText","space","suggestedOptions","label","TeamFilter","selectedTeams","handleChangeFilter","showIsMemberTeams","showSuggestedOptions","showMyTeamsDescription","teams","fetching","useTeams","provideUserTeams","teamOptions","useMemo","map","team","id","slug","leadingItems","TeamAvatar","triggerIcon","triggerLabel","firstSelectedSuggestion","find","opt","firstSelectedTeam","IconUser","CompactSelect","multiple","clearable","searchable","loading","menuTitle","options","debounce","val","DEFAULT_DEBOUNCE_DURATION","opts","Fragment","length","StyledBadge","text","triggerProps","Badge"],"sourceRoot":""}