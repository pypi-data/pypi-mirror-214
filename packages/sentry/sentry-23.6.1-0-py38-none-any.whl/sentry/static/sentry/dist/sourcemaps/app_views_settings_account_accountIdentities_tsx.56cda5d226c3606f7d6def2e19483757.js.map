{"version":3,"file":"chunks/app_views_settings_account_accountIdentities_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/views/asyncView.tsx","webpack:///./app/views/settings/components/identityIcon.tsx","webpack:///./app/views/settings/account/accountIdentities.tsx"],"sourcesContent":["import AsyncComponent from 'sentry/components/asyncComponent';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    return (\n      <SentryDocumentTitle title={this.getTitle()}>\n        {this.renderComponent() as React.ReactChild}\n      </SentryDocumentTitle>\n    );\n  }\n}\n","import styled from '@emotion/styled';\nimport asana from 'sentry-logos/logo-asana.svg';\nimport auth0 from 'sentry-logos/logo-auth0.svg';\nimport vsts from 'sentry-logos/logo-azure.svg';\nimport bitbucket from 'sentry-logos/logo-bitbucket.svg';\nimport bitbucketserver from 'sentry-logos/logo-bitbucket-server.svg';\nimport placeholder from 'sentry-logos/logo-default.svg';\nimport github from 'sentry-logos/logo-github.svg';\nimport githubEnterprise from 'sentry-logos/logo-github-enterprise.svg';\nimport gitlab from 'sentry-logos/logo-gitlab.svg';\nimport google from 'sentry-logos/logo-google.svg';\nimport jiraserver from 'sentry-logos/logo-jira-server.svg';\nimport jumpcloud from 'sentry-logos/logo-jumpcloud.svg';\nimport msteams from 'sentry-logos/logo-msteams.svg';\nimport okta from 'sentry-logos/logo-okta.svg';\nimport onelogin from 'sentry-logos/logo-onelogin.svg';\nimport rippling from 'sentry-logos/logo-rippling.svg';\nimport saml2 from 'sentry-logos/logo-saml2.svg';\nimport slack from 'sentry-logos/logo-slack.svg';\nimport visualstudio from 'sentry-logos/logo-visualstudio.svg';\n\n// Map of plugin id -> logo filename\nexport const DEFAULT_ICON = placeholder;\n\nexport const ICON_PATHS: Record<string, string> = {\n  _default: DEFAULT_ICON,\n\n  'active-directory': vsts,\n  asana,\n  auth0,\n  bitbucket,\n  bitbucket_server: bitbucketserver,\n  github,\n  github_enterprise: githubEnterprise,\n  gitlab,\n  google,\n  jira_server: jiraserver,\n  jumpcloud,\n  msteams,\n  okta,\n  onelogin,\n  rippling,\n  saml2,\n  slack,\n  visualstudio,\n  vsts,\n};\n\ntype Props = {\n  providerId?: string;\n  size?: number;\n};\n\nconst IdentityIcon = styled('div')<Props>`\n  position: relative;\n  height: ${p => p.size}px;\n  width: ${p => p.size}px;\n  border-radius: 2px;\n  border: 0;\n  display: inline-block;\n  background-size: contain;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-image: url(${p =>\n    (p.providerId !== undefined && ICON_PATHS[p.providerId]) || DEFAULT_ICON});\n`;\n\nIdentityIcon.defaultProps = {\n  providerId: '_default',\n  size: 36,\n};\n\nexport default IdentityIcon;\n","import {Fragment} from 'react';\nimport {RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\nimport moment from 'moment';\n\nimport {disconnectIdentity} from 'sentry/actionCreators/account';\nimport {Alert} from 'sentry/components/alert';\nimport {Button} from 'sentry/components/button';\nimport Confirm from 'sentry/components/confirm';\nimport DateTime from 'sentry/components/dateTime';\nimport EmptyMessage from 'sentry/components/emptyMessage';\nimport {Panel, PanelBody, PanelHeader, PanelItem} from 'sentry/components/panels';\nimport Tag from 'sentry/components/tag';\nimport {t, tct} from 'sentry/locale';\nimport {space} from 'sentry/styles/space';\nimport {UserIdentityCategory, UserIdentityConfig, UserIdentityStatus} from 'sentry/types';\nimport AsyncView from 'sentry/views/asyncView';\nimport IdentityIcon from 'sentry/views/settings/components/identityIcon';\nimport SettingsPageHeader from 'sentry/views/settings/components/settingsPageHeader';\nimport TextBlock from 'sentry/views/settings/components/text/textBlock';\n\nconst ENDPOINT = '/users/me/user-identities/';\n\ntype Props = RouteComponentProps<{}, {}>;\n\ntype State = {\n  identities: UserIdentityConfig[] | null;\n} & AsyncView['state'];\n\nclass AccountIdentities extends AsyncView<Props, State> {\n  getDefaultState() {\n    return {\n      ...super.getDefaultState(),\n      identities: [],\n    };\n  }\n\n  getEndpoints(): ReturnType<AsyncView['getEndpoints']> {\n    return [['identities', ENDPOINT]];\n  }\n\n  getTitle() {\n    return t('Identities');\n  }\n\n  renderItem = (identity: UserIdentityConfig) => {\n    return (\n      <IdentityPanelItem key={`${identity.category}:${identity.id}`}>\n        <InternalContainer>\n          <IdentityIcon providerId={identity.provider.key} />\n          <IdentityText isSingleLine={!identity.dateAdded}>\n            <IdentityName>{identity.provider.name}</IdentityName>\n            {identity.dateAdded && <IdentityDateTime date={moment(identity.dateAdded)} />}\n          </IdentityText>\n        </InternalContainer>\n        <InternalContainer>\n          <TagWrapper>\n            {identity.category === UserIdentityCategory.SOCIAL_IDENTITY && (\n              <Tag type=\"default\">{t('Legacy')}</Tag>\n            )}\n            {identity.category !== UserIdentityCategory.ORG_IDENTITY && (\n              <Tag type=\"default\">\n                {identity.isLogin ? t('Sign In') : t('Integration')}\n              </Tag>\n            )}\n            {identity.organization && (\n              <Tag type=\"highlight\">{identity.organization.slug}</Tag>\n            )}\n          </TagWrapper>\n\n          {this.renderButton(identity)}\n        </InternalContainer>\n      </IdentityPanelItem>\n    );\n  };\n\n  renderButton(identity: UserIdentityConfig) {\n    return identity.status === UserIdentityStatus.CAN_DISCONNECT ? (\n      <Confirm\n        onConfirm={() => this.handleDisconnect(identity)}\n        priority=\"danger\"\n        confirmText={t('Disconnect')}\n        message={\n          <Fragment>\n            <Alert type=\"error\" showIcon>\n              {tct('Disconnect Your [provider] Identity?', {\n                provider: identity.provider.name,\n              })}\n            </Alert>\n            <TextBlock>\n              {identity.isLogin\n                ? t(\n                    'After disconnecting, you will need to use a password or another identity to sign in.'\n                  )\n                : t(\"This action can't be undone.\")}\n            </TextBlock>\n          </Fragment>\n        }\n      >\n        <Button size=\"sm\">{t('Disconnect')}</Button>\n      </Confirm>\n    ) : (\n      <Button\n        size=\"sm\"\n        disabled\n        title={\n          identity.status === UserIdentityStatus.NEEDED_FOR_GLOBAL_AUTH\n            ? t(\n                'You need this identity to sign into your account. If you want to disconnect it, set a password first.'\n              )\n            : identity.status === UserIdentityStatus.NEEDED_FOR_ORG_AUTH\n            ? t('You need this identity to access your organization.')\n            : null\n        }\n      >\n        {t('Disconnect')}\n      </Button>\n    );\n  }\n\n  handleDisconnect = (identity: UserIdentityConfig) => {\n    disconnectIdentity(identity, () => this.reloadData());\n  };\n\n  itemOrder = (a: UserIdentityConfig, b: UserIdentityConfig) => {\n    function categoryRank(c: UserIdentityConfig) {\n      return [\n        UserIdentityCategory.GLOBAL_IDENTITY,\n        UserIdentityCategory.SOCIAL_IDENTITY,\n        UserIdentityCategory.ORG_IDENTITY,\n      ].indexOf(c.category);\n    }\n\n    if (a.provider.name !== b.provider.name) {\n      return a.provider.name < b.provider.name ? -1 : 1;\n    }\n    if (a.category !== b.category) {\n      return categoryRank(a) - categoryRank(b);\n    }\n    if ((a.organization?.name ?? '') !== (b.organization?.name ?? '')) {\n      return (a.organization?.name ?? '') < (b.organization?.name ?? '') ? -1 : 1;\n    }\n    return 0;\n  };\n\n  renderBody() {\n    const appIdentities = this.state.identities\n      ?.filter(identity => identity.category !== UserIdentityCategory.ORG_IDENTITY)\n      .sort(this.itemOrder);\n    const orgIdentities = this.state.identities\n      ?.filter(identity => identity.category === UserIdentityCategory.ORG_IDENTITY)\n      .sort(this.itemOrder);\n\n    return (\n      <Fragment>\n        <SettingsPageHeader title=\"Identities\" />\n\n        <Panel>\n          <PanelHeader>{t('Application Identities')}</PanelHeader>\n          <PanelBody>\n            {!appIdentities?.length ? (\n              <EmptyMessage>\n                {t(\n                  'There are no application identities associated with your Sentry account'\n                )}\n              </EmptyMessage>\n            ) : (\n              appIdentities.map(this.renderItem)\n            )}\n          </PanelBody>\n        </Panel>\n\n        <Panel>\n          <PanelHeader>{t('Organization Identities')}</PanelHeader>\n          <PanelBody>\n            {!orgIdentities?.length ? (\n              <EmptyMessage>\n                {t(\n                  'There are no organization identities associated with your Sentry account'\n                )}\n              </EmptyMessage>\n            ) : (\n              orgIdentities.map(this.renderItem)\n            )}\n          </PanelBody>\n        </Panel>\n      </Fragment>\n    );\n  }\n}\n\nconst IdentityPanelItem = styled(PanelItem)`\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst InternalContainer = styled('div')`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n`;\n\nconst IdentityText = styled('div')<{isSingleLine?: boolean}>`\n  height: 36px;\n  display: flex;\n  flex-direction: column;\n  justify-content: ${p => (p.isSingleLine ? 'center' : 'space-between')};\n  margin-left: ${space(1.5)};\n`;\nconst IdentityName = styled('div')`\n  font-weight: bold;\n`;\nconst IdentityDateTime = styled(DateTime)`\n  font-size: ${p => p.theme.fontSizeRelativeSmall};\n  color: ${p => p.theme.subText};\n`;\n\nconst TagWrapper = styled('div')`\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  flex-grow: 1;\n  margin-right: ${space(1)};\n`;\n\nexport default AccountIdentities;\n"],"names":["AsyncView","AsyncComponent","getTitle","render","_jsx","SentryDocumentTitle","title","this","children","renderComponent","displayName","DEFAULT_ICON","placeholder","ICON_PATHS","_default","vsts","asana","auth0","bitbucket","bitbucket_server","bitbucketserver","github","github_enterprise","githubEnterprise","gitlab","google","jira_server","jiraserver","jumpcloud","msteams","okta","onelogin","rippling","saml2","slack","visualstudio","IdentityIcon","_styled","target","p","size","undefined","providerId","defaultProps","AccountIdentities","constructor","arguments","_defineProperty","identity","_jsxs","IdentityPanelItem","InternalContainer","provider","key","IdentityText","isSingleLine","dateAdded","IdentityName","name","IdentityDateTime","date","moment","TagWrapper","category","UserIdentityCategory","Tag","type","t","isLogin","organization","slug","renderButton","id","disconnectIdentity","reloadData","a","b","categoryRank","c","indexOf","getDefaultState","super","identities","getEndpoints","status","UserIdentityStatus","Confirm","onConfirm","handleDisconnect","priority","confirmText","message","Fragment","Alert","showIcon","tct","TextBlock","Button","disabled","renderBody","appIdentities","state","filter","sort","itemOrder","orgIdentities","SettingsPageHeader","Panel","PanelHeader","PanelBody","length","map","renderItem","EmptyMessage","PanelItem","styles","space","DateTime","theme","fontSizeRelativeSmall","subText"],"sourceRoot":""}