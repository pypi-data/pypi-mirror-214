"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_issueDetails_index_tsx"],{"./app/components/events/errorLevel.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");const i="13px",n=(0,r.Z)("span",{target:"efr73n80"})("padding:0;position:relative;width:",(e=>e.size||i),";height:",(e=>e.size||i),";text-indent:-9999em;display:inline-block;border-radius:50%;flex-shrink:0;background-color:",(e=>e.level?e.theme.level[e.level]:e.theme.level.error),";")},"./app/components/events/eventMessage.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("./app/components/events/errorLevel.tsx"),n=s("./app/styles/space.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,r.Z)((e=>{let{className:t,level:s,levelIndicatorSize:r,message:n,annotations:a}=e;return(0,o.BX)("div",{className:t,children:[s&&(0,o.tZ)(i.Z,{size:r,level:s,children:s}),n&&(0,o.tZ)(l,{children:n}),a]})}),{target:"e1ms02k71"})("display:flex;gap:",(0,n.D)(1),";align-items:center;position:relative;line-height:1.2;overflow:hidden;"),l=(0,r.Z)("span",{target:"e1ms02k70"})((e=>e.theme.overflowEllipsis)," width:auto;max-height:38px;"),d=a},"./app/components/pageAlertBar.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const r=(0,s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e4nzktk0"})("display:flex;align-items:center;justify-content:center;color:",(e=>e.theme.headerBackground),";background-color:",(e=>e.theme.bannerBackground),";padding:6px 30px;font-size:14px;")},"./app/components/replays/replayCountBadge.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});var r=s("./app/components/badge.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e){let{count:t}=e;const s=t&&t>50?"50+":t??null;return(0,i.tZ)(r.Z,{text:s})}n.displayName="ReplayCountBadge";const o=n},"./app/utils/displayReprocessEventAction.tsx":(e,t,s)=>{s.d(t,{B:()=>o});var r=s("./app/types/index.tsx");const i=["cocoa","native"];function n(e){const t=e?.frames??[],s=e?.stacktrace?.frames??[];return t.length||s.length?[...t,...s].map((e=>e.platform)).filter((e=>!!e)):[]}function o(e,t){if(!t||!e.includes("reprocessing-v2"))return!1;const{entries:s}=t,o=s.find((e=>e.type===r.UZ.EXCEPTION));return!!o&&!!(function(e){const{data:t}=e;return(t.values??[]).some((e=>"minidump"===e.mechanism?.type))}(o)||function(e){const{data:t}=e;return(t.values??[]).some((e=>"applecrashreport"===e.mechanism?.type))}(o)||function(e,t){const{platform:s}=e;if(s&&i.includes(s))return!0;const o=function(e,t){const s=(t.data.values??[]).flatMap(n),i=e.entries.find((e=>e.type===r.UZ.STACKTRACE))?.data??{},o=Object.keys(i).flatMap((e=>n(i[e]))),a=(e.entries.find((e=>e.type===r.UZ.THREADS))?.data.values??[]).flatMap((e=>{let{stacktrace:t}=e;return n(t)}));return new Set([...s,...o,...a])}(e,t);return i.some((e=>o.has(e)))}(t,o))}},"./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var r=s("../node_modules/react/index.js"),i=s("./app/views/routeAnalyticsContextProvider.tsx");function n(e,t){const{setEventNames:s,previousUrl:n}=(0,r.useContext)(i.o);(0,r.useEffect)((()=>{s(e,t)}),[s,e,t,n])}},"./app/views/issueDetails/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>St});var r=s("../node_modules/react/index.js"),i=s("./app/actionCreators/indicator.tsx"),n=s("./app/locale.tsx"),o=s("./app/stores/projectsStore.tsx"),a=s("./app/utils/handleXhrErrorResponse.tsx"),l=s("./app/utils/useApi.tsx"),d=s("./app/utils/useOrganization.tsx"),c=s("./app/utils/useProjects.tsx"),u=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),p=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/react-router/es/index.js")),m=s("../node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js"),g=s("../node_modules/@sentry/react/esm/profiler.js"),h=s("../node_modules/query-string/index.js"),b=s("./app/components/loadingError.tsx"),v=s("./app/components/loadingIndicator.tsx"),f=s("./app/components/organizations/pageFilters/container.tsx"),y=s("./app/components/projects/missingProjectMembership.tsx"),Z=s("./app/components/sentryDocumentTitle.tsx"),x=s("./app/components/tabs/index.tsx"),E=s("./app/stores/groupStore.tsx"),S=s("./app/styles/space.tsx"),I=s("./app/types/index.tsx"),_=s("./app/utils.tsx"),j=s("./app/utils/analytics.tsx"),w=s("./app/utils/dates.tsx"),D=s("./app/utils/events.tsx"),k=s("./app/utils/projects.tsx"),T=s("./app/utils/queryClient.tsx"),R=s("./app/utils/recreateRoute.tsx"),z=s("./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx"),A=s("./app/utils/routeAnalytics/useRouteAnalyticsParams.tsx"),N=s("./app/utils/useLocation.tsx"),C=s("./app/utils/useRouter.tsx"),O=s("./app/utils/withDomainRequired.tsx");const B={GROUP_NOT_FOUND:"GROUP_NOT_FOUND",MISSING_MEMBERSHIP:"MISSING_MEMBERSHIP"};var $=s("../node_modules/lodash/omit.js"),U=s.n($),M=s("./app/components/assistant/guideAnchor.tsx"),G=s("./app/components/badge.tsx"),P=s("./app/components/breadcrumbs.tsx"),X=s("./app/components/count.tsx"),q=s("./app/components/environmentPageFilter.tsx"),F=s("./app/components/eventOrGroupTitle.tsx"),L=s("./app/components/events/errorLevel.tsx"),V=s("./app/components/events/eventMessage.tsx"),H=s("./app/components/group/inboxBadges/inboxReason.tsx"),Y=s("./app/components/group/inboxBadges/statusBadge.tsx"),K=s("./app/components/group/inboxBadges/unhandledTag.tsx"),Q=s("./app/components/idBadge/projectBadge.tsx"),W=s("./app/components/layouts/thirds.tsx"),J=s("./app/components/links/link.tsx"),ee=s("./app/components/replays/replayCountBadge.tsx"),te=s("./app/components/replays/useReplaysCount.tsx"),se=s("./app/components/shortId.tsx"),re=s("./app/components/tooltip.tsx"),ie=s("./app/icons/index.tsx"),ne=s("./app/utils/issueTypeConfig/index.tsx"),oe=s("./app/actionCreators/group.tsx"),ae=s("./app/actionCreators/modal.tsx"),le=s("./app/components/acl/feature.tsx"),de=s("./app/components/acl/featureDisabled.tsx"),ce=s("./app/components/actions/archive.tsx"),ue=s("./app/components/actions/button.tsx"),pe=s("./app/components/actions/ignore.tsx"),me=s("./app/components/actions/resolve.tsx"),ge=s("./app/components/button.tsx"),he=s("./app/components/dropdownMenu/index.tsx"),be=s("./app/utils/discover/eventView.tsx"),ve=s("./app/utils/discover/types.tsx"),fe=s("./app/utils/displayReprocessEventAction.tsx"),ye=s("./app/utils/guid.tsx"),Ze=s("./app/utils/withApi.tsx"),xe=s("./app/utils/withOrganization.tsx"),Ee=s("./app/components/autoSelectText.tsx"),Se=s("./app/components/copyToClipboardButton.tsx"),Ie=s("./app/components/switchButton.tsx"),_e=s("./app/stores/useLegacyStore.tsx"),je=s("./app/utils/useCopyToClipboard.tsx"),we=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function De(e){let{Header:t,Body:s,Footer:o,organization:a,projectSlug:d,groupId:c,onToggle:u,closeModal:p}=e;const m=(0,l.Z)({persistInFlight:!0}),[g,h]=(0,r.useState)(!1),b=(0,r.useRef)(null),f=(0,_e.X)(E.Z).find((e=>e.id===c)),y=f?.isPublic,Z=(0,r.useCallback)(((e,t)=>{e?.preventDefault(),h(!0),u(),(0,oe.Gv)(m,{orgId:a.slug,projectId:d,itemIds:[c],data:{isPublic:t??!y}},{error:()=>{(0,i.Iw)((0,n.t)("Error sharing"))},complete:()=>{h(!1)}})}),[m,h,u,y,a.slug,d,c]);(0,r.useEffect)((()=>{y||Z(null,!0)}),[]);const x=f?.shareId?function(){const e=`/share/issue/${f.shareId}/`,{host:t,protocol:s}=window.location;return`${s}//${t}${e}`}():null,{onClick:S}=(0,je.Z)({text:x,onCopy:p});return(0,we.BX)(r.Fragment,{children:[(0,we.tZ)(t,{closeButton:!0,children:(0,we.tZ)("h4",{children:(0,n.t)("Share Issue")})}),(0,we.tZ)(s,{children:(0,we.BX)(Te,{children:[(0,we.BX)(Re,{children:[(0,we.BX)("div",{children:[(0,we.tZ)(ze,{children:(0,n.t)("Create a public link")}),(0,we.tZ)(Ae,{children:(0,n.t)("Share a link with anyone outside your organization")})]}),(0,we.tZ)(Ie.Z,{"aria-label":y?(0,n.t)("Unshare"):(0,n.t)("Share"),isActive:y,size:"lg",toggle:Z})]}),(!f||g)&&(0,we.tZ)(Ne,{children:(0,we.tZ)(v.Z,{mini:!0})}),f&&!g&&y&&x&&(0,we.BX)(Ce,{children:[(0,we.tZ)(Be,{children:(0,we.tZ)(Oe,{ref:b,children:x})}),(0,we.tZ)($e,{text:x,title:(0,n.t)("Copy to clipboard"),borderless:!0,size:"sm",onClick:S,"aria-label":(0,n.t)("Copy to clipboard")}),(0,we.tZ)(Ue,{title:(0,n.t)("Generate new URL. Invalidates previous URL"),"aria-label":(0,n.t)("Generate new URL"),borderless:!0,size:"sm",icon:(0,we.tZ)(ie.tr,{}),onClick:()=>Z(null,!0)})]})]})}),(0,we.tZ)(o,{children:!g&&y&&x?(0,we.tZ)(ge.zx,{priority:"primary",onClick:S,children:(0,n.t)("Copy Link")}):(0,we.tZ)(ge.zx,{priority:"primary",onClick:p,children:(0,n.t)("Close")})})]})}De.displayName="ShareIssueModal";const ke=De,Te=(0,u.Z)("div",{target:"e1w9vv749"})("display:flex;gap:",(0,S.D)(2),";flex-direction:column;min-height:100px;"),Re=(0,u.Z)("div",{target:"e1w9vv748"})("display:flex;justify-content:space-between;align-items:center;gap:",(0,S.D)(2),";"),ze=(0,u.Z)("div",{target:"e1w9vv747"})("padding-right:",(0,S.D)(4),";white-space:nowrap;"),Ae=(0,u.Z)("p",{target:"e1w9vv746"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeSmall),";"),Ne=(0,u.Z)("div",{target:"e1w9vv745"})({name:"zl1inp",styles:"display:flex;justify-content:center"}),Ce=(0,u.Z)("div",{target:"e1w9vv744"})("display:grid;grid-template-columns:1fr max-content max-content;align-items:center;border:1px solid ",(e=>e.theme.border),";border-radius:",(0,S.D)(.5),";"),Oe=(0,u.Z)(Ee.Z,{target:"e1w9vv743"})("padding:",(0,S.D)(1)," ",(0,S.D)(1),";",(e=>e.theme.overflowEllipsis),";"),Be=(0,u.Z)("div",{target:"e1w9vv742"})("position:relative;display:flex;flex-grow:1;background-color:transparent;border-right:1px solid ",(e=>e.theme.border),";min-width:0;"),$e=(0,u.Z)(Se.m,{target:"e1w9vv741"})("border-radius:0;border-right:1px solid ",(e=>e.theme.border),";height:100%;flex-shrink:0;margin:0;&:hover{border-right:1px solid ",(e=>e.theme.border),";}"),Ue=(0,u.Z)(ge.zx,{target:"e1w9vv740"})({name:"1f2ljh2",styles:"border-radius:0;height:100%;flex-shrink:0"});var Me=s("./app/views/issueDetails/utils.tsx");function Ge(e){let{className:t,disabled:s,group:r,icon:i,onClick:o,disablePriority:a,size:l="xs"}=e;const d=r.subscriptionDetails?.disabled??!1;return(0,we.tZ)(ue.Z,{className:t,disabled:s||d,title:(0,Me.sC)(r),tooltipProps:{delay:300},priority:!a&&r.isSubscribed?"primary":"default",size:l,"aria-label":(0,n.t)("Subscribe"),onClick:o,icon:i??(0,we.tZ)(ie.lJ,{size:l})})}Ge.displayName="SubscribeAction";const Pe=Ge;function Xe(e){const{api:t,group:s,project:o,organization:a,disabled:l,event:d,query:c={}}=e,{status:u,isBookmarked:m}=s,g=m?"unbookmark":"bookmark",h=m?(0,n.t)("Remove bookmark"):(0,n.t)("Bookmark"),b=!!o.features?.includes("releases"),v="resolved"===u,f="resolved"===s.status?s.statusDetails.autoResolved:void 0,y="ignored"===u,Z=a.features.includes("escalating-issues"),x=a.access.includes("event:admin"),{delete:_,deleteAndDiscard:k,share:T}=(0,ne.Y)(s).actions,R=()=>{const{title:e,type:t,shortId:r}=s,i=s.issueCategory===I.qE.PERFORMANCE&&!!d?.occurrence,n=(0,ne.Y)(s),l={id:void 0,name:e||t,fields:["title","release","environment","user.display","timestamp"],orderby:"-timestamp",query:`issue:${r}`,projects:[Number(o.id)],version:2,range:"90d",dataset:n.usesIssuePlatform||i?ve.as.ISSUE_PLATFORM:void 0};return be.ZP.fromSavedQuery(l).getResultsViewUrlTarget(a.slug)},z=(e,t,r)=>{const{alert_date:i,alert_rule_id:n,alert_type:l}=c;(0,j.Gi)("issue_details.action_clicked",{organization:a,project_id:parseInt(o.id,10),action_type:e,action_substatus:t,action_status_details:r,alert_date:"string"==typeof i?(0,w.v5)(Number(i)):void 0,alert_rule_id:"string"==typeof n?n:void 0,alert_type:"string"==typeof l?l:void 0,...(0,D.Sq)(s)})},A=()=>{(0,i.E3)((0,n.t)("Delete event…")),(0,oe.MU)(t,{orgId:a.slug,projectId:o.slug,itemIds:[s.id]},{complete:()=>{(0,i.B8)(),p.browserHistory.push((0,O.D)({pathname:`/organizations/${a.slug}/issues/`,query:{project:o.id}}))}}),z("deleted")},N=e=>{(0,i.E3)((0,n.t)("Saving changes…")),(0,oe.Gv)(t,{orgId:a.slug,projectId:o.slug,itemIds:[s.id],data:e},{complete:i.B8}),(e=>void 0!==e.status)(e)&&z(e.status,e.substatus,Object.keys(e.statusDetails||{})[0]),void 0!==e.inbox&&z("mark_reviewed")},C=()=>{!s.isPublic&&(0,j.Gi)("issue.shared_publicly",{organization:a}),z("shared")},B=()=>{N({isSubscribed:!s.isSubscribed}),z("subscribed")},$=()=>{const e=(0,ye.E)();(0,i.E3)((0,n.t)("Discarding event…")),E.Z.onDiscard(e,s.id),t.request(`/issues/${s.id}/`,{method:"PUT",data:{discard:!0},success:t=>{E.Z.onDiscardSuccess(e,s.id,t),p.browserHistory.push((0,O.D)({pathname:`/organizations/${a.slug}/issues/`,query:{project:o.id}}))},error:t=>{E.Z.onDiscardError(e,s.id,t)},complete:i.B8}),z("discarded")},U=e=>{let{Body:t,Footer:s,closeModal:i}=e;return(0,we.tZ)(le.Z,{features:["projects:discard-groups"],hookName:"feature-disabled:discard-groups",organization:a,project:o,renderDisabled:function(e){let{children:t,...s}=e;return t({...s,renderDisabled:e=>{let{features:t}=e;return(0,we.tZ)(de.Z,{alert:!0,featureName:(0,n.t)("Discard and Delete"),features:t})}})},children:e=>{let{hasFeature:o,renderDisabled:a,...l}=e;return(0,we.BX)(r.Fragment,{children:[(0,we.BX)(t,{children:[!o&&"function"==typeof a&&a({...l,hasFeature:o,children:null}),(0,n.t)("Discarding this event will result in the deletion of most data associated with this issue and future events being discarded before reaching your stream. Are you sure you wish to continue?")]}),(0,we.BX)(s,{children:[(0,we.tZ)(ge.zx,{onClick:i,children:(0,n.t)("Cancel")}),(0,we.tZ)(ge.zx,{style:{marginLeft:(0,S.D)(1)},priority:"primary",onClick:$,disabled:!o,children:(0,n.t)("Discard Future Events")})]})]})}})},{dropdownItems:G,onIgnore:P}=(0,pe.c)({onUpdate:N}),{dropdownItems:X}=(0,ce.X)({onUpdate:N});return(0,we.BX)(qe,{children:[(0,we.tZ)(he.h,{triggerProps:{"aria-label":(0,n.t)("More Actions"),icon:(0,we.tZ)(ie.YR,{size:"xs"}),showChevron:!1,size:"sm"},items:[...y||Z?[]:[{key:"ignore",className:"hidden-sm hidden-md hidden-lg",label:(0,n.t)("Ignore"),isSubmenu:!0,disabled:l,children:[{key:"ignore-now",label:(0,n.t)("Ignore Issue"),onAction:()=>P()},...G]}],...Z?y?[]:[{key:"Archive",className:"hidden-sm hidden-md hidden-lg",label:(0,n.t)("Archive"),isSubmenu:!0,disabled:l,children:X}]:[],{key:"open-in-discover",className:"hidden-sm hidden-md hidden-lg",label:(0,n.t)("Open in Discover"),to:l?"":R(),onAction:()=>z("open_in_discover")},{key:s.isSubscribed?"unsubscribe":"subscribe",className:"hidden-sm hidden-md hidden-lg",label:s.isSubscribed?(0,n.t)("Unsubscribe"):(0,n.t)("Subscribe"),disabled:l||s.subscriptionDetails?.disabled,onAction:B},...Z?[]:[{key:"mark-review",label:(0,n.t)("Mark reviewed"),disabled:!s.inbox||l,details:!s.inbox||l?(0,n.t)("Issue has been reviewed"):void 0,onAction:()=>N({inbox:!1})}],{key:"share",label:(0,n.t)("Share"),disabled:l||!T.enabled,hidden:!a.features.includes("shared-issues"),onAction:()=>{(0,ae.openModal)((e=>(0,we.tZ)(ke,{...e,organization:a,projectSlug:s.project.slug,groupId:s.id,onToggle:C})))}},{key:g,label:h,onAction:()=>{N({isBookmarked:!s.isBookmarked}),z("bookmarked")}},{key:"reprocess",label:(0,n.t)("Reprocess events"),hidden:!(0,fe.B)(a.features,d),onAction:()=>{(0,ae.openReprocessEventModal)({organization:a,groupId:s.id})}},{key:"delete-issue",priority:"danger",label:(0,n.t)("Delete"),hidden:!x,disabled:!_.enabled,details:_.disabledReason,onAction:()=>(0,ae.openModal)((e=>{let{Body:t,Footer:s,closeModal:i}=e;return(0,we.BX)(r.Fragment,{children:[(0,we.tZ)(t,{children:(0,n.t)("Deleting this issue is permanent. Are you sure you wish to continue?")}),(0,we.BX)(s,{children:[(0,we.tZ)(ge.zx,{onClick:i,children:(0,n.t)("Cancel")}),(0,we.tZ)(ge.zx,{style:{marginLeft:(0,S.D)(1)},priority:"primary",onClick:A,children:(0,n.t)("Delete")})]})]})}))},{key:"delete-and-discard",priority:"danger",label:(0,n.t)("Delete and discard future events"),hidden:!x,disabled:!k.enabled,details:k.disabledReason,onAction:()=>{(0,ae.openModal)(U)}}]}),(0,we.tZ)(Pe,{className:"hidden-xs",disabled:l,disablePriority:!0,group:s,onClick:(F=B,function(e){if(l)return e.preventDefault(),void e.stopPropagation();F(e)}),icon:s.isSubscribed?(0,we.tZ)(ie.lJ,{}):(0,we.tZ)(ie.mA,{}),size:"sm"}),(0,we.tZ)("div",{className:"hidden-xs",children:(0,we.tZ)(q.Z,{alignDropdown:"right",size:"sm"})}),(0,we.tZ)(le.Z,{hookName:"feature-disabled:open-in-discover",features:["discover-basic"],organization:a,children:(0,we.tZ)(ue.Z,{className:"hidden-xs",disabled:l,to:l?"":R(),onClick:()=>z("open_in_discover"),size:"sm",children:(0,we.tZ)(M.Z,{target:"open_in_discover",children:(0,n.t)("Open in Discover")})})}),v||y?(0,we.tZ)(ue.Z,{priority:"primary",title:f?(0,n.t)("This event is resolved due to the Auto Resolve configuration for this project"):(0,n.t)("Change status to unresolved"),size:"sm",icon:Z?null:v?(0,we.tZ)(ie.DL,{}):(0,we.tZ)(ie.i1,{}),disabled:l||f,onClick:()=>N({status:I.d7.UNRESOLVED,statusDetails:{}}),children:y?Z?(0,n.t)("Archived"):(0,n.t)("Ignored"):(0,n.t)("Resolved")}):(0,we.BX)(r.Fragment,{children:[Z?(0,we.tZ)(M.Z,{target:"issue_details_archive_button",position:"bottom",children:(0,we.tZ)(ce.Z,{className:"hidden-xs",size:"sm",isArchived:y,onUpdate:N,disabled:l})}):(0,we.tZ)(pe.Z,{className:"hidden-xs",isIgnored:y,onUpdate:N,disabled:l,size:"sm"}),(0,we.tZ)(M.Z,{target:"resolve",position:"bottom",offset:20,children:(0,we.tZ)(me.Z,{disabled:l,disableDropdown:l,hasRelease:b,latestRelease:o.latestRelease,onUpdate:N,projectSlug:o.slug,isResolved:v,isAutoResolved:f,size:"sm",priority:"primary"})})]})]});var F}Xe.displayName="Actions";const qe=(0,u.Z)("div",{target:"e1muhq5a0"})("display:flex;align-items:center;gap:",(0,S.D)(.5),";"),Fe=(0,Ze.Z)((0,xe.Z)(Xe));var Le=s("./app/views/issueDetails/types.tsx"),Ve=s("./app/views/issueDetails/unhandledTag.tsx");function He(e){let{baseUrl:t,disabledTabs:s,eventRoute:r,group:i,project:o}=e;const a=(0,d.Z)(),l=(0,te.Z)({groupIds:i.id,organization:a})[i.id],c=new Set(o?o.features:[]),u=new Set(a?a.features:[]),p=u.has("grouping-tree-ui"),m=c.has("similarity-view"),g=u.has("event-attachments"),h=u.has("session-replay"),b=(0,ne.Y)(i);return(0,A.Z)({group_has_replay:(l??0)>0}),(0,we.BX)(at,{hideBorder:!0,children:[(0,we.tZ)(x.td.Item,{disabled:s.includes(Le.O.DETAILS),to:`${t}${location.search}`,children:(0,n.t)("Details")},Le.O.DETAILS),(0,we.BX)(x.td.Item,{textValue:(0,n.t)("Activity"),disabled:s.includes(Le.O.ACTIVITY),to:`${t}activity/${location.search}`,children:[(0,n.t)("Activity"),(0,we.BX)(ot,{children:[i.numComments,(0,we.tZ)(ie.f7,{size:"xs"})]})]},Le.O.ACTIVITY),(0,we.BX)(x.td.Item,{textValue:(0,n.t)("User Feedback"),hidden:!b.userFeedback.enabled,disabled:s.includes(Le.O.USER_FEEDBACK),to:`${t}feedback/${location.search}`,children:[(0,n.t)("User Feedback")," ",(0,we.tZ)(G.Z,{text:i.userReportCount})]},Le.O.USER_FEEDBACK),(0,we.tZ)(x.td.Item,{hidden:!g||!b.attachments.enabled,disabled:s.includes(Le.O.ATTACHMENTS),to:`${t}attachments/${location.search}`,children:(0,n.t)("Attachments")},Le.O.ATTACHMENTS),(0,we.tZ)(x.td.Item,{disabled:s.includes(Le.O.TAGS),to:`${t}tags/${location.search}`,children:(0,n.t)("Tags")},Le.O.TAGS),(0,we.tZ)(x.td.Item,{disabled:s.includes(Le.O.EVENTS),to:r,children:(0,n.t)("All Events")},Le.O.EVENTS),(0,we.tZ)(x.td.Item,{hidden:!b.mergedIssues.enabled,disabled:s.includes(Le.O.MERGED),to:`${t}merged/${location.search}`,children:(0,n.t)("Merged Issues")},Le.O.MERGED),(0,we.tZ)(x.td.Item,{hidden:!p||!b.grouping.enabled,disabled:s.includes(Le.O.GROUPING),to:`${t}grouping/${location.search}`,children:(0,n.t)("Grouping")},Le.O.GROUPING),(0,we.tZ)(x.td.Item,{hidden:!m||!b.similarIssues.enabled,disabled:s.includes(Le.O.SIMILAR_ISSUES),to:`${t}similar/${location.search}`,children:(0,n.t)("Similar Issues")},Le.O.SIMILAR_ISSUES),(0,we.BX)(x.td.Item,{textValue:(0,n.t)("Replays"),hidden:!h||!b.replays.enabled,to:`${t}replays/${location.search}`,children:[(0,n.t)("Replays"),(0,we.tZ)(ee.Z,{count:l})]},Le.O.REPLAYS)]})}function Ye(e){let{baseUrl:t,group:s,groupReprocessingStatus:i,organization:o,event:a,project:l}=e;const d=(0,N.T)(),c=o.features.includes("escalating-issues"),u=(0,r.useMemo)((()=>o.features.includes("reprocessing-v2")?i===Me.m7.REPROCESSING?[Le.O.ACTIVITY,Le.O.USER_FEEDBACK,Le.O.ATTACHMENTS,Le.O.EVENTS,Le.O.MERGED,Le.O.GROUPING,Le.O.SIMILAR_ISSUES,Le.O.TAGS]:i===Me.m7.REPROCESSED_AND_HASNT_EVENT?[Le.O.DETAILS,Le.O.ATTACHMENTS,Le.O.EVENTS,Le.O.MERGED,Le.O.GROUPING,Le.O.SIMILAR_ISSUES,Le.O.TAGS,Le.O.USER_FEEDBACK]:[]:[]),[o,i]),p=(0,r.useMemo)((()=>{const e=U()(d.query,"query");return{pathname:`${t}events/`,query:e}}),[d,t]),{userCount:m}=s;let g="group-detail";s.hasSeen&&(g+=" hasSeen"),"resolved"===s.status&&(g+=" isResolved");const h=(0,D.FC)(s),b=!!u.length,v=s.shortId&&(0,we.tZ)(M.Z,{target:"issue_number",position:"bottom",children:(0,we.BX)(We,{children:[(0,we.tZ)(Q.Z,{project:l,avatarSize:16,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:l.slug}}),(0,we.tZ)(re.u,{className:"help-link",title:(0,n.t)("This identifier is unique across your organization, and can be used to reference an issue in various places, like commit messages."),position:"bottom",children:(0,we.tZ)(Je,{shortId:s.shortId})})]})});return(0,we.tZ)(W.h4,{children:(0,we.BX)("div",{className:g,children:[(0,we.BX)(Qe,{children:[(0,we.tZ)(P.Z,{crumbs:[{label:"Issues",to:`/organizations/${o.slug}/issues/${d.search}`},{label:v}]}),(0,we.tZ)(Fe,{group:s,project:l,disabled:b,event:a,query:d.query})]}),(0,we.BX)(et,{children:[(0,we.BX)(tt,{children:[(0,we.BX)(st,{children:[(0,we.tZ)("h3",{children:(0,we.tZ)(rt,{data:s})}),!c&&s.inbox&&(0,we.tZ)(H.Z,{inbox:s.inbox,fontSize:"md"}),c&&(0,we.tZ)(Y.O,{status:s.status,substatus:s.substatus,fontSize:"md"})]}),(0,we.BX)(nt,{children:[s.level&&(0,we.tZ)(L.Z,{level:s.level,size:"11px"}),s.isUnhandled&&(0,we.tZ)(K.Z,{}),(0,we.tZ)(V.Z,{message:h})]})]}),(0,we.BX)(it,{children:[(0,we.BX)("div",{className:"count",children:[(0,we.tZ)("h6",{className:"nav-header",children:(0,n.t)("Events")}),(0,we.tZ)(J.Z,{disabled:b,to:p,children:(0,we.tZ)(X.Z,{className:"count",value:s.count})})]}),(0,we.BX)("div",{className:"count",children:[(0,we.tZ)("h6",{className:"nav-header",children:(0,n.t)("Users")}),0!==m?(0,we.tZ)(J.Z,{disabled:b,to:`${t}tags/user/${d.search}`,children:(0,we.tZ)(X.Z,{className:"count",value:m})}):(0,we.tZ)("span",{children:"0"})]})]})]}),(0,we.tZ)(et,{className:"hidden-sm hidden-md hidden-lg",children:(0,we.tZ)(q.Z,{alignDropdown:"right"})}),(0,we.tZ)(He,{baseUrl:t,disabledTabs:u,eventRoute:p,group:s,project:l})]})})}He.displayName="GroupHeaderTabs",Ye.displayName="GroupHeader";const Ke=Ye,Qe=(0,u.Z)("div",{target:"ez9r7o610"})("display:flex;flex-direction:row;justify-content:space-between;gap:",(0,S.D)(1),";align-items:center;"),We=(0,u.Z)("div",{target:"ez9r7o69"})("display:flex;gap:",(0,S.D)(1),";align-items:center;"),Je=(0,u.Z)(se.Z,{target:"ez9r7o68"})("font-family:",(e=>e.theme.text.family),";font-size:",(e=>e.theme.fontSizeMedium),";line-height:1;"),et=(0,u.Z)("div",{target:"ez9r7o67"})("display:flex;gap:",(0,S.D)(2),";justify-content:space-between;margin-top:",(0,S.D)(2),";@media (max-width: ",(e=>e.theme.breakpoints.small),"){flex-direction:column;}"),tt=(0,u.Z)("div",{target:"ez9r7o66"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){max-width:65%;}"),st=(0,u.Z)("div",{target:"ez9r7o65"})("display:flex;line-height:2;gap:",(0,S.D)(1),";"),rt=(0,u.Z)(F.Z,{target:"ez9r7o64"})({name:"870gjp",styles:"font-size:inherit"}),it=(0,u.Z)("div",{target:"ez9r7o63"})("display:grid;grid-template-columns:repeat(2, min-content);gap:calc(",(0,S.D)(3)," + ",(0,S.D)(3),");@media (min-width: ",(e=>e.theme.breakpoints.small),"){justify-content:flex-end;}"),nt=(0,u.Z)(Ve.S,{target:"ez9r7o62"})("display:flex;gap:",(0,S.D)(1),";justify-content:flex-start;line-height:1.2;"),ot=(0,u.Z)(G.Z,{target:"ez9r7o61"})("display:flex;align-items:center;gap:",(0,S.D)(.5),";"),at=(0,u.Z)(x.td,{target:"ez9r7o60"})("margin-top:",(0,S.D)(2),";");var lt=s("./app/components/pageAlertBar.tsx");function dt(e){let{organization:t,project:s}=e;return(0,we.BX)(lt.Z,{children:[(0,we.tZ)(ie.Db,{}),(0,we.tZ)(ut,{children:(0,n.t)("You are viewing a sample error. Configure Sentry to start viewing real errors.")}),(0,we.tZ)(ge.zx,{size:"xs",priority:"primary",to:`/${t.slug}/${s.slug}/getting-started/${s.platform||""}`,onClick:()=>(0,j.Gi)("growth.sample_error_onboarding_link_clicked",{project_id:s.id?.toString(),organization:t,platform:s.platform}),children:(0,n.t)("Get Started")})]})}dt.displayName="SampleEventAlert";const ct=dt,ut=(0,u.Z)("span",{target:"egvxlkr0"})("margin:0 ",(0,S.D)(1),";");function pt(e){let{group:t,event:s,organization:r,router:i}=e;const n=function(e){let{router:t}=e;const s=t.routes[t.routes.length-1];return t.params.tagKey?Le.O.TAGS:Object.values(Le.O).find((e=>s.path===Le.h[e]))??Le.O.DETAILS}({router:i});return{baseUrl:(0,O.D)(`/organizations/${r.slug}/issues/${t.id}/${i.params.eventId&&s?`events/${s.id}/`:""}`),currentTab:n}}function mt(e){let{groupId:t,environments:s}=e;return[`/issues/${t}/`,{query:(0,Me.NM)({environments:s})}]}const gt=e=>{let{organization:t,project:s,group:r,event:i,tab:n}=e;if(!s||!r)return;if((0,j.Gi)("issue_details.tab_changed",{organization:t,project_id:parseInt(s.id,10),tab:n,...(0,D.Sq)(r)}),r.issueCategory!==I.qE.ERROR)return;const o=i?i.tags.filter((e=>{let{key:t}=e;return["device","os","browser"].includes(t)})).reduce(((e,t)=>{let{key:s,value:r}=t;return e[s]=r,e}),{}):{};(0,j.Gi)("issue_group_details.tab.clicked",{organization:t,tab:n,platform:s.platform,...o})};function ht(e){let{errorType:t,onRetry:s}=e;const r=(0,d.Z)(),i=(0,N.T)().query.project,{projects:o}=(0,c.Z)(),a=o.find((e=>e.id===i));switch(t){case B.GROUP_NOT_FOUND:return(0,we.tZ)(Zt,{message:(0,n.t)("The issue you were looking for was not found.")});case B.MISSING_MEMBERSHIP:return(0,we.tZ)(y.Z,{organization:r,project:a});default:return(0,we.tZ)(Zt,{onRetry:s})}}function bt(e){let{children:t,group:s,project:i,loadingEvent:n,eventError:o,event:a,refetchData:l}=e;const c=(0,d.Z)(),u=(0,C.Z)(),{currentTab:p,baseUrl:m}=pt({group:s,event:a,router:u,organization:c}),g=(0,Me.M3)(s),h=(0,Me.V8)();!function(e){let{group:t,event:s,project:r,tab:i}=e;const n=(0,N.T)(),{alert_date:o,alert_rule_id:a,alert_type:l,ref_fallback:d,stream_index:c,query:u}=n.query;(0,z.Z)("issue_details.viewed","Issue Details: Viewed"),(0,A.Z)({...(0,D.Sq)(t),...(0,D.T7)(s),...(0,k.p)(r),tab:i,stream_index:"string"==typeof c?Number(c):void 0,query:"string"==typeof u?u:void 0,alert_date:"string"==typeof o?(0,w.v5)(Number(o)):void 0,alert_rule_id:"string"==typeof a?a:void 0,alert_type:"string"==typeof l?l:void 0,ref_fallback:d,stacktrace_link_viewed:!1,trace_status:"none",group_has_replay:!1})}({group:s,event:a,project:i,tab:p}),(0,r.useEffect)((()=>{if(p===Le.O.DETAILS&&s&&a&&s.id!==a?.groupID&&!o){const e=`/organizations/${c.slug}/issues/${a.groupID}/events/${a.id}/`;u.push((0,O.D)(e))}}),[p,a,o,s,c.slug,u]);const b={environments:h,group:s,project:i,event:a,loadingEvent:n,eventError:o,groupReprocessingStatus:g,onRetry:l,baseUrl:m};return(0,we.BX)(x.mQ,{value:p,onChange:e=>gt({tab:e,group:s,project:i,event:a,organization:c}),children:[(0,we.tZ)(Ke,{organization:c,groupReprocessingStatus:g,event:a??void 0,group:s,baseUrl:m,project:i}),(0,we.tZ)(xt,{children:(0,we.tZ)(x.nP.Item,{children:(0,r.isValidElement)(t)?(0,r.cloneElement)(t,b):t},p)})]})}function vt(e){const t=e.group?.project?.slug,{projects:s,initiallyLoaded:i,fetchError:o}=(0,c.Z)({slugs:t?[t]:[]}),a=s.find((e=>{let{slug:s}=e;return s===t})),l=a??s[0];return(0,r.useEffect)((()=>{e.group&&i&&!a&&m.$e((t=>{const r=s.map((e=>e.id));t.setContext("missingProject",{projectId:e.group?.project.id,availableProjects:r}),m.Tb(new Error("Project not found"))}))}),[e.group,a,s,i]),e.error?(0,we.tZ)(ht,{errorType:e.errorType,onRetry:e.refetchData}):o?(0,we.tZ)(Zt,{message:(0,n.t)("Error loading the specified project")}):t&&!o&&i&&!l?(0,we.tZ)(Zt,{message:(0,n.t)("The project %s does not exist",t)}):i&&l&&e.group?(0,we.tZ)(bt,{...e,project:l,group:e.group}):(0,we.tZ)(v.Z,{})}function ft(e){const t=(0,d.Z)(),s=(0,C.Z)(),{group:i,...n}=function(){const e=(0,l.Z)(),t=(0,d.Z)(),s=(0,C.Z)(),i=s.params,[n,o]=(0,r.useState)(!1),[a,c]=(0,r.useState)(null),[u,g]=(0,r.useState)(null),[b,v]=(0,r.useState)(!1),f=(0,Me.V8)(),y=i.groupId,Z=i.eventId??"latest",x=`/issues/${y}/events/${Z}/`,{data:S,isLoading:I,isError:j,refetch:w}=function(e,t){const s="latest"===e,r=(0,T.WE)(t,{staleTime:3e4,cacheTime:3e4,enabled:s,retry:(e,t)=>404!==t.status}),i=(0,T.WE)(t,{staleTime:1/0,enabled:!s,retry:(e,t)=>404!==t.status});return s?r:i}(Z,[x,{query:(0,Me._2)({environments:f})}]),{data:D,isLoading:k,isError:z,error:A,refetch:N}=(0,T.WE)(mt({groupId:y,environments:f}),{staleTime:3e4,cacheTime:3e4}),O=D??null;(0,r.useEffect)((()=>{(0,_.ri)(O)&&E.Z.loadInitialData([O])}),[y,O]),function(e){const t=(0,T.NL)(),s=(0,r.useRef)(e);s.current=e;const i=(0,r.useRef)();void 0===i.current&&(i.current=E.Z.listen((()=>{const[e]=E.Z.getState(),r=s.current;(0,_.ri)(e)&&(0,T.XN)(t,mt({groupId:e.id,environments:r}),e)}),void 0)),(0,r.useEffect)((()=>()=>i.current?.()),[])}(f),(0,r.useEffect)((()=>{S&&g(S)}),[S]),(0,r.useEffect)((()=>{if(O&&u){const e=function(e){let{group:t,event:s,organization:r,router:i}=e;const{routes:n,params:o,location:a}=i,{groupId:l}=o,{currentTab:d,baseUrl:c}=pt({group:t,event:s,organization:r,router:i}),u=r.features?.includes("reprocessing-v2"),{id:p}=t,m=(0,Me.M3)(t);if(l!==p)return u&&m===Me.m7.REPROCESSED_AND_HASNT_EVENT&&d!==Le.O.ACTIVITY?{pathname:`${c}${Le.O.ACTIVITY}/`,query:{...o,groupId:p}}:(0,R.Z)("",{routes:n,location:a,params:{...o,groupId:p}});if(u){if(m===Me.m7.REPROCESSING&&d!==Le.O.DETAILS)return{pathname:c,query:o};if(m===Me.m7.REPROCESSED_AND_HASNT_EVENT&&d!==Le.O.ACTIVITY&&d!==Le.O.USER_FEEDBACK)return{pathname:`${c}${Le.O.ACTIVITY}/`,query:o}}}({group:O,event:u,router:s,organization:t});if(e)return void p.browserHistory.push(e)}}),[O,u,s,t]),(0,r.useEffect)((()=>{const s=O?.project?.slug;s&&(O.hasSeen||(0,Me.V7)(e,t.slug,s,i.groupId))}),[e,O?.hasSeen,O?.project?.id,O?.project?.slug,t.slug,i.groupId]);const $=s.location.query._allp;(0,r.useEffect)((()=>{const e=h.parse(window.location.search)||{};void 0!==e.project||$||b||!O?.project.id||(e.project=O?.project.id,p.browserHistory.replace({...window.location,query:e})),$&&!b&&(delete e.project,delete e._allp,p.browserHistory.replace({...window.location,query:e}),v(!0))}),[$,O?.project.id,b]);const U=(0,r.useCallback)((e=>{var t;m.Tb(e),c((t=e?.status,t?404===t?B.GROUP_NOT_FOUND:403===t?B.MISSING_MEMBERSHIP:null:null)),o(!0)}),[]);(0,r.useEffect)((()=>{z&&U(A)}),[z,A,U]);const M=(0,r.useCallback)((()=>{O?.status!==Me.m7.REPROCESSING||k||I||N()}),[O,k,I,N]),G=(0,r.useCallback)((()=>{o(!1),c(null),w(),M()}),[M,w]);return(0,r.useEffect)((()=>{O&&O.stale&&M()}),[M,O]),function(e){let{refetchGroup:t}=e;const s=(0,d.Z)(),i=s.features?.includes("reprocessing-v2");(0,r.useEffect)((()=>{let e;return i&&(e=window.setInterval(t,3e4)),()=>{window.clearInterval(e)}}),[i,t])}({refetchGroup:M}),(0,r.useEffect)((()=>()=>{E.Z.reset()}),[]),{loadingGroup:k,loadingEvent:I,group:O,event:u,errorType:a,error:n,eventError:j,refetchData:G,refetchGroup:M}}(),o=(0,Me.V8)(),{data:a}=(0,Me.by)({groupId:s.params.groupId,environment:o},{enabled:(0,_.ri)(i)}),c=a?.some((e=>"sample_event"===e.key))??!1;return(0,we.BX)(r.Fragment,{children:[c&&i&&(0,we.tZ)(ct,{project:i.project,organization:t}),(0,we.tZ)(Z.Z,{noSuffix:!0,title:(()=>{const e="Sentry";if(!i)return e;const{title:s}=(0,D.YQ)(i,t?.features),r=(0,D.FC)(i),n=`${t.slug} — ${i.project.slug}`;return s&&r?`${s}: ${r} — ${n}`:`${s||r||e} — ${n}`})(),children:(0,we.tZ)(f.Z,{skipLoadLastUsed:!0,forceProject:i?.project,shouldForceProject:!0,children:(0,we.tZ)(vt,{...e,group:i,...n})})})]})}bt.displayName="GroupDetailsContent",vt.displayName="GroupDetailsPageContent",ft.displayName="GroupDetails";const yt=g.zH(ft),Zt=(0,u.Z)(b.Z,{target:"e218s1f1"})("margin:",(0,S.D)(2),";"),xt=(0,u.Z)(x.nP,{target:"e218s1f0"})({name:"1xwzzid",styles:"flex-grow:1;display:flex;flex-direction:column;justify-content:stretch"});function Et(e){const t=(0,d.Z)(),{projects:s}=(0,c.Z)(),u=(0,l.Z)(),{location:p}=e,m=p.query.project,g=s.find((e=>e.id===m));return(0,r.useEffect)((()=>{g?.slug&&function(e){let{api:t,orgSlug:s,projSlug:r}=e;t.requestPromise(`/projects/${s}/${r}/`).then(o.Z.onUpdateSuccess).catch((e=>{const t=(0,n.t)("Unable to fetch project details");(0,a.X)(t,e),(0,i.Iw)(t)}))}({api:u,orgSlug:t.slug,projSlug:g.slug})}),[u,t.slug,g?.slug]),(0,we.tZ)(yt,{organization:t,projects:s,...e})}Et.displayName="IssueDetailsContainer";const St=Et}}]);
//# sourceMappingURL=../sourcemaps/app_views_issueDetails_index_tsx.6ee0e24beba0f6592de27601c729208f.js.map