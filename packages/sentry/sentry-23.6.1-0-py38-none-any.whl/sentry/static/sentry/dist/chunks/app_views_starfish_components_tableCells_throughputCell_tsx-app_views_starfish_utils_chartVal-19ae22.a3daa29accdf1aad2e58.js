"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_starfish_components_tableCells_throughputCell_tsx-app_views_starfish_utils_chartVal-19ae22"],{"./app/utils/discover/discoverQuery.tsx":(e,t,s)=>{s.d(t,{Z:()=>d,_:()=>n});var a=s("./app/utils/discover/genericDiscoverQuery.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e,t){return e.transactionName!==t.transactionName||e.transactionThreshold!==t.transactionThreshold||e.transactionThresholdMetric!==t.transactionThresholdMetric}function i(e){return(0,o.tZ)(a.ZP,{route:"events",shouldRefetchData:r,afterFetch:(e,t)=>{const{fields:s,...a}=e.meta??{};return{...e,meta:{...s,...a}}},...e})}function n(e){const t=(0,a.JC)({route:"events",shouldRefetchData:r,afterFetch:(e,t)=>{const{fields:s,...a}=e.meta??{};return{...e,meta:{...s,...a}}},...e}),s=t.response?.getResponseHeader("Link")??void 0;return{...t,pageLinks:s}}i.displayName="DiscoverQuery";const d=i},"./app/views/starfish/components/samplesTable/common.tsx":(e,t,s)=>{s.d(t,{W4:()=>d,fd:()=>i});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/locale.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{duration:t,p95:s}=e;const a=t-s;if(Math.floor(t)===Math.floor(s))return(0,r.tZ)(n,{children:(0,o.t)("At baseline")});const i=a>0?`+${a.toFixed(2)}ms above`:`${a.toFixed(2)}ms below`;return(0,r.tZ)(d,{value:a,children:i})}i.displayName="DurationComparisonCell";const n=(0,a.Z)("div",{target:"e1tr2orr1"})(""),d=(0,a.Z)("span",{target:"e1tr2orr0"})("color:",(e=>e.value<0?e.theme.green400:e.theme.red400),";")},"./app/views/starfish/components/tableCells/durationCell.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/components/duration.tsx"),r=s("./app/styles/space.tsx"),i=s("./app/utils/formatters.tsx"),n=s("./app/views/starfish/components/samplesTable/common.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{milliseconds:t,delta:s}=e;return(0,d.BX)(p,{children:[(0,d.tZ)(o.Z,{seconds:t/1e3,fixedDigits:2,abbreviation:!0}),s?(0,d.BX)(n.W4,{value:s,children:[s>0?"+":"",(0,i.rl)(s)]}):null]})}l.displayName="DurationCell";const p=(0,a.Z)("div",{target:"e1y9asl90"})("display:flex;width:100%;justify-content:space-between;gap:",(0,r.D)(1),";")},"./app/views/starfish/components/tableCells/throughputCell.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/locale.tsx"),r=s("./app/styles/space.tsx"),i=s("./app/utils/formatters.tsx"),n=s("./app/views/starfish/components/samplesTable/common.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{throughputPerSecond:t,delta:s}=e;const a=t?t.toFixed(2):"--";return(0,d.BX)(p,{children:[(0,d.tZ)("span",{children:`${(0,i.Du)(a)}/${(0,o.t)("s")}`}),s?(0,d.BX)(n.W4,{value:-1*s,children:[s>0?"+":"",(0,i.rl)(s)]}):null]})}l.displayName="ThroughputCell";const p=(0,a.Z)("div",{target:"e1cpe2330"})("display:flex;width:100%;justify-content:space-between;gap:",(0,r.D)(1),";")},"./app/views/starfish/utils/chartValueFormatters/formatThroughput.ts":(e,t,s)=>{s.d(t,{Z:()=>o});var a=s("./app/locale.tsx");const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return`${-1===e?"--":e.toFixed(2)} / ${(0,a.t)("s")}`}},"./app/views/starfish/views/spans/types.tsx":(e,t,s)=>{s.d(t,{F:()=>d,g:()=>l});var a=s("../node_modules/react/index.js"),o=s("./app/components/links/link.tsx"),r=s("./app/locale.tsx"),i=s("./app/views/starfish/components/tableCells/durationCell.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d={timeSpent:(0,r.t)("Time Spent"),p50p95:(0,r.t)("Duration (P50, P95)"),p50:(0,r.t)("Duration (P50)"),p95:(0,r.t)("Duration (P95)"),duration:(0,r.t)("Duration"),errorCount:(0,r.t)("5XX Responses"),throughput:(0,r.t)("Throughput")},l=function(e){if("timeSpent"===e){for(var t=arguments.length,s=new Array(t>1?t-1:0),r=1;r<t;r++)s[r-1]=arguments[r];return(0,n.BX)(a.Fragment,{children:[(0,n.tZ)("div",{children:(0,n.tZ)(i.Z,{milliseconds:s[0]})}),(0,n.tZ)(o.Z,{to:"/starfish/definitions/",children:"How was this calculated?"})]})}return""}},"./app/views/starfish/views/webServiceView/spanGroupBreakdownContainer.tsx":(e,t,s)=>{s.d(t,{sZ:()=>V,_2:()=>I});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js")),r=s("./app/components/charts/utils.tsx"),i=s("./app/components/panels/index.tsx"),n=s("./app/styles/space.tsx"),d=s("./app/utils.tsx"),l=s("./app/utils/discover/discoverQuery.tsx"),p=s("./app/utils/discover/eventView.tsx"),c=s("./app/utils/discover/types.tsx"),u=s("./app/utils/useLocation.tsx"),m=s("./app/utils/useOrganization.tsx"),h=s("./app/utils/usePageFilters.tsx"),g=s("./app/views/starfish/types.tsx"),v=s("./app/utils/discover/genericDiscoverQuery.tsx"),x=s("../node_modules/react/index.js"),f=s("../node_modules/react-router/es/index.js"),y=s("../node_modules/query-string/index.js"),b=s("./app/components/checkbox.tsx"),w=s("./app/components/textOverflow.tsx"),Z=s("./app/components/tooltip.tsx"),_=s("./app/locale.tsx"),j=s("./app/utils/dates.tsx"),D=s("./app/utils/discover/charts.tsx"),S=s("./app/utils/discover/styles.tsx"),T=s("./app/utils/formatters.tsx"),C=s("./app/views/performance/landing/widgets/components/selectableList.tsx"),$=s("./app/views/starfish/components/chart.tsx"),k=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function P(e){let{tableData:t,totalCumulativeTime:s,topSeriesData:a,initialShowSeries:r,transaction:i,isTimeseriesLoading:n,errored:l}=e;const{selection:p}=(0,h.Z)(),c=(0,o.u)(),[u,m]=(0,x.useState)(r);(0,x.useEffect)((()=>{m(r)}),[r]);const g=[];for(let e=0;e<a.length;e++){const t=a[e];u[e]&&g.push(t)}const v=c.charts.getColorPalette(t.length-2);return(0,k.BX)(M,{children:[(0,k.BX)(q,{children:[(0,k.tZ)(A,{children:(0,k.tZ)(N,{children:i?(0,_.t)("Endpoint Time Breakdown (P95)"):(0,_.t)("App Time Breakdown (P95)")})}),(0,k.tZ)($.ZP,{statsPeriod:"24h",height:210,data:g,start:"",end:"",errored:l,loading:n,utc:!1,grid:{left:"0",right:"0",top:"8px",bottom:"0"},definedAxisTicks:6,stacked:!0,aggregateOutputFormat:"duration",tooltipFormatterOptions:{valueFormatter:e=>(0,D.Ew)(e,"duration")}})]}),(0,k.tZ)(L,{children:t.map(((e,t)=>{const a=u[t],o=e.group,{start:r,end:n,utc:l,period:c}=p.datetime,h=r&&n?{start:(0,j.v5)(r),end:(0,j.v5)(n),utc:l}:{statsPeriod:c};["db","http"].includes(o["span.category"])?h["span.module"]=o["span.category"]:h["span.module"]="Other",h["span.category"]=o["span.category"];const g=`/starfish/spans/?${y.stringify(h)}`;return(0,k.tZ)(E,{children:(0,k.BX)(F,{children:[(0,k.tZ)(b.Z,{size:"sm",checkboxColor:v[t],inputCss:{backgroundColor:"red"},checked:a,onChange:()=>{const e=[...u];e[t]=!a,m(e)}}),(0,k.tZ)(B,{children:(0,d.ri)(i)?(0,k.tZ)(w.Z,{children:o["span.category"]}):(0,k.tZ)(f.Link,{to:g,children:(0,k.tZ)(w.Z,{children:o["span.category"]})})}),(0,k.tZ)(C.S$,{children:(0,k.tZ)(Z.u,{title:(0,_.t)("%s time spent on %s",(0,T.rl)(e.cumulativeTime/s,1),o["span.category"]),containerDisplayMode:"block",position:"top",children:(0,k.tZ)(S.Hw,{style:{textDecoration:"underline",textDecorationStyle:"dotted"},children:(0,T.rl)(e.cumulativeTime/s,1)})})})]})},`${o["span.category"]}`)}))})]})}P.displayName="SpanGroupBreakdown";const E=(0,a.Z)("li",{target:"e1sx7q3i7"})("line-height:",(e=>e.theme.text.lineHeightBody),";"),F=(0,a.Z)("div",{target:"e1sx7q3i6"})("display:flex;padding:",(0,n.D)(1)," ",(0,n.D)(2),";font-size:",(e=>e.theme.fontSizeMedium),";"),L=(0,a.Z)("ul",{target:"e1sx7q3i5"})("padding:",(0,n.D)(1)," 0 0 0;margin:0;border-left:1px solid ",(e=>e.theme.border),";list-style-type:none;"),B=(0,a.Z)("span",{target:"e1sx7q3i4"})("text-align:left;width:100%;padding:0 ",(0,n.D)(1.5),";"),q=(0,a.Z)("div",{target:"e1sx7q3i3"})("padding:0 ",(0,n.D)(2),";flex:2;"),N=(0,a.Z)("p",{target:"e1sx7q3i2"})((e=>e.theme.text.cardTitle),";"),A=(0,a.Z)("div",{target:"e1sx7q3i1"})("padding:0 ",(0,n.D)(1)," 0 0;min-height:36px;width:100%;display:flex;align-items:center;justify-content:space-between;"),M=(0,a.Z)("div",{target:"e1sx7q3i0"})("display:flex;min-height:200px;padding-bottom:",(0,n.D)(2),";"),{SPAN_SELF_TIME:O}=g.SpanMetricsFields,X="Other",V="<null>";function I(e){let{transaction:t,transactionMethod:s}=e;const a=(0,h.Z)(),r=(0,m.Z)(),i=(0,u.T)(),{selection:n}=a,c=(0,o.u)(),{data:g,isLoading:x}=(0,l._)({eventView:z(n,`transaction.op:http.server ${t?`transaction:${t}`:""} ${s?`http.method:${s}`:""}`,["span.category"]),orgSlug:r.slug,referrer:"starfish-web-service.span-category-breakdown",location:i,limit:4}),{data:f,isLoading:y}=(0,l._)({eventView:z(n,`transaction.op:http.server ${t?`transaction:${t}`:""} ${s?`http.method:${s}`:""}`,[]),orgSlug:r.slug,referrer:"starfish-web-service.total-time",location:i}),{isLoading:b,data:w,isError:Z}=function(e){let{eventView:t,enabled:s,initialData:a,referrer:o}=e;const r=(0,u.T)(),i=(0,m.Z)(),{isLoading:n,data:d,isError:l}=(0,v.JC)({route:"events-stats",eventView:t,location:r,orgSlug:i.slug,getRequestPayload:()=>({...t.getEventsAPIPayload(r),yAxis:t.yAxis,topEvents:t.topEvents,excludeOther:0,partial:1,orderby:t.sorts?.[0]?(0,p.uZ)(t.sorts?.[0]):void 0,interval:t.interval}),options:{enabled:s,retry:!1,refetchOnWindowFocus:!1},referrer:o});return{isLoading:n,data:n&&a?a:d,isError:l}}({eventView:R(n,`transaction.op:http.server ${t?`transaction:${t}`:""} ${s?`http.method:${s}`:""}`,["span.category"],!0),enabled:!0,referrer:"starfish-web-service.span-category-breakdown-timeseries",initialData:[]}),_=f?.data[0]?.[`sum(${O})`]?parseInt(f?.data[0][`sum(${O})`],10):0,j=g?.data.reduce(((e,t)=>e+parseInt(t[`sum(${O})`],10)),0)??0,D=_?_-j:0,S=[];if((0,d.ri)(g)){for(let e=0;e<g.data.length;e++){const t=g.data[e],s=t["span.category"];S.push({cumulativeTime:parseInt(t[`sum(${O})`],10),group:{"span.category":""===s?V:s}})}D>0&&S.push({cumulativeTime:D,group:{"span.category":X}})}const T={},C=c.charts.getColorPalette(S.length-2);(0,d.ri)(w)&&!b&&S.length>0&&(S.forEach(((e,t)=>{const s=e.group["span.category"],a=""===s?V:s;T[a]={seriesName:a,data:[],color:C[t]}})),Object.keys(w).forEach((e=>{const t=w?.[e];T[""===e?V:e].data=t?.data.map((e=>({name:e[0],value:e[1][0].count})))??[]})));const $=Object.values(T),E=S.map((e=>e.group["span.category"]!==X));return(0,k.tZ)(Q,{children:(0,k.tZ)(P,{tableData:S,totalCumulativeTime:_,isTableLoading:x,topSeriesData:$,colorPalette:C,initialShowSeries:E,isTimeseriesLoading:b,isCumulativeTimeLoading:y,transaction:t,errored:Z})})}I.displayName="SpanGroupBreakdownContainer";const Q=(0,a.Z)(i.s_,{target:"eoo99dh0"})("padding-top:",(0,n.D)(2),";margin-bottom:0;"),R=(e,t,s,a)=>p.ZP.fromSavedQuery({name:"",fields:[`sum(${O})`,`p95(${O})`,...s],yAxis:a?[`p95(${O})`]:[],query:t,dataset:c.as.SPANS_METRICS,start:e.datetime.start??void 0,end:e.datetime.end??void 0,range:e.datetime.period??void 0,orderby:"-sum_span_duration",projects:[1],version:2,topEvents:s.length>0?"4":void 0,interval:a?(0,r.ZS)(e.datetime,"low"):void 0}),z=(e,t,s)=>p.ZP.fromSavedQuery({name:"",fields:[`sum(${O})`,...s],query:t,dataset:c.as.SPANS_METRICS,start:e.datetime.start??void 0,end:e.datetime.end??void 0,range:e.datetime.period??void 0,orderby:"-sum_span_duration",projects:[1],version:2,topEvents:s.length>0?"4":void 0})}}]);
//# sourceMappingURL=../sourcemaps/app_views_starfish_components_tableCells_throughputCell_tsx-app_views_starfish_utils_chartVal-19ae22.504632a39d162a697ca13db9a2354212.js.map