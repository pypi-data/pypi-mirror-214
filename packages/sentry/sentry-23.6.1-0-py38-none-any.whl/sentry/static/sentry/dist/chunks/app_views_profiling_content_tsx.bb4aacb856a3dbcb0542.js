(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_profiling_content_tsx"],{"./app/components/events/searchBar.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>B}),n("../node_modules/core-js/modules/es.error.cause.js");var i=n("../node_modules/react/index.js"),s=n("../node_modules/lodash/assign.js"),o=n.n(s),r=n("../node_modules/lodash/flatten.js"),a=n.n(r),l=n("../node_modules/lodash/memoize.js"),c=n.n(l),p=n("../node_modules/lodash/omit.js"),d=n.n(p),u=n("./app/actionCreators/tags.tsx"),m=n("./app/components/smartSearchBar/index.tsx"),g=n("./app/constants/index.tsx"),h=n("./app/types/index.tsx"),f=n("./app/utils.tsx"),x=n("./app/utils/discover/fields.tsx"),Z=n("./app/utils/fields/index.ts"),y=n("./app/utils/measurements/measurements.tsx"),w=n("./app/utils/useApi.tsx"),b=n("./app/utils/withTags.tsx"),j=n("./app/views/dashboards/utils.tsx"),k=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const v=new RegExp(`^${g.c$}|\\${g.ir}`,"g"),S=new Set(Object.keys(x.wZ)),z=Object.keys(x.wZ).reduce(((e,t)=>(e[t]={...x.wZ[t],kind:Z.IV.FIELD},e)),{}),_=d()(z,x.J8),T=x.$4.reduce(((e,t)=>(e[t]={name:t,kind:Z.IV.METRICS},e)),{}),P=Object.keys(x.jg).reduce(((e,t)=>(e[t]={...x.jg[t],kind:Z.IV.FIELD},e)),{});function F(e){const{maxSearchItems:t,organization:n,tags:s,omitTags:r,fields:l,projectIds:p,includeSessionTagsValues:g,maxMenuHeight:b,customMeasurements:F}=e,B=(0,w.Z)(),D=(0,i.useMemo)((()=>(e=>e?.length?e.reduce(((e,t)=>(S.has(t.field)||(0,x.GO)(t.field)||(0,j.nk)(t.field)||(e[t.field]={key:t.field,name:t.field,kind:Z.IV.FUNCTION}),e)),{}):[])(l)),[l]),N=(0,i.useMemo)((()=>Object.keys(s).reduce(((e,t)=>(e[t]={...s[t],kind:Z.IV.TAG},e)),{})),[s]);(0,i.useEffect)((()=>{E.cache.clear?.()}),[p]);const E=c()(((e,t,i)=>{const s=p?.map(String);return(0,x.h1)(e.key)||(0,x.Xr)(e.key)?Promise.resolve([]):(0,Z.bn)(e.key)?Promise.resolve(Z.BF):(0,u.Fo)({api:B,orgSlug:n.slug,tagKey:e.key,search:t,projectIds:s,endpointParams:i,includeTransactions:!0,includeSessions:g}).then((e=>a()(e.filter((e=>{let{name:t}=e;return(0,f.ri)(t)})).map((e=>{let{name:t}=e;return t})))),(()=>{throw new Error("Unable to fetch event field values")}))}),((e,t)=>{let{key:n}=e;return`${n}-${t}`})),I=e=>{const t=((e,t)=>{const n=Object.keys(e).reduce(((t,n)=>(t[n]={...e[n],kind:Z.IV.MEASUREMENT},t)),{});return t?Object.keys(t).reduce(((e,n)=>(e[n]={...t[n],kind:Z.IV.MEASUREMENT},e)),n):n})(e,F),i=n.features.includes("performance-view")?Object.assign({},t,D,T,z):Object.assign({},_);return o()(i,N,z,P),i.has={key:Z.Sh.HAS,name:"Has property",values:Object.keys(i).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),predefined:!0,kind:Z.IV.FIELD},r&&r.length>0?d()(i,r):i};return(0,k.tZ)(y.Z,{children:n=>{let{measurements:i}=n;return(0,k.tZ)(m.Z,{hasRecentSearches:!0,savedSearchType:h.L4.EVENT,onGetTagValues:E,supportedTags:I(i),prepareQuery:e=>e.replace(v,""),maxSearchItems:t,excludedTags:[Z.Sh.ENVIRONMENT,Z.Sh.TOTAL_COUNT],maxMenuHeight:b??300,customPerformanceMetrics:F,...e})}})}F.displayName="SearchBar";const B=(0,b.Z)(F)},"./app/components/onboardingPanel.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("./app/components/panels/index.tsx"),o=n("./app/styles/space.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{image:t,noCenter:n,children:i,...o}=e;return(0,r.tZ)(s.s_,{...o,children:(0,r.BX)(l,{children:[t?(0,r.tZ)(p,{children:t}):null,(0,r.tZ)(c,{centered:!t&&!n,children:i})]})})}a.displayName="OnboardingPanel";const l=(0,i.Z)("div",{target:"euclof22"})("padding:",(0,o.D)(3),";position:relative;@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width: ",(e=>e.theme.breakpoints.medium),"){min-height:350px;}"),c=(0,i.Z)("div",{target:"euclof21"})("min-width:0;z-index:1;",(e=>e.centered?"text-align: center;":"")," ",(e=>e.centered?"max-width: 600px;":""),"@media (min-width: ",(e=>e.theme.breakpoints.small),"){flex:2;}"),p=(0,i.Z)(c,{target:"euclof20"})("position:relative;min-height:100px;max-width:300px;min-width:150px;margin:",(0,o.D)(2)," auto;@media (min-width: ",(e=>e.theme.breakpoints.small),"){flex:1;margin:",(0,o.D)(3),";max-width:auto;}"),d=a},"./app/utils/withTags.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/react/index.js"),o=n("./app/stores/tagStore.tsx"),r=n("./app/utils/getDisplayName.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends s.Component{constructor(){super(...arguments),(0,i.Z)(this,"state",{tags:o.Z.getState()}),(0,i.Z)(this,"unsubscribe",o.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...n}=this.props;return(0,a.tZ)(e,{tags:t??this.state.tags,...n})}}return t.displayName="WithTags",(0,i.Z)(t,"displayName",`withTags(${(0,r.Z)(e)})`),t}},"./app/views/profiling/content.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>it});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),o=n("../node_modules/react-router/es/index.js"),r=n("./app/components/alert.tsx"),a=n("./app/components/button.tsx"),l=n("./app/components/datePageFilter.tsx"),c=n("./app/components/environmentPageFilter.tsx"),p=n("./app/components/events/searchBar.tsx"),d=n("./app/components/featureBadge.tsx"),u=n("./app/components/layouts/thirds.tsx"),m=n("./app/components/organizations/pageFilterBar.tsx"),g=n("./app/components/organizations/pageFilters/container.tsx"),h=n("./app/components/pageHeadingQuestionTooltip.tsx"),f=n("./app/components/pagination.tsx"),x=n("./app/components/hookOrDefault.tsx");const Z=(0,x.Z)({hookName:"component:profiling-billing-banner"}),y=(0,x.Z)({hookName:"component:profiling-upgrade-plan-button"}),w=(0,x.Z)({hookName:"component:profiling-am1-or-mmx-upgrade"});var b=n("./app/components/profiling/profileEventsTable.tsx"),j=n("./app/components/projectPageFilter.tsx"),k=n("./app/components/sentryDocumentTitle.tsx"),v=n("./app/components/sidebar/types.tsx"),S=n("./app/components/smartSearchBar/index.tsx"),z=n("./app/constants/index.tsx"),_=n("./app/constants/pageFilters.tsx"),T=n("./app/locale.tsx"),P=n("./app/stores/sidebarPanelStore.tsx"),F=n("./app/styles/space.tsx"),B=n("./app/utils/analytics.tsx"),D=n("./app/utils/discover/eventView.tsx"),N=n("./app/utils/profiling/hooks/useProfileEvents.tsx"),E=n("./app/utils/profiling/hooks/useProfileFilters.tsx"),I=n("./app/utils/profiling/hooks/utils.tsx"),X=n("./app/utils/queryString.tsx"),C=n("./app/utils/useOrganization.tsx"),M=n("./app/utils/usePageFilters.tsx"),O=n("./app/utils/useProjects.tsx"),L=n("./app/views/profiling/utils.tsx"),q=n("./app/views/profiling/landing/profileCharts.tsx"),V=n("../node_modules/platformicons/build/index.js"),A=n("./app/components/emptyStateWarning.tsx"),G=n("./app/components/links/link.tsx"),R=n("./app/components/loadingIndicator.tsx"),U=n("./app/components/panels/index.tsx"),W=n("./app/components/performanceDuration.tsx"),H=n("./app/components/profiling/flex.tsx"),$=n("./app/components/profiling/functionsMiniGrid.tsx"),Q=n("./app/components/profiling/textTruncateOverflow.tsx"),Y=n("./app/icons/index.tsx"),J=n("./app/utils/discover/fields.tsx"),K=n("./app/utils/profiling/hooks/useProfilingTransactionQuickSummary.tsx"),ee=n("./app/utils/profiling/routes.tsx"),te=n("./app/utils/profiling/units/units.ts"),ne=n("./app/utils/useLocation.tsx"),ie=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const se=["transaction","project.id","last_seen()","p95()","count()"];function oe(){const e=(0,N.G)({fields:se,sort:{key:"p95()",order:"desc"},limit:3,query:"count():>3",referrer:"api.profiling.landing-slowest-transaction-panel"}),[t,n]=(0,s.useState)(null),i=(0,s.useMemo)((()=>e.data?.data??[]),[e.data]),o=(0,s.useMemo)((()=>i.map((e=>e.transaction))),[i]);if(o.length>0&&!o.includes(t)){const e=o[0];n(e)}const{isLoading:r}=e,a=!r&&i&&i.length>0;return(0,ie.tZ)(pe,{children:(0,ie.BX)(H.k,{column:!0,h:"100%",children:[(0,ie.BX)(H.k,{column:!0,p:(0,F.D)(1.5),children:[(0,ie.tZ)(de,{children:(0,T.t)("Slowest Transactions")}),(0,ie.tZ)(ue,{children:(0,T.t)("Slowest transactions that could use some optimization.")})]}),(r||!a)&&(0,ie.tZ)(H.k,{column:!0,align:"center",justify:"center",h:"100%",children:r?(0,ie.tZ)(R.Z,{}):!a&&(0,ie.tZ)(H.k.Item,{children:(0,ie.BX)(A.Z,{children:[(0,ie.tZ)("p",{children:(0,T.t)("No results found")}),(0,ie.tZ)(fe,{children:(0,T.t)("Transactions may not be listed due to the filters above or a low number of profiles.")})]})})}),i?.map((i=>(0,ie.tZ)(le,{transaction:i,open:i.transaction===t,onOpen:()=>n(i.transaction),units:e.data?.meta.units},i.transaction)))]})})}oe.displayName="ProfilingSlowestTransactionsPanel";var re={name:"e0dnmk",styles:"cursor:pointer"},ae={name:"1x8xwk",styles:"max-width:fit-content"};function le(e){let{transaction:t,open:n,onOpen:i,units:o}=e;const{query:r}=(0,ne.T)(),l=(0,C.Z)(),c=(0,O.Z)(),p=(0,s.useMemo)((()=>c.projects.find((e=>e.id===String(t["project.id"])))),[c.projects,t]);if(!p&&!c.fetching&&c.projects.length>0)return null;const d="p95()",u=(0,te.fr)(o?.[d]??o?.[(0,J.LY)(d)]??"nanoseconds","milliseconds");return(0,ie.BX)(me,{children:[(0,ie.BX)(H.k,{justify:"space-between",gap:(0,F.D)(1),children:[(0,ie.tZ)(V.v,{platform:p?.platform??"default"}),(0,ie.tZ)(H.k.Item,{grow:1,onClick:i,css:re,children:(0,ie.tZ)("div",{css:ae,children:(0,ie.tZ)(G.Z,{to:(0,ee.R0)({query:r,orgSlug:l.slug,projectSlug:p?.slug,transaction:t.transaction}),onClick:()=>{(0,B.Gi)("profiling_views.go_to_transaction",{source:"slowest_transaction_panel",organization:l})},children:(0,ie.tZ)(Q.W,{children:t.transaction})})})}),(0,ie.tZ)(W.Z,{milliseconds:u(t[d]),abbreviation:!0}),(0,ie.tZ)(a.zx,{borderless:!0,size:"zero",onClick:i,children:(0,ie.tZ)(Y.g6,{direction:n?"up":"down",size:"xs"})})]}),(0,ie.tZ)(ge,{style:{height:n?160:0},children:n&&p&&(0,ie.tZ)(ce,{transaction:String(t.transaction),organization:l,project:p})})]},t.transaction)}function ce(e){const{transaction:t,project:n,organization:i}=e,{functionsQuery:s,functions:o}=(0,K.d)({transaction:t,project:n,referrer:"api.profiling.landing-slowest-transaction-panel",skipLatestProfile:!0,skipSlowestProfile:!0});return s.isLoading?(0,ie.tZ)($.q8,{}):!o||o&&0===o.length?(0,ie.tZ)($.EA,{}):(0,ie.tZ)(he,{children:(0,ie.tZ)($.nL,{functions:o,organization:i,project:n,onLinkClick:()=>(0,B.Gi)("profiling_views.go_to_flamegraph",{organization:i,source:"slowest_transaction_panel"})})})}le.displayName="SlowestTransactionPanelItem",ce.displayName="PanelItemFunctionsMiniGrid";const pe=(0,i.Z)(U.s_,{target:"e6nc0wg6"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),de=(0,i.Z)("span",{target:"e6nc0wg5"})("font-size:",(e=>e.theme.text.cardTitle.fontSize),";font-weight:",(e=>e.theme.text.cardTitle.fontWeight),";line-height:",(e=>e.theme.text.cardTitle.lineHeight),";"),ue=(0,i.Z)("span",{target:"e6nc0wg4"})("color:",(e=>e.theme.subText),";"),me=(0,i.Z)("div",{target:"e6nc0wg3"})("padding:",(0,F.D)(1)," ",(0,F.D)(1.5),";border-top:1px solid ",(e=>e.theme.border),";"),ge=(0,i.Z)("div",{target:"e6nc0wg2"})({name:"1kt23o3",styles:"transition:height 0.1s ease;width:100%;overflow:hidden"}),he=(0,i.Z)("div",{target:"e6nc0wg1"})("padding-top:",(0,F.D)(1.5),";"),fe=(0,i.Z)("div",{target:"e6nc0wg0"})("font-size:",(e=>e.theme.fontSizeMedium),";");var xe=n("./app/components/charts/styles.tsx"),Ze=n("./app/components/count.tsx"),ye=n("./app/components/idBadge/index.tsx"),we=n("./app/components/scoreBar.tsx"),be=n("./app/components/textOverflow.tsx"),je=n("./app/components/tooltip.tsx"),ke=n("./app/constants/chartPalette.tsx"),ve=n("./app/utils/profiling/hooks/useProfileFunctions.tsx"),Se=n("./app/utils/tokenizeSearch.tsx");const ze=3;function _e(){const[e,t]=(0,s.useState)(0),n=(0,s.useMemo)((()=>{const e=new Se.MY("");return e.setFilterValues("is_application",["1"]),e.formatString()}),[]),i=(0,ve.W)({fields:Fe,referrer:"api.profiling.suspect-functions.list",sort:{key:"sum()",order:"desc"},query:n,limit:ze}),o=(0,s.useMemo)((()=>(i.data?.data?.length||0)>0),[i.data]),r=(0,ve.W)({fields:Be,referrer:"api.profiling.suspect-functions.totals",sort:{key:"sum()",order:"desc"},query:n,limit:ze,projects:i.isFetched?[...new Set((i.data?.data??[]).map((e=>e["project.id"])))]:[],enabled:i.isFetched&&o});return(0,ie.BX)(Ne,{children:[(0,ie.BX)(Ee,{children:[(0,ie.tZ)(Ie,{children:(0,T.t)("Suspect Functions")}),(0,ie.tZ)(Xe,{children:(0,T.t)("Slowest functions by total time spent.")})]}),(0,ie.BX)(Ce,{children:[(i.isLoading||o&&r.isLoading)&&(0,ie.tZ)(Re,{height:"100%",children:(0,ie.tZ)(R.Z,{})}),(i.isError||r.isError)&&(0,ie.tZ)(Re,{height:"100%",children:(0,ie.tZ)(Y.FC,{"data-test-id":"error-indicator",color:"gray300",size:"lg"})}),i.isFetched&&!o&&(0,ie.tZ)(A.Z,{children:(0,ie.tZ)("p",{children:(0,T.t)("No functions found")})}),i.isFetched&&r.isFetched&&(0,ie.tZ)(Me,{children:(i.data?.data??[]).map(((n,i)=>{const s=r.data?.data?.find((e=>e["project.id"]===n["project.id"])),o=s?.["sum()"]??n["sum()"];return(0,ie.tZ)(Pe,{isExpanded:i===e,setExpanded:()=>t(i),func:n,totalDuration:o},`${n.package}-${n.function}`)}))})]})]})}_e.displayName="SlowestFunctionsWidget";const Te=10;function Pe(e){let{func:t,isExpanded:n,setExpanded:i,totalDuration:o}=e;const r=(0,C.Z)(),{projects:l}=(0,O.Z)(),c=l.find((e=>e.id===String(t["project.id"]))),p=Math.ceil((t["sum()"]??0)/o*Te),d=new Array(Te).fill([ke.$[0][0]]),u=(0,s.useMemo)((()=>{const e=new Se.MY("");return e.setFilterValues("is_application",["1"]),e.setFilterValues("project.id",[String(t["project.id"])]),e.setFilterValues("package",[String(t.package)]),e.setFilterValues("function",[String(t.function)]),e.formatString()}),[t]),m=(0,ve.W)({fields:De,referrer:"api.profiling.suspect-functions.transactions",sort:{key:"sum()",order:"desc"},query:u,limit:5,enabled:n});return(0,ie.BX)(Oe,{children:[(0,ie.BX)(Le,{children:[c&&(0,ie.tZ)(ye.Z,{project:c,avatarSize:16,hideName:!0}),(0,ie.tZ)(qe,{children:t.function}),(0,ie.tZ)(je.u,{title:(0,T._N)("Appeared [count] times for a total self time of [totalSelfTime]",{count:(0,ie.tZ)(Ze.Z,{value:t["count()"]}),totalSelfTime:(0,ie.tZ)(W.Z,{nanoseconds:t["sum()"],abbreviation:!0})}),children:(0,ie.tZ)(we.Z,{score:p,palette:d,size:20,radius:0})}),(0,ie.tZ)(a.zx,{icon:(0,ie.tZ)(Y.g6,{size:"xs",direction:n?"up":"down"}),"aria-label":(0,T.t)("Expand"),"aria-expanded":n,size:"zero",borderless:!0,onClick:()=>i()})]}),n&&(0,ie.BX)(s.Fragment,{children:[m.isError&&(0,ie.tZ)(Re,{height:"140px",children:(0,ie.tZ)(Y.FC,{"data-test-id":"error-indicator",color:"gray300",size:"lg"})}),m.isLoading&&(0,ie.tZ)(Re,{height:"140px",children:(0,ie.tZ)(R.Z,{})}),m.isFetched&&(0,ie.BX)(Ve,{"data-test-id":"transactions-list",children:[(0,ie.tZ)(Ae,{children:(0,ie.tZ)(be.Z,{children:(0,T.t)("Transaction")})}),(0,ie.tZ)(Ae,{align:"right",children:(0,ie.tZ)(be.Z,{children:(0,T.t)("Count")})}),(0,ie.tZ)(Ae,{align:"right",children:(0,ie.tZ)(be.Z,{children:(0,T.t)("Total Self Time")})}),(m.data?.data??[]).map((e=>{const n=e["examples()"];let i=(0,ie.tZ)(s.Fragment,{children:e.transaction});if(c&&n.length){const e=(0,ee.TH)({orgSlug:r.slug,projectSlug:c.slug,profileId:n[0],query:{frameName:t.function,framePackage:t.package}});i=(0,ie.tZ)(G.Z,{to:e,children:i})}return(0,ie.BX)(s.Fragment,{children:[(0,ie.tZ)(Ge,{children:(0,ie.tZ)(be.Z,{children:i})}),(0,ie.tZ)(Ge,{align:"right",children:(0,ie.tZ)(Ze.Z,{value:e["count()"]})}),(0,ie.tZ)(Ge,{align:"right",children:(0,ie.tZ)(W.Z,{nanoseconds:e["sum()"],abbreviation:!0})})]},e.transaction)}))]})]})]})}Pe.displayName="SlowestFunctionEntry";const Fe=["project.id","package","function","count()","sum()"],Be=["project.id","sum()"],De=["transaction","count()","sum()","examples()"],Ne=(0,i.Z)(U.s_,{target:"e19xep7z12"})("display:flex;flex-direction:column;padding-top:",(0,F.D)(2),";"),Ee=(0,i.Z)("div",{target:"e19xep7z11"})("display:flex;flex-direction:column;align-items:flex-start;padding-left:",(0,F.D)(2),";padding-right:",(0,F.D)(2),";"),Ie=(0,i.Z)(xe.ws,{target:"e19xep7z10"})({name:"bjn8wh",styles:"position:relative"}),Xe=(0,i.Z)("div",{target:"e19xep7z9"})("color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeMedium),";display:inline-block;"),Ce=(0,i.Z)("div",{target:"e19xep7z8"})({name:"1je9ejj",styles:"flex:1 1 auto;display:flex;flex-direction:column;justify-content:center"}),Me=(0,i.Z)("ul",{target:"e19xep7z7"})("padding:",(0,F.D)(1)," 0 0 0;margin:0;list-style-type:none;display:flex;flex-direction:column;"),Oe=(0,i.Z)("li",{target:"e19xep7z6"})("line-height:",(e=>e.theme.text.lineHeightBody),";"),Le=(0,i.Z)("div",{target:"e19xep7z5"})("display:flex;gap:",(0,F.D)(1),";border-top:1px solid ",(e=>e.theme.border),";padding:",(0,F.D)(1)," ",(0,F.D)(2),";font-size:",(e=>e.theme.fontSizeMedium),";"),qe=(0,i.Z)(be.Z,{target:"e19xep7z4"})({name:"mkkf9p",styles:"flex:1 1 auto"}),Ve=(0,i.Z)("div",{target:"e19xep7z3"})("display:grid;grid-template-columns:65% 10% 25%;padding:",(0,F.D)(0)," ",(0,F.D)(2),";"),Ae=(0,i.Z)("span",{target:"e19xep7z2"})("text-transform:uppercase;font-size:",(e=>e.theme.fontSizeExtraSmall),";font-weight:600;color:",(e=>e.theme.subText),";text-align:",(e=>e.align),";"),Ge=(0,i.Z)("div",{target:"e19xep7z1"})("font-size:",(e=>e.theme.fontSizeSmall),";text-align:",(e=>e.align),";padding:",(0,F.D)(.5)," 0px;"),Re=(0,i.Z)("div",{target:"e19xep7z0"})("height:",(e=>e.height),";display:flex;align-items:center;justify-content:center;");var Ue=n("./images/spot/profiling-empty-state.svg"),We=n("./app/components/buttonBar.tsx"),He=n("./app/components/onboardingPanel.tsx");function $e(e){return(0,ie.BX)(He.Z,{image:(0,ie.tZ)(Qe,{src:Ue}),children:[e.content?e.content:(0,ie.BX)(s.Fragment,{children:[(0,ie.tZ)("h3",{children:(0,T.t)("Function level insights")}),(0,ie.tZ)("p",{children:(0,T.t)("Discover slow-to-execute or resource intensive functions within your application")})]}),(0,ie.tZ)(Ye,{gap:1,children:e.children})]})}$e.displayName="ProfilingOnboardingPanel";const Qe=(0,i.Z)("img",{target:"eb17yy31"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){user-select:none;position:absolute;top:0;bottom:0;width:220px;margin-top:auto;margin-bottom:auto;transform:translateX(-50%);left:50%;}@media (min-width: ",(e=>e.theme.breakpoints.large),"){transform:translateX(-55%);width:300px;min-width:300px;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){transform:translateX(-60%);width:380px;min-width:380px;}@media (min-width: ",(e=>e.theme.breakpoints.xxlarge),"){transform:translateX(-65%);width:420px;min-width:420px;}"),Ye=(0,i.Z)(We.ZP,{target:"eb17yy30"})({name:"vpj881",styles:"grid-template-columns:repeat(auto-fit, minmax(130px, max-content))"});function Je(e){let{location:t}=e;const n=(0,C.Z)(),{selection:i}=(0,M.Z)(),x=(0,X.ro)(t.query.cursor),F=(0,X.ro)(t.query.query,""),V=n.features.includes("profiling-using-transactions"),A=V?et:Ke,G=(0,I.k)((0,X.ro)(t.query.sort),A,{key:"p95()",order:"desc"}),R=(0,E.J)({query:"",selection:i,disabled:V}),{projects:U}=(0,O.Z)(),W=(0,N.G)({cursor:x,fields:A,query:F,sort:G,referrer:"api.profiling.landing-table"}),H="error"===W.status?(0,I.Z)(W.error):null;(0,s.useEffect)((()=>{(0,B.Gi)("profiling_views.landing",{organization:n})}),[n]);const $=(0,s.useCallback)((e=>{o.browserHistory.push({...t,query:{...t.query,cursor:void 0,query:e||void 0}})}),[t]),Q=(0,s.useCallback)((()=>{(0,B.Gi)("profiling_views.onboarding",{organization:n}),P.Z.activatePanel(v.z.PROFILING_ONBOARDING)}),[n]),Y=(0,s.useMemo)((()=>{if(0===i.projects.length||i.projects[0]===_.mP)return U.every((e=>!e.hasProfiles));const e=new Set(U.filter((e=>e.hasProfiles)).map((e=>e.id)));return i.projects.every((t=>!e.has(String(t))))}),[i.projects,U]),J=(0,s.useMemo)((()=>{const e=D.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:(0,T.t)("Profiling"),fields:[],query:F,projects:i.projects},t);return e.additionalConditions.setFilterValues("has",["profile.id"]),e}),[t,F,i.projects]),K=n.features.includes("profiling-ga");return(0,ie.tZ)(k.Z,{title:(0,T.t)("Profiling"),orgSlug:n.slug,children:(0,ie.tZ)(g.Z,{defaultSelection:V?{datetime:L.NN}:void 0,children:(0,ie.BX)(u.T3,{children:[K&&(0,ie.tZ)(Z,{organization:n}),(0,ie.tZ)(u.h4,{children:(0,ie.tZ)(u.oB,{children:(0,ie.BX)(u.Dx,{children:[(0,T.t)("Profiling"),(0,ie.tZ)(h.u,{docsUrl:"https://docs.sentry.io/product/profiling/",title:(0,T.t)("Profiling collects detailed information in production about the functions executing in your application and how long they take to run, giving you code-level visibility into your hot paths.")}),K?(0,ie.tZ)(d.Z,{type:"new"}):(0,ie.tZ)(d.Z,{type:"beta"})]})})}),(0,ie.tZ)(u.uT,{children:(0,ie.BX)(u.or,{fullWidth:!0,children:[H&&(0,ie.tZ)(r.bZ,{type:"error",showIcon:!0,children:H}),(0,ie.BX)(tt,{children:[(0,ie.BX)(m.Z,{condensed:!0,children:[(0,ie.tZ)(j.Z,{}),(0,ie.tZ)(c.Z,{}),(0,ie.tZ)(l.Z,{alignDropdown:"left"})]}),V?(0,ie.tZ)(p.Z,{searchSource:"profile_summary",organization:n,projectIds:J.project,query:F,onSearch:$,maxQueryLength:z.dI}):(0,ie.tZ)(S.Z,{organization:n,hasRecentSearches:!0,searchSource:"profile_landing",supportedTags:R,query:F,onSearch:$,maxQueryLength:z.dI})]}),Y?K?(0,ie.BX)($e,{content:(0,ie.tZ)(w,{organization:n,fallback:(0,ie.BX)(s.Fragment,{children:[(0,ie.tZ)("h3",{children:(0,T.t)("Function level insights")}),(0,ie.tZ)("p",{children:(0,T.t)("Discover slow-to-execute or resource intensive functions within your application")})]})}),children:[(0,ie.tZ)(y,{organization:n,priority:"primary",fallback:(0,ie.tZ)(a.zx,{onClick:Q,priority:"primary",children:(0,T.t)("Set Up Profiling")}),children:(0,T.t)("Update plan")}),(0,ie.tZ)(a.zx,{href:"https://docs.sentry.io/product/profiling/",external:!0,children:(0,T.t)("Read Docs")})]}):(0,ie.BX)($e,{children:[(0,ie.tZ)(a.zx,{onClick:Q,priority:"primary",children:(0,T.t)("Set Up Profiling")}),(0,ie.tZ)(a.zx,{href:"https://docs.sentry.io/product/profiling/",external:!0,children:(0,T.t)("Read Docs")})]}):(0,ie.BX)(s.Fragment,{children:[(0,ie.BX)(nt,{children:[n.features.includes("profiling-global-suspect-functions")?(0,ie.tZ)(_e,{}):(0,ie.tZ)(oe,{}),(0,ie.tZ)(q.A,{referrer:"api.profiling.landing-chart",query:F,selection:i,hideCount:!0})]}),(0,ie.tZ)(b.Q,{columns:A.slice(),data:"success"===W.status?W.data:null,error:"error"===W.status?(0,T.t)("Unable to load profiles"):null,isLoading:"loading"===W.status,sort:G,sortableColumns:new Set(A)}),(0,ie.tZ)(f.Z,{pageLinks:"success"===W.status?W.getResponseHeader?.("Link")??null:null})]})]})})]})})})}Je.displayName="ProfilingContent";const Ke=["transaction","project.id","last_seen()","p75()","p95()","p99()","count()"],et=[...Ke,"user_misery()"],tt=(0,i.Z)("div",{target:"emzmz061"})("display:grid;gap:",(0,F.D)(2),";grid-template-columns:min-content auto;margin-bottom:",(0,F.D)(2),";"),nt=(0,i.Z)("div",{target:"emzmz060"})("display:grid;grid-template-columns:minmax(0, 1fr) 1fr;gap:",(0,F.D)(2),";@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:minmax(0, 1fr);}"),it=Je},"../node_modules/lodash/assign.js":(e,t,n)=>{var i=n("../node_modules/lodash/_assignValue.js"),s=n("../node_modules/lodash/_copyObject.js"),o=n("../node_modules/lodash/_createAssigner.js"),r=n("../node_modules/lodash/isArrayLike.js"),a=n("../node_modules/lodash/_isPrototype.js"),l=n("../node_modules/lodash/keys.js"),c=Object.prototype.hasOwnProperty,p=o((function(e,t){if(a(t)||r(t))s(t,l(t),e);else for(var n in t)c.call(t,n)&&i(e,n,t[n])}));e.exports=p},"./images/spot/profiling-empty-state.svg":(e,t,n)=>{"use strict";e.exports=n.p+"assets/profiling-empty-state.3d9aa14c30fece51de56.svg"}}]);
//# sourceMappingURL=../sourcemaps/app_views_profiling_content_tsx.2a5af628318dd7439fcda1505f4b8af1.js.map