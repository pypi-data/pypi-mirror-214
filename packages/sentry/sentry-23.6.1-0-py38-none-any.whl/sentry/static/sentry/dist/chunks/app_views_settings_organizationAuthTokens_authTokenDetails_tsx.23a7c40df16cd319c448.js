"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationAuthTokens_authTokenDetails_tsx"],{"./app/views/settings/organizationAuthTokens/authTokenDetails.tsx":(e,t,n)=>{n.r(t),n.d(t,{OrganizationAuthTokensDetails:()=>A,default:()=>b}),n("../node_modules/core-js/modules/es.array.push.js");var a=n("../node_modules/react/index.js"),o=n("../node_modules/react-router/es/index.js"),s=n("./app/actionCreators/indicator.tsx"),i=n("./app/components/alert.tsx"),r=n("./app/components/forms/index.tsx"),l=n("./app/components/forms/fieldGroup/index.tsx"),d=n("./app/components/links/externalLink.tsx"),c=n("./app/components/loadingError.tsx"),p=n("./app/components/loadingIndicator.tsx"),u=n("./app/components/panels/index.tsx"),h=n("./app/components/sentryDocumentTitle.tsx"),m=n("./app/locale.tsx"),k=n("./app/utils/dates.tsx"),g=n("./app/utils/getDynamicText.tsx"),x=n("./app/utils/handleXhrErrorResponse.tsx"),w=n("./app/utils/withDomainRequired.tsx"),y=n("./app/utils/withOrganization.tsx"),Z=n("./app/views/settings/components/settingsPageHeader.tsx"),f=n("./app/views/settings/components/text/textBlock.tsx"),T=n("./app/views/settings/organizationAuthTokens/index.tsx"),v=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function D(e){let{token:t,organization:n}=e;const a={name:t.name,tokenPreview:(0,T.tokenPreview)(t.tokenLastCharacters||"****")};return(0,v.BX)(r.l0,{apiMethod:"PUT",initialData:a,apiEndpoint:`/organizations/${n.slug}/auth-tokens/${t.id}/`,onSubmit:()=>{try{const e=(0,m.t)("Successfully updated the auth token.");(0,s.S9)(e)}catch(e){const t=(0,m.t)("Failed to update the auth token.");(0,x.X)(t,e),(0,s.Iw)(t)}},onCancel:()=>o.browserHistory.push((0,w.D)(`/settings/${n.slug}/auth-tokens/`)),children:[(0,v.tZ)(r.nv,{name:"name",label:(0,m.t)("Name"),value:t.dateLastUsed,required:!0,help:(0,m.t)("A name to help you identify this token.")}),(0,v.tZ)(r.nv,{name:"tokenPreview",label:(0,m.t)("Token"),value:(0,T.tokenPreview)(t.tokenLastCharacters?(0,g.Z)({value:t.tokenLastCharacters,fixed:"ABCD"}):"****"),disabled:!0,help:(0,m.t)("You can only view the token once after creation.")}),(0,v.tZ)(l.Z,{label:(0,m.t)("Scopes"),inline:!1,help:(0,m.t)("You cannot change the scopes of an existing token. If you need different scopes, please create a new token."),children:(0,v.tZ)("div",{children:t.scopes.slice().sort().join(", ")})})]})}function A(e){let{params:t,organization:n}=e;const[o,s]=(0,a.useState)(null),[r,l]=(0,a.useState)(!1),{tokenId:g}=t,w=(0,a.useCallback)((async()=>{try{await new Promise((e=>setTimeout(e,500))),s(function(e){let{id:t,name:n,scopes:a,dateCreated:o=new Date,dateLastUsed:s,projectLastUsed:i}=e;return{id:t,name:n,tokenLastCharacters:crypto.randomUUID().slice(0,4),scopes:a,dateCreated:o,dateLastUsed:s,projectLastUsed:i}}({id:g,name:"custom token",scopes:["org:ci"],dateLastUsed:(0,k.qE)(new Date,"00:05:00"),projectLastUsed:{slug:"my-project",name:"My Project"},dateCreated:(0,k.qE)(new Date,"00:01:00")})),l(!1)}catch(e){const t=(0,m.t)("Failed to load auth token.");(0,x.X)(t,e),l(e)}}),[g]);return(0,a.useEffect)((()=>{w()}),[w]),(0,v.BX)("div",{children:[(0,v.tZ)(h.Z,{title:(0,m.t)("Edit Auth Token")}),(0,v.tZ)(Z.Z,{title:(0,m.t)("Edit Auth Token")}),(0,v.tZ)(i.ZP,{children:"Note: This page is WIP and currently only shows mocked data."}),(0,v.tZ)(f.Z,{children:(0,m.t)("Authentication tokens allow you to perform actions against the Sentry API on behalf of your organization. They're the easiest way to get started using the API.")}),(0,v.tZ)(f.Z,{children:(0,m._N)("For more information on how to use the web API, see our [link:documentation].",{link:(0,v.tZ)(d.Z,{href:"https://docs.sentry.io/api/"})})}),(0,v.BX)(u.s_,{children:[(0,v.tZ)(u.V9,{children:(0,m.t)("Auth Token Details")}),(0,v.BX)(u.N,{children:[r&&(0,v.tZ)(c.Z,{message:(0,m.t)("Failed to load auth token."),onRetry:w}),!r&&!o&&(0,v.tZ)(p.Z,{}),!r&&o&&(0,v.tZ)(D,{token:o,organization:n})]})]})]})}D.displayName="AuthTokenDetailsForm",A.displayName="OrganizationAuthTokensDetails";const b=(0,y.Z)(A)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationAuthTokens_authTokenDetails_tsx.5b6fb6a59719a64430831e55fb4ef7f3.js.map