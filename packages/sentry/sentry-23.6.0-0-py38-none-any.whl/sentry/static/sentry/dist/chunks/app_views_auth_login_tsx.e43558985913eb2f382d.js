"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_auth_login_tsx"],{"./app/views/auth/login.tsx":(e,t,o)=>{o.r(t),o.d(t,{default:()=>M});var i=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=o("../node_modules/react/index.js"),r=o("./app/components/alert.tsx"),a=o("./app/components/button.tsx"),l=o("./app/components/loadingError.tsx"),d=o("./app/components/loadingIndicator.tsx"),p=o("./app/components/navTabs.tsx"),c=o("./app/locale.tsx"),u=o("./app/styles/space.tsx"),h=o("./app/utils/withApi.tsx"),g=(o("../node_modules/core-js/modules/es.array.push.js"),o("../node_modules/react-router/es/index.js")),m=o("./app/components/forms/fields/secretField.tsx"),Z=o("./app/components/forms/fields/textField.tsx"),b=o("./app/components/forms/form.tsx"),x=o("./app/components/links/link.tsx"),f=o("./app/icons/index.tsx"),v=o("./app/stores/configStore.tsx"),y=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function S(e){let{vstsLoginLink:t,githubLoginLink:o,googleLoginLink:i}=e;return(0,y.BX)(_,{children:[(0,y.tZ)(w,{children:(0,c.t)("External Account Login")}),i&&(0,y.tZ)(a.zx,{size:"sm",icon:(0,y.tZ)(f.vY,{size:"xs"}),href:i,children:(0,c.t)("Sign in with Google")}),o&&(0,y.tZ)(a.zx,{size:"sm",icon:(0,y.tZ)(f.Uv,{size:"xs"}),href:o,children:(0,c.t)("Sign in with GitHub")}),t&&(0,y.tZ)(a.zx,{size:"sm",icon:(0,y.tZ)(f.mT,{size:"xs"}),href:t,children:(0,c.t)("Sign in with Azure DevOps")})]})}function k(e){let{authConfig:t}=e;const[o,i]=(0,s.useState)(""),{githubLoginLink:n,vstsLoginLink:a}=t,l=!(!n&&!a);return(0,y.BX)(L,{hasLoginProvider:l,children:[(0,y.BX)(b.Z,{submitLabel:(0,c.t)("Continue"),apiEndpoint:"/auth/login/",apiMethod:"POST",onSubmitSuccess:e=>{v.Z.set("user",e.user),g.browserHistory.push({pathname:e.nextUri})},onSubmitError:e=>{i(e.responseJSON.errors.__all__)},footerStyle:{borderTop:"none",alignItems:"center",marginBottom:0,padding:0},extraButton:(0,y.tZ)(C,{to:"/account/recover/",children:(0,c.t)("Lost your password?")}),children:[o&&(0,y.tZ)(r.bZ,{type:"error",children:o}),(0,y.tZ)(Z.Z,{name:"username",placeholder:(0,c.t)("username or email"),label:(0,c.t)("Account"),stacked:!0,inline:!1,hideControlState:!0,required:!0}),(0,y.tZ)(m.Z,{name:"password",placeholder:(0,c.t)("password"),label:(0,c.t)("Password"),stacked:!0,inline:!1,hideControlState:!0,required:!0})]}),l&&(0,y.tZ)(S,{vstsLoginLink:a,githubLoginLink:n})]})}S.displayName="LoginProviders",k.displayName="LoginForm";const L=(0,n.Z)("div",{target:"e11otuu63"})("display:grid;gap:60px;grid-template-columns:",(e=>e.hasLoginProvider?"1fr 0.8fr":"1fr"),";"),w=(0,n.Z)("div",{target:"e11otuu62"})({name:"1u5acre",styles:"margin:0;font-size:15px;font-weight:bold;line-height:24px"}),_=(0,n.Z)("div",{target:"e11otuu61"})("position:relative;display:grid;grid-auto-rows:max-content;gap:",(0,u.D)(1.5),";&:before{position:absolute;display:block;content:'';top:0;bottom:0;left:-30px;border-left:1px solid ",(e=>e.theme.border),";}"),C=(0,n.Z)(x.Z,{target:"e11otuu60"})("color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeMedium),";&:hover{color:",(e=>e.theme.textColor),";}"),q=k;var P=o("./app/components/forms/fields/radioField.tsx"),z=o("./app/components/links/externalLink.tsx");function N(e){let{authConfig:t}=e;const{hasNewsletter:o}=t,[i,n]=(0,s.useState)("");return(0,y.BX)(b.Z,{apiMethod:"POST",apiEndpoint:"/auth/register/",initialData:{subscribe:!0},submitLabel:(0,c.t)("Continue"),onSubmitSuccess:e=>{v.Z.set("user",e.user),g.browserHistory.push({pathname:e.nextUri})},onSubmitError:e=>{n(e.responseJSON.detail)},extraButton:(0,y.tZ)(j,{href:"https://sentry.io/privacy/",children:(0,c.t)("Privacy Policy")}),children:[i&&(0,y.tZ)(r.bZ,{type:"error",children:i}),(0,y.tZ)(Z.Z,{name:"name",placeholder:(0,c.t)("Jane Bloggs"),label:(0,c.t)("Name"),stacked:!0,inline:!1,required:!0}),(0,y.tZ)(Z.Z,{name:"username",placeholder:(0,c.t)("you@example.com"),label:(0,c.t)("Email"),stacked:!0,inline:!1,required:!0}),(0,y.tZ)(m.Z,{name:"password",placeholder:(0,c.t)("something super secret"),label:(0,c.t)("Password"),stacked:!0,inline:!1,required:!0}),o&&(0,y.tZ)(P.Z,{name:"subscribe",choices:[["true",(0,c.t)("Yes, I would like to receive updates via email")],["flase",(0,c.t)("No, I'd prefer not to receive these updates")]],help:(0,c._N)("We'd love to keep you updated via email with product and feature\n           announcements, promotions, educational materials, and events. Our\n           updates focus on relevant information, and we'll never sell your data\n           to third parties. See our [link] for more details.",{link:(0,y.tZ)("a",{href:"https://sentry.io/privacy/",children:"Privacy Policy"})}),stacked:!0,inline:!1})]})}N.displayName="RegisterForm";const j=(0,n.Z)(z.Z,{target:"e1kibdsq0"})("color:",(e=>e.theme.gray300),";&:hover{color:",(e=>e.theme.textColor),";}"),T=N;function B(e){let{authConfig:t}=e;const[o,i]=(0,s.useState)(""),{serverHostname:n}=t;return(0,y.BX)(b.Z,{apiMethod:"POST",apiEndpoint:"/auth/sso-locate/",onSubmitSuccess:e=>{g.browserHistory.push({pathname:e.nextUri})},onSubmitError:e=>{i(e.responseJSON.detail)},submitLabel:(0,c.t)("Continue"),footerStyle:{borderTop:"none",alignItems:"center",marginBottom:0,padding:0},children:[o&&(0,y.tZ)(r.bZ,{type:"error",children:o}),(0,y.tZ)(Z.Z,{name:"organization",placeholder:"acme",label:(0,c.t)("Organization ID"),required:!0,stacked:!0,inline:!1,hideControlState:!0,help:(0,c._N)("Your ID is the slug after the hostname. e.g. [example] is [slug].",{slug:(0,y.tZ)("strong",{children:"acme"}),example:(0,y.tZ)(D,{slug:"acme",hostname:n})})})]})}function D(e){let{hostname:t,slug:o}=e;return(0,y.BX)("code",{children:[t,"/",(0,y.tZ)("strong",{children:o})]})}B.displayName="SsoForm",D.displayName="SlugExample";const E={login:q,register:T,sso:B};class O extends s.Component{constructor(){super(...arguments),(0,i.Z)(this,"state",{loading:!0,error:null,activeTab:"login",authConfig:null}),(0,i.Z)(this,"handleSetTab",((e,t)=>{this.setState({activeTab:e}),t.preventDefault()})),(0,i.Z)(this,"fetchData",(async()=>{const{api:e}=this.props;try{const t=await e.requestPromise("/auth/config/"),{vsts_login_link:o,github_login_link:i,google_login_link:n,...s}=t,r={...s,vstsLoginLink:o,githubLoginLink:i,googleLoginLink:n};this.setState({authConfig:r})}catch(e){this.setState({error:!0})}this.setState({loading:!1})}))}componentDidMount(){this.fetchData()}get hasAuthProviders(){if(null===this.state.authConfig)return!1;const{githubLoginLink:e,googleLoginLink:t,vstsLoginLink:o}=this.state.authConfig;return!!(e||o||t)}render(){const{api:e}=this.props,{loading:t,error:o,activeTab:i,authConfig:n}=this.state,l=E[i],p=[["login",(0,c.t)("Login")],["sso",(0,c.t)("Single Sign-On")],["register",(0,c.t)("Register"),!n?.canRegister]],{orgId:u}=this.props.params;return(0,y.BX)(s.Fragment,{children:[(0,y.BX)(A,{children:[(0,y.tZ)(X,{children:(0,c.t)("Sign in to continue")}),(0,y.tZ)(F,{children:p.map((e=>{let[t,o,n]=e;return!n&&(0,y.tZ)("li",{className:i===t?"active":"",children:(0,y.tZ)("a",{href:"#",onClick:e=>this.handleSetTab(t,e),children:o})},t)}))})]}),t&&(0,y.tZ)(d.Z,{}),o&&(0,y.tZ)(I,{message:(0,c.t)("Unable to load authentication configuration"),onRetry:this.fetchData}),!t&&null!==n&&!o&&(0,y.BX)(H,{hasAuthProviders:this.hasAuthProviders,children:[void 0!==u&&(0,y.tZ)(r.bZ,{type:"warning",trailingItems:(0,y.tZ)(a.zx,{to:"/",size:"xs",children:"Reload"}),children:(0,c._N)("Experimental SPA mode does not currently support SSO style login. To develop against the [org] you'll need to copy your production session cookie.",{org:this.props.params.orgId})}),(0,y.tZ)(l,{api:e,authConfig:n})]})]})}}O.displayName="Login";const I=(0,n.Z)(l.Z,{target:"e17jqeq34"})("margin:",(0,u.D)(2),";"),A=(0,n.Z)("div",{target:"e17jqeq33"})("border-bottom:1px solid ",(e=>e.theme.border),";padding:20px 40px 0;"),X=(0,n.Z)("h3",{target:"e17jqeq32"})({name:"cqisp1",styles:"font-size:24px;margin:0 0 20px 0"}),F=(0,n.Z)(p.Z,{target:"e17jqeq31"})({name:"ti75j2",styles:"margin:0"}),H=(0,n.Z)("div",{target:"e17jqeq30"})("padding:35px;width:",(e=>e.hasAuthProviders?"600px":"490px"),";"),M=(0,h.Z)(O)}}]);
//# sourceMappingURL=../sourcemaps/app_views_auth_login_tsx.5349413b795f829b4626cc761a5c3f7f.js.map