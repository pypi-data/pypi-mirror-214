"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_projectGeneralSettings_index_tsx"],{"./app/data/forms/projectGeneralSettings.tsx":(e,t,s)=>{s.r(t),s.d(t,{fields:()=>Z,route:()=>h});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react-select/dist/Select-dbb12e54.esm.js")),o=s("../node_modules/platformicons/build/index.js"),i=s("./app/data/platforms.tsx"),a=s("./app/locale.tsx"),l=s("./app/styles/space.tsx"),p=s("./app/utils.tsx"),c=s("./app/utils/getDynamicText.tsx"),d=s("./app/utils/slugify.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const h="/settings/:orgId/projects/:projectId/",u=(()=>{let e=0;const t=[];for(;e<=720;)t.push(e),e+=e<12?1:e<24?3:e<36?6:e<48?12:24;return t})(),g=(0,a.t)("This option is enforced by your organization's settings and cannot be customized per-project."),f=(0,r.Z)("div",{target:"e1whm1tl1"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),j=(0,r.Z)(o.v,{target:"e1whm1tl0"})("margin-right:",(0,l.D)(1),";"),Z={name:{name:"name",type:"string",required:!0,label:(0,a.t)("Name"),placeholder:(0,a.t)("my-awesome-project"),help:(0,a.t)("A name for this project"),transformInput:d.Z,getData:e=>({name:e.name,slug:e.name}),saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:(0,a.t)("You will be redirected to the new project slug after saving")},platform:{name:"platform",type:"select",label:(0,a.t)("Platform"),options:i.Z.map((e=>{let{id:t,name:s}=e;return{value:t,label:(0,m.BX)(f,{children:[(0,m.tZ)(j,{platform:t}),s]},t)}})),help:(0,a.t)("The primary platform for this project"),filterOption:(0,n.c)({stringify:e=>{const t=i.Z.find((t=>{let{id:s}=t;return s===e.value}));return`${t?.name} ${e.value}`}})},subjectPrefix:{name:"subjectPrefix",type:"string",label:(0,a.t)("Subject Prefix"),placeholder:(0,a.t)("e.g. [my-org]"),help:(0,a.t)("Choose a custom prefix for emails from this project")},resolveAge:{name:"resolveAge",type:"range",allowedValues:u,label:(0,a.t)("Auto Resolve"),help:(0,a.t)("Automatically resolve an issue if it hasn't been seen for this amount of time"),formatLabel:e=>0===(e=Number(e))?(0,a.t)("Disabled"):e>23&&e%24==0?(e/=24,(0,a.tn)("%s day","%s days",e)):(0,a.tn)("%s hour","%s hours",e),saveOnBlur:!1,saveMessage:(0,a._N)("[strong:Caution]: Enabling auto resolve will immediately resolve anything that has not been seen within this period of time. There is no undo!",{strong:(0,m.tZ)("strong",{})}),saveMessageAlertType:"warning"},allowedDomains:{name:"allowedDomains",type:"string",multiline:!0,autosize:!0,maxRows:10,rows:1,placeholder:(0,a.t)("https://example.com or example.com"),label:(0,a.t)("Allowed Domains"),help:(0,a.t)("Examples: https://example.com, *, *.example.com, *:80. Separate multiple entries with a newline"),getValue:e=>(0,p.Fl)(e),setValue:e=>(0,p.PU)(e)},scrapeJavaScript:{name:"scrapeJavaScript",type:"boolean",disabled:e=>{let{organization:t,name:s}=e;return!t[s]},disabledReason:g,setValue:(e,t)=>t.organization&&t.organization[t.name]&&e,label:(0,a.t)("Enable JavaScript source fetching"),help:(0,a.t)("Allow Sentry to scrape missing JavaScript source context when possible")},securityToken:{name:"securityToken",type:"string",label:(0,a.t)("Security Token"),help:(0,a.t)('Outbound requests matching Allowed Domains will have the header "{token_header}: {token}" appended'),setValue:e=>(0,c.Z)({value:e,fixed:"__SECURITY_TOKEN__"})},securityTokenHeader:{name:"securityTokenHeader",type:"string",placeholder:(0,a.t)("X-Sentry-Token"),label:(0,a.t)("Security Token Header"),help:(0,a.t)('Outbound requests matching Allowed Domains will have the header "{token_header}: {token}" appended')},verifySSL:{name:"verifySSL",type:"boolean",label:(0,a.t)("Verify TLS/SSL"),help:(0,a.t)("Outbound requests will verify TLS (sometimes known as SSL) connections")}}},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const r=function(e,t){let s=arguments.length>3?arguments[3]:void 0;const r=`${e} - ${t}`,n=s?`${r} - ${s}`:r;return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?n:`${n} - Sentry`}},"./app/utils/slugify.tsx":(e,t,s)=>{function r(e){return e.normalize("NFKD").toLowerCase().replace(" ","-").replace(/[^a-z0-9-_]/g,"")}s.d(t,{Z:()=>r})},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./app/components/asyncComponent.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends r.Z{getTitle(){return""}render(){return(0,o.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="AsyncView"},"./app/views/settings/project/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>p});var r=s("./app/components/acl/access.tsx"),n=s("./app/components/alert.tsx"),o=s("./app/locale.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,o.t)("These settings can only be edited by users with the organization-level owner, manager, or team-level admin roles.");function l(e){let{access:t=["project:write"],project:s,team:o,...l}=e;return(0,i.tZ)(r.Z,{access:t,project:s,team:o,children:e=>{let{hasAccess:t}=e;return!t&&(0,i.tZ)(n.bZ,{"data-test-id":"project-permission-alert",type:"warning",...l,children:a})}})}l.displayName="PermissionAlert";const p=l},"./app/views/settings/projectGeneralSettings/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>B});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/react/index.js"),o=s("../node_modules/react-router/es/index.js"),i=s("./app/actionCreators/indicator.tsx"),a=s("./app/actionCreators/projects.tsx"),l=s("./app/components/acl/access.tsx"),p=s("./app/components/button.tsx"),c=s("./app/components/confirm.tsx"),d=s("./app/components/forms/fieldGroup/index.tsx"),m=s("./app/components/forms/fields/textField.tsx"),h=s("./app/components/forms/form.tsx"),u=s("./app/components/forms/jsonForm.tsx"),g=s("./app/components/hook.tsx"),f=s("./app/components/links/externalLink.tsx"),j=s("./app/components/organizations/pageFilters/persistence.tsx"),Z=s("./app/components/panels/index.tsx"),x=s("./app/data/forms/projectGeneralSettings.tsx"),b=s("./app/locale.tsx"),y=s("./app/stores/projectsStore.tsx"),v=s("./app/utils/handleXhrErrorResponse.tsx"),w=s("./app/utils/recreateRoute.tsx"),S=s("./app/utils/routeTitle.tsx"),T=s("./app/utils/withOrganization.tsx"),_=s("./app/views/asyncView.tsx"),P=s("./app/views/settings/components/settingsPageHeader.tsx"),k=s("./app/views/settings/components/text/textBlock.tsx"),z=s("./app/views/settings/project/permissionAlert.tsx"),A=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class C extends _.Z{constructor(){super(...arguments),(0,r.Z)(this,"_form",{}),(0,r.Z)(this,"handleTransferFieldChange",((e,t)=>{this._form[e]=t})),(0,r.Z)(this,"handleRemoveProject",(()=>{const{organization:e}=this.props,t=this.state.data;(0,j.tB)(e.slug),t&&(0,a.rR)({api:this.api,orgSlug:e.slug,projectSlug:t.slug,origin:"settings"}).then((()=>{(0,i.S9)((0,b._N)("[project] was successfully removed",{project:t.slug}))}),(e=>{throw(0,i.Iw)((0,b._N)("Error removing [project]",{project:t.slug})),e})).then((()=>{window.location.assign("/")}),(e=>(0,v.X)("Unable to remove project",e)))})),(0,r.Z)(this,"handleTransferProject",(async()=>{const{organization:e}=this.props,t=this.state.data;if(t&&!("string"!=typeof this._form.email||this._form.email.length<1))try{await(0,a.bL)(this.api,e.slug,t,this._form.email),window.location.assign("/")}catch(e){e.status>=500&&(0,v.X)("Unable to transfer project",e)}})),(0,r.Z)(this,"isProjectAdmin",(()=>(0,l.d)(["project:admin"],{organization:this.props.organization,project:this.state.data})))}getTitle(){const{projectId:e}=this.props.params;return(0,S.Z)((0,b.t)("Project Settings"),e,!1)}getEndpoints(){const{organization:e}=this.props,{projectId:t}=this.props.params;return[["data",`/projects/${e.slug}/${t}/`]]}renderRemoveProject(){const e=this.state.data,t=this.isProjectAdmin(),{isInternal:s}=e;return(0,A.BX)(d.Z,{label:(0,b.t)("Remove Project"),help:(0,b._N)("Remove the [project] project and all related data. [linebreak] Careful, this action cannot be undone.",{project:(0,A.tZ)("strong",{children:e.slug}),linebreak:(0,A.tZ)("br",{})}),children:[!t&&(0,b.t)("You do not have the required permission to remove this project."),s&&(0,b.t)("This project cannot be removed. It is used internally by the Sentry server."),t&&!s&&(0,A.tZ)(c.Z,{onConfirm:this.handleRemoveProject,priority:"danger",confirmText:(0,b.t)("Remove Project"),message:(0,A.BX)("div",{children:[(0,A.tZ)(k.Z,{children:(0,A.tZ)("strong",{children:(0,b.t)("Removing this project is permanent and cannot be undone!")})}),(0,A.tZ)(k.Z,{children:(0,b.t)("This will also remove all associated event data.")})]}),children:(0,A.tZ)("div",{children:(0,A.tZ)(p.zx,{priority:"danger",children:(0,b.t)("Remove Project")})})})]})}renderTransferProject(){const e=this.state.data,t=this.isProjectAdmin(),{isInternal:s}=e;return(0,A.BX)(d.Z,{label:(0,b.t)("Transfer Project"),help:(0,b._N)("Transfer the [project] project and all related data. [linebreak] Careful, this action cannot be undone.",{project:(0,A.tZ)("strong",{children:e.slug}),linebreak:(0,A.tZ)("br",{})}),children:[!t&&(0,b.t)("You do not have the required permission to transfer this project."),s&&(0,b.t)("This project cannot be transferred. It is used internally by the Sentry server."),t&&!s&&(0,A.tZ)(c.Z,{onConfirm:this.handleTransferProject,priority:"danger",confirmText:(0,b.t)("Transfer project"),renderMessage:e=>{let{confirm:t}=e;return(0,A.BX)("div",{children:[(0,A.tZ)(k.Z,{children:(0,A.tZ)("strong",{children:(0,b.t)("Transferring this project is permanent and cannot be undone!")})}),(0,A.tZ)(k.Z,{children:(0,b.t)("Please enter the email of an organization owner to whom you would like to transfer this project.")}),(0,A.tZ)(Z.s_,{children:(0,A.tZ)(h.Z,{hideFooter:!0,onFieldChange:this.handleTransferFieldChange,onSubmit:(e,s,r,n)=>{n.stopPropagation(),t()},children:(0,A.tZ)(m.Z,{name:"email",label:(0,b.t)("Organization Owner"),placeholder:"admin@example.com",required:!0,help:(0,b.t)("A request will be emailed to this address, asking the organization owner to accept the project transfer.")})})})]})},children:(0,A.tZ)("div",{children:(0,A.tZ)(p.zx,{priority:"danger",children:(0,b.t)("Transfer Project")})})})]})}renderBody(){const{organization:e}=this.props,t=this.state.data,{projectId:s}=this.props.params,r=`/projects/${e.slug}/${s}/`,n=new Set(e.access.concat(t.access)),o={additionalFieldProps:{organization:e},features:new Set(e.features),access:n,disabled:!(0,l.d)(["project:write"],{organization:e,project:t})},i=t.teams.length?t.teams?.[0]:void 0,p={saveOnBlur:!0,allowUndo:!0,initialData:{...t,team:i},apiMethod:"PUT",apiEndpoint:r,onSubmitSuccess:e=>{this.setState({data:e}),s!==e.slug&&((0,a.TA)(s,e.slug),this.props.onChangeSlug(e.slug)),y.Z.onUpdateSuccess(e)}};return(0,A.BX)("div",{children:[(0,A.tZ)(P.Z,{title:(0,b.t)("Project Settings")}),(0,A.tZ)(z.Z,{project:t}),(0,A.BX)(h.Z,{...p,children:[(0,A.tZ)(u.Z,{...o,title:(0,b.t)("Project Details"),fields:[x.fields.name,x.fields.platform]}),(0,A.tZ)(u.Z,{...o,title:(0,b.t)("Email"),fields:[x.fields.subjectPrefix]})]}),(0,A.tZ)(g.Z,{name:"spend-visibility:spike-protection-project-settings",project:t}),(0,A.BX)(h.Z,{...p,children:[(0,A.tZ)(u.Z,{...o,title:(0,b.t)("Event Settings"),fields:[x.fields.resolveAge]}),(0,A.tZ)(u.Z,{...o,title:(0,b.t)("Client Security"),fields:[x.fields.allowedDomains,x.fields.scrapeJavaScript,x.fields.securityToken,x.fields.securityTokenHeader,x.fields.verifySSL],renderHeader:()=>(0,A.tZ)(Z.aU,{type:"info",children:(0,A.BX)(k.Z,{noMargin:!0,children:[(0,b._N)("Configure origin URLs which Sentry should accept events from. This is used for communication with clients like [link].",{link:(0,A.tZ)(f.Z,{href:"https://github.com/getsentry/sentry-javascript",children:"sentry-javascript"})})," ",(0,b._N)("This will restrict requests based on the [Origin] and [Referer] headers.",{Origin:(0,A.tZ)("code",{children:"Origin"}),Referer:(0,A.tZ)("code",{children:"Referer"})})]})})})]}),(0,A.BX)(Z.s_,{children:[(0,A.tZ)(Z.V9,{children:(0,b.t)("Project Administration")}),this.renderRemoveProject(),this.renderTransferProject()]})]})}}class R extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"changedSlug",void 0),(0,r.Z)(this,"unsubscribe",y.Z.listen((()=>this.onProjectsUpdate()),void 0))}componentWillUnmount(){this.unsubscribe()}onProjectsUpdate(){this.changedSlug&&y.Z.getBySlug(this.changedSlug)&&o.browserHistory.replace((0,w.Z)("",{...this.props,params:{...this.props.params,projectId:this.changedSlug}}))}render(){return(0,A.tZ)(C,{onChangeSlug:e=>this.changedSlug=e,...this.props})}}R.displayName="ProjectGeneralSettingsContainer";const B=(0,T.Z)(R)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectGeneralSettings_index_tsx.6ac28044a72ab45b4863e1a8d9b15d4a.js.map