"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_projectInstall_platformOrIntegration_tsx"],{"./app/views/projectInstall/platformOrIntegration.tsx":(t,e,o)=>{o.r(e),o.d(e,{default:()=>Lt});var n=o("../node_modules/query-string/index.js"),i=o("./app/components/onboarding/onboardingContext.tsx"),r=o("./app/utils/integrationUtil.tsx"),a=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=o("./app/components/layouts/thirds.tsx"),l=o("./app/styles/space.tsx");const d=(0,a.Z)(s.T3,{target:"e1bbzr60"})("background:",(t=>t.theme.background),";padding-top:",(0,l.D)(3),";");d.defaultProps={withPadding:!0};const c=d;o("../node_modules/core-js/modules/es.array.push.js");var p=o("../node_modules/react/index.js"),u=o("../node_modules/lodash/omit.js"),m=o.n(u),g=o("./app/actionCreators/projects.tsx"),h=o("./app/components/acl/feature.tsx"),f=o("./app/components/alert.tsx"),Z=o("./app/components/button.tsx"),y=o("./app/components/buttonBar.tsx"),x=o("./app/components/confirm.tsx"),j=o("./app/components/errors/notFound.tsx"),b=o("./app/components/hookOrDefault.tsx"),w=o("./app/components/links/externalLink.tsx"),k=o("./app/components/loadingError.tsx"),v=o("./app/components/loadingIndicator.tsx"),_=o("./app/components/onboarding/documentationWrapper.tsx"),z=o("../node_modules/framer-motion/dist/es/render/dom/motion.mjs"),S=o("./app/components/onboarding/missingExampleWarning.tsx"),I=o("./app/components/onboarding/productSelection.tsx"),P=o("./app/data/platforms.tsx"),D=o("./app/locale.tsx"),C=o("./app/utils/analytics.tsx"),$=o("./app/utils/getDynamicText.tsx"),E=o("./app/utils/queryClient.tsx"),B=o("./app/utils/useOrganization.tsx"),N=o("./app/views/onboarding/components/setupIntroduction.tsx"),T=o("./app/views/onboarding/setupDocsLoader.tsx"),X=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const F=(0,b.Z)({hookName:"component:product-selection-availability"});function O(t){let{location:e,newOrg:o,currentPlatform:n,project:i}=t;const r=(0,B.Z)(),[a,s]=(0,p.useState)("javascript"===n),l=(0,p.useMemo)((()=>{const t=e.query.product??[];return t.includes(I.c.PERFORMANCE_MONITORING)&&t.includes(I.c.SESSION_REPLAY)?`${n}-with-error-monitoring-performance-and-replay`:t.includes(I.c.PERFORMANCE_MONITORING)?`${n}-with-error-monitoring-and-performance`:t.includes(I.c.SESSION_REPLAY)?`${n}-with-error-monitoring-and-replay`:`${n}-with-error-monitoring`}),[e.query.product,n]),{data:d,isLoading:c,isError:u,refetch:m}=(0,E.WE)([`/projects/${r.slug}/${i?.slug}/docs/${l}/`],{staleTime:1/0,enabled:!!i?.slug&&!!r.slug&&!!l}),g=P.Z.find((t=>t.id===n))?.name??"",h=(0,p.useCallback)((()=>{s(!1),i?.id&&(0,C.Gi)("onboarding.js_loader_npm_docs_shown",{organization:r,platform:n,project_id:i?.id})}),[r,n,i?.id]);return a?(0,X.tZ)(T.N,{organization:r,project:i,location:e,platform:n,close:h}):(0,X.BX)(p.Fragment,{children:[o&&(0,X.tZ)(N.Z,{stepHeaderText:(0,D.t)("Configure %s SDK",g),platform:n}),(0,X.tZ)(F,{organization:r}),c?(0,X.tZ)(v.Z,{}):u?(0,X.tZ)(k.Z,{message:(0,D.t)("Failed to load documentation for the %s platform.",g),onRetry:m}):(0,$.Z)({value:(0,X.BX)(L,{children:[(0,X.tZ)(_.l,{dangerouslySetInnerHTML:{__html:d?.html??""}}),(0,X.tZ)(S.V,{platform:n,platformDocs:{html:d?.html??"",link:d?.link??""}})]}),fixed:(0,X.tZ)(f.bZ,{type:"warning",children:"Platform documentation is not rendered in for tests in CI"})})]})}O.displayName="DocWithProductSelection";const L=(0,a.Z)(z.E.div,{target:"e84os6b0"})("");L.defaultProps={initial:{opacity:0,y:40},animate:{opacity:1,y:0},exit:{opacity:0}};var R=o("./app/components/onboarding/footer.tsx"),M=o("./app/components/onboarding/useRecentCreatedProject.tsx"),A=o("./app/components/sentryDocumentTitle.tsx"),G=o("./app/data/platformCategories.tsx"),q=o("./app/icons/index.tsx"),W=o("./app/stores/configStore.tsx"),H=o("./app/utils/handleXhrErrorResponse.tsx"),K=o("./app/utils/useApi.tsx"),Y=o("./app/utils/useProjects.tsx"),V=o("./app/utils/withDomainRequired.tsx"),U=o("./app/views/projects/gettingStartedWithProjectContext.tsx");const J=(0,b.Z)({hookName:"component:set-up-sdk-doc"});function Q(t){let{organization:e,projectSlug:o,platform:n}=t;const i=(0,K.Z)(),[r,a]=(0,p.useState)(!0),[s,l]=(0,p.useState)(!1),[d,c]=(0,p.useState)(""),u=(0,p.useCallback)((async()=>{a(!0);try{const{html:t}=await(0,g.iC)({api:i,orgSlug:e.slug,projectSlug:o,platform:n.key});c(t),window.scrollTo(0,0)}catch(t){l(t)}a(!1)}),[i,e.slug,o,n.key]);return(0,p.useEffect)((()=>{u()}),[u]),(0,X.BX)("div",{children:[(0,X.tZ)(f.bZ,{type:"info",showIcon:!0,children:(0,D._N)("\n           This is a quick getting started guide. For in-depth instructions\n           on integrating Sentry with [platform], view\n           [docLink:our complete documentation].",{platform:n.name,docLink:(0,X.tZ)(w.Z,{href:n.link??void 0})})}),r?(0,X.tZ)(v.Z,{}):s?(0,X.tZ)(k.Z,{onRetry:u}):(0,X.BX)(p.Fragment,{children:[(0,X.tZ)(A.Z,{title:`${(0,D.t)("Configure")} ${n.name}`,projectSlug:o}),(0,X.tZ)(_.l,{dangerouslySetInnerHTML:{__html:d}})]})]})}function tt(t){let{location:e,params:o,route:n,router:i}=t;const r=(0,B.Z)(),a=(0,K.Z)(),s=(0,p.useContext)(U.p),l=W.Z.get("isSelfHosted"),{projects:d,initiallyLoaded:c}=(0,Y.Z)({slugs:[o.projectId],orgId:r.slug}),u=!c,f=u?void 0:d.find((t=>t.slug===o.projectId)),{data:b,isLoading:w,isError:k}=(0,E.WE)([`/projects/${r.slug}/${f?.slug}/rules/`],{enabled:!!f?.slug,staleTime:0});(0,p.useEffect)((()=>{if(!f||w||k)return;if(s.project?.id===f.id)return;const t=Object.keys(P.Z).find((t=>P.Z[t].id===f.platform));t&&s.setProject({id:f.id,name:f.name,teamSlug:f.team?.slug,alertRules:b,platform:{...m()(P.Z[t],"id"),key:P.Z[t].id}})}),[s,f,b,w,k]);const v=!!r?.features.includes("onboarding-heartbeat-footer"),_=!!r?.features.includes("onboarding-project-deletion-on-back-click"),z=!!r?.features.includes("getting-started-doc-with-product-selection"),S=(0,M.X)({orgSlug:r.slug,projectSlug:f?.slug}),I=_&&S&&!1===S.firstError&&!1===S.firstTransaction&&!1===S.hasReplays&&!1===S.hasSessions&&!1===S.olderThanOneHour,$=f?.platform??"other",N=P.Z.find((t=>t.id===$)),T={key:$,id:N?.id,name:N?.name,link:N?.link},F=(0,p.useCallback)((()=>{f?.slug&&i.push((0,V.D)(`/organizations/${r.slug}/projects/${f.slug}/getting-started/`))}),[r.slug,f?.slug,i]),L=(0,p.useCallback)((async()=>{if(S){if((0,C.Gi)("project_creation.back_button_clicked",{organization:r}),I){(0,C.Gi)("project_creation.data_removal_modal_confirm_button_clicked",{organization:r,platform:S.slug,project_id:S.id});try{await(0,g.rR)({api:a,orgSlug:r.slug,projectSlug:S.slug,origin:"getting_started"}),(0,C.Gi)("project_creation.data_removed",{organization:r,date_created:S.dateCreated,platform:S.slug,project_id:S.id})}catch(t){(0,H.X)("Unable to delete project in project creation",t)}}i.replace((0,V.D)(`/organizations/${r.slug}/projects/new/?referrer=getting-started&project=${S.id}`))}}),[a,S,r,I,i]);if((0,p.useEffect)((()=>{T.key&&"other"!==T.key||F()}),[T.key,F]),!f)return null;if(!T.id)return(0,X.tZ)(j.Z,{});const A=`/organizations/${r.slug}/issues/`,tt=`/organizations/${r.slug}/performance/`,it=G.Sv.includes(T.id),rt=window.location.href.indexOf("getting-started")>0,at=z&&("javascript"===T.key||T.key.match("^javascript-([A-Za-z]+)$"));return(0,X.BX)(p.Fragment,{children:[(0,X.BX)(ot,{children:[(0,X.tZ)("h2",{children:(0,D.t)("Configure %(platform)s SDK",{platform:T.name})}),(0,X.BX)(y.ZP,{gap:1,children:[(0,X.tZ)(x.Z,{bypass:!I,message:(0,D.t)("Hey, just a heads up - we haven't received any data for this SDK yet and by going back all changes will be discarded. Are you sure you want to head back?"),priority:"danger",confirmText:(0,D.t)("Yes I'm sure"),onConfirm:L,onClose:()=>{S&&(0,C.Gi)("project_creation.data_removal_modal_dismissed",{organization:r,platform:S.slug,project_id:S.id})},onRender:()=>{S&&(0,C.Gi)("project_creation.data_removal_modal_rendered",{organization:r,platform:S.slug,project_id:S.id})},children:(0,X.tZ)(Z.zx,{icon:(0,X.tZ)(q.g6,{direction:"left",size:"sm"}),size:"sm",children:(0,D.t)("Back to Platform Selection")})}),(0,X.tZ)(Z.zx,{size:"sm",href:T.link??void 0,external:!0,children:(0,D.t)("Full Documentation")})]})]}),(0,X.BX)("div",{children:[l?(0,X.tZ)(Q,{organization:r,projectSlug:f.slug,platform:T}):at?(0,X.tZ)(O,{project:f,location:e,currentPlatform:T.key}):(0,X.tZ)(J,{organization:r,project:f,location:e,platform:T}),rt&&it&&(0,X.tZ)(h.Z,{features:["performance-view"],hookName:"feature-disabled:performance-new-project",children:t=>{let{hasFeature:e}=t;return e?null:(0,X.tZ)(nt,{type:"info",showIcon:!0,children:(0,D.t)("Your selected platform supports performance, but your organization does not have performance enabled.")})}}),rt&&v?(0,X.tZ)(R.$,{projectSlug:o.projectId,projectId:f?.id,route:n,router:i,location:e}):(0,X.BX)(et,{gap:1,children:[(0,X.tZ)(Z.zx,{priority:"primary",busy:u,to:{pathname:A,query:f?.id,hash:"#welcome"},children:(0,D.t)("Take me to Issues")}),(0,X.tZ)(Z.zx,{busy:u,to:{pathname:tt,query:f?.id},children:(0,D.t)("Take me to Performance")})]})]})]})}Q.displayName="SetUpGeneralSdkDoc",tt.displayName="ProjectInstallPlatform";const et=(0,a.Z)(y.ZP,{target:"e1f5kh8r2"})("margin-top:",(0,l.D)(3),";width:max-content;@media (max-width: ",(t=>t.theme.breakpoints.small),"){width:auto;grid-row-gap:",(0,l.D)(1),";grid-auto-flow:row;}"),ot=(0,a.Z)("div",{target:"e1f5kh8r1"})("display:flex;justify-content:space-between;margin-bottom:",(0,l.D)(3),";h2{margin:0;}@media (max-width: ",(t=>t.theme.breakpoints.small),"){flex-direction:column;align-items:flex-start;h2{margin-bottom:",(0,l.D)(2),";}}"),nt=(0,a.Z)(f.bZ,{target:"e1f5kh8r0"})("margin-top:",(0,l.D)(2),";");var it=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),rt=o("../node_modules/react-router/es/index.js"),at=o("./app/components/asyncComponent.tsx"),st=o("./app/utils/withOrganization.tsx"),lt=o("./app/views/onboarding/components/integrations/addInstallationInstructions.tsx"),dt=o("./app/views/onboarding/components/integrations/postInstallCodeSnippet.tsx"),ct=o("./app/views/settings/organizationIntegrations/addIntegrationButton.tsx"),pt=o("../node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs"),ut=o("./app/styles/pulsingIndicator.tsx"),mt=o("./app/utils/eventWaiter.tsx"),gt=o("./app/utils/testableTransition.tsx");function ht(t){let{children:e,...o}=t;return(0,X.tZ)(mt.Z,{...o,children:t=>{let{firstIssue:n}=t;return e({indicator:(0,X.tZ)(ft,{firstIssue:n,...o}),firstEventButton:(0,X.tZ)(Z.zx,{title:(0,D.t)("You'll need to send your first error to continue"),tooltipProps:{disabled:!!n},disabled:!n,priority:"primary",onClick:()=>(0,C.Gi)("growth.onboarding_take_to_error",{organization:o.organization}),to:`/organizations/${o.organization.slug}/issues/${n&&!0!==n&&"id"in n?`${n.id}/`:""}?referrer=onboarding-first-event-indicator`,children:(0,D.t)("Take me to my error")})})}})}function ft(t){let{firstIssue:e}=t;return(0,X.tZ)(Zt,{children:(0,X.tZ)(pt.M,{children:e?(0,X.tZ)(jt,{},"received"):(0,X.tZ)(xt,{},"waiting")})})}ht.displayName="FirstEventIndicator",ft.displayName="Indicator";const Zt=(0,a.Z)("div",{target:"e10tfv734"})({name:"qu0prw",styles:"display:grid;grid-template-columns:1fr;justify-content:right"}),yt=(0,a.Z)(z.E.div,{target:"e10tfv733"})("display:grid;grid-template-columns:1fr max-content;gap:",(0,l.D)(1),";align-items:center;font-size:",(t=>t.theme.fontSizeMedium),";grid-column:1;grid-row:1;");function xt(t){return(0,X.BX)(yt,{...t,children:[(0,X.tZ)(wt,{children:(0,D.t)("Waiting to receive first event to continue")}),(0,X.tZ)(kt,{})]})}function jt(t){return(0,X.BX)(yt,{...t,children:[(0,X.tZ)(wt,{children:(0,D.t)("Event was received!")}),(0,X.tZ)(vt,{})]})}yt.defaultProps={initial:"initial",animate:"animate",exit:"exit",variants:{initial:{opacity:0,y:-10},animate:{opacity:1,y:0,transition:(0,gt.Z)({when:"beforeChildren",staggerChildren:.35})},exit:{opacity:0,y:10}}},xt.displayName="Waiting",jt.displayName="Success";const bt={initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10}},wt=(0,a.Z)(z.E.div,{target:"e10tfv732"})("");wt.defaultProps={variants:bt,transition:(0,gt.Z)()};const kt=(0,a.Z)(z.E.div,{target:"e10tfv731"})("margin:0 6px;",ut.Z,";");kt.defaultProps={variants:bt,transition:(0,gt.Z)()};const vt=(0,a.Z)(q.DL,{target:"e10tfv730"})("color:#fff;background:",(t=>t.theme.green300),";border-radius:50%;padding:3px;margin:0 ",(0,l.D)(.25),";");vt.defaultProps={size:"sm"};const _t=ht;var zt=o("./app/views/onboarding/createSampleEventButton.tsx");function St(t){let{organization:e,project:o,docsLink:n,docsOnClick:i}=t;return(0,X.BX)(p.Fragment,{children:[(0,X.tZ)(_t,{organization:e,project:o,eventType:"error",children:t=>{let{indicator:e,firstEventButton:o}=t;return(0,X.BX)(It,{children:[(0,X.BX)(Dt,{gap:2,children:[o,(0,X.tZ)(Z.zx,{external:!0,href:n,onClick:i,children:(0,D.t)("View full documentation")})]}),e]})}}),(0,X.tZ)(Pt,{children:(0,D._N)("Just want to poke around before getting too cozy with the SDK? [sample:View a sample event for this SDK] or [skip:finish setup later].",{sample:(0,X.tZ)(zt.Z,{"aria-label":"View a sample event",project:o,source:"onboarding",priority:"link"}),skip:(0,X.tZ)(Z.zx,{priority:"link",href:"/","aria-label":(0,D.t)("Finish setup later")})})})]})}St.displayName="FirstEventFooter";const It=(0,a.Z)("div",{target:"eehhgoe2"})("display:flex;justify-content:space-between;margin:",(0,l.D)(2)," 0;margin-top:",(0,l.D)(4),";"),Pt=(0,a.Z)("p",{target:"eehhgoe1"})("color:",(t=>t.theme.subText),";font-size:",(t=>t.theme.fontSizeMedium),";margin:0;max-width:500px;"),Dt=(0,a.Z)(y.ZP,{target:"eehhgoe0"})({name:"14dyr8n",styles:"display:inline-grid;justify-self:start"});function Ct(t){let{gettingStartedLink:e,docsLink:o}=t;return(0,X.BX)(y.ZP,{gap:1,children:[(0,X.tZ)(Z.zx,{size:"sm",icon:(0,X.tZ)(q.g6,{size:"xs",direction:"left"}),to:e,children:(0,D.t)("Back")}),(0,X.tZ)(Z.zx,{size:"sm",href:o,external:!0,children:(0,D.t)("Full Documentation")})]})}Ct.displayName="PlatformHeaderButtonBar";class $t extends at.Z{constructor(){super(...arguments),(0,it.Z)(this,"handleFullDocsClick",(()=>{const{organization:t}=this.props;(0,C.Gi)("growth.onboarding_view_full_docs",{organization:t})})),(0,it.Z)(this,"handleAddIntegration",(()=>{this.setState({installed:!0})})),(0,it.Z)(this,"trackSwitchToManual",(()=>{const{organization:t,integrationSlug:e}=this.props;(0,r.Db)("integrations.switch_manual_sdk_setup",{integration_type:"first_party",integration:e,view:"project_creation",organization:t})}))}getDefaultState(){return{...super.getDefaultState(),installed:!1,integrations:{providers:[]},project:null}}componentDidMount(){super.componentDidMount(),window.scrollTo(0,0);const{platform:t}=this.props.params;t&&"other"!==t||this.redirectToNeutralDocs()}get provider(){const{providers:t}=this.state.integrations;return t.length?t[0]:null}getEndpoints(){const{organization:t,integrationSlug:e,params:o}=this.props;return e?[["integrations",`/organizations/${t.slug}/config/integrations/?provider_key=${e}`],["project",`/projects/${t.slug}/${o.projectId}/`]]:[]}redirectToNeutralDocs(){const{organization:t}=this.props,{projectId:e}=this.props.params,o=`/organizations/${t.slug}/projects/${e}/getting-started/`;rt.browserHistory.push((0,V.D)(o))}render(){const{organization:t,params:e}=this.props,{installed:o,project:n}=this.state,{projectId:i,platform:r}=e,a=this.provider,s=P.Z.find((t=>t.id===r));if(!a||!s||!n)return null;const l=`/organizations/${t.slug}/projects/${i}/getting-started/`,d="https://docs.sentry.io/product/integrations/cloud-monitoring/aws-lambda/";return(0,X.tZ)(Nt,{children:(0,X.BX)(Bt,{children:[(0,X.tZ)(Xt,{children:(0,D.t)("Automatically instrument %s",s.name)}),(0,X.tZ)(Tt,{children:(0,X.tZ)(Ct,{gettingStartedLink:l,docsLink:d})}),o?(0,X.BX)(p.Fragment,{children:[(0,X.tZ)(dt.Z,{provider:a}),(0,X.tZ)(St,{project:n,organization:t,docsLink:d,docsOnClick:this.handleFullDocsClick})]}):(0,X.BX)(p.Fragment,{children:[(0,X.tZ)(lt.Z,{}),(0,X.BX)(Et,{gap:1,children:[(0,X.tZ)(ct.w,{provider:a,onAddIntegration:this.handleAddIntegration,organization:t,priority:"primary",size:"sm",analyticsParams:{view:"project_creation",already_installed:!1},modalParams:{projectId:n.id},"aria-label":(0,D.t)("Add integration")}),(0,X.tZ)(Z.zx,{size:"sm",to:{pathname:window.location.pathname,query:{manual:"1"}},onClick:this.trackSwitchToManual,children:(0,D.t)("Manual Setup")})]})]})]})})}}$t.displayName="PlatformIntegrationSetup";const Et=(0,a.Z)(y.ZP,{target:"e1o04xl64"})("margin-top:",(0,l.D)(3),";width:max-content;@media (max-width: ",(t=>t.theme.breakpoints.small),"){width:auto;grid-row-gap:",(0,l.D)(1),";grid-auto-flow:row;}"),Bt=(0,a.Z)("div",{target:"e1o04xl63"})({name:"1ki15kq",styles:"max-width:850px"}),Nt=(0,a.Z)("div",{target:"e1o04xl62"})({name:"10ebfcx",styles:"display:flex;flex-direction:column;align-items:center;margin-top:50px"}),Tt=(0,a.Z)("div",{target:"e1o04xl61"})("width:min-content;margin-bottom:",(0,l.D)(3),";"),Xt=(0,a.Z)("h2",{target:"e1o04xl60"})("margin:0;margin-bottom:",(0,l.D)(2),";"),Ft=(0,st.Z)($t);function Ot(t){const e=n.parse(window.location.search),{platform:o}=t.params,a=o&&r.C$[o];return a&&"1"!==e.manual?(0,X.tZ)(Ft,{integrationSlug:a,...t}):(0,X.tZ)(i.P,{children:(0,X.tZ)(c,{children:(0,X.tZ)(tt,{...t})})})}Ot.displayName="PlatformOrIntegration";const Lt=Ot},"./app/views/projects/gettingStartedWithProjectContext.tsx":(t,e,o)=>{o.d(e,{p:()=>a,x:()=>s});var n=o("../node_modules/react/index.js"),i=o("./app/utils/useSessionStorage.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,n.createContext)({project:void 0,setProject:()=>{}});function s(t){let{children:e,project:o}=t;const[s,l]=(0,i.X)("getting-started-with-project",{project:o}),d=(0,n.useCallback)((t=>{l({project:t})}),[l]);return(0,r.tZ)(a.Provider,{value:{project:s.project,setProject:d},children:e})}s.displayName="GettingStartedWithProjectContextProvider"}}]);
//# sourceMappingURL=../sourcemaps/app_views_projectInstall_platformOrIntegration_tsx.1e3369489743e660576f9cd2ec1c0c77.js.map