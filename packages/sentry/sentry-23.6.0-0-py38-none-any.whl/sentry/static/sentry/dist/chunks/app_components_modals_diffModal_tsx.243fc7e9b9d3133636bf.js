"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_modals_diffModal_tsx"],{"./app/components/events/interfaces/crashContent/stackTrace/rawContent.tsx":(e,t,n)=>{n.d(t,{ZP:()=>r}),n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/core-js/modules/es.array.unshift.js");var o=n("./app/components/events/interfaces/frame/utils.tsx"),s=n("./app/utils.tsx");function i(e,t){return e+Array(Math.max(0,t-e.length)+1).join(" ")}function a(e,t,n){switch(e.platform&&(n=e.platform),n){case"javascript":return function(e){let t="";return(0,s.ri)(e.function)?t+="  at "+e.function+"(":t+="  at ? (",(0,s.ri)(e.filename)?t+=e.filename:(0,s.ri)(e.module)&&(t+=e.module),(0,s.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),(0,s.ri)(e.colNo)&&e.colNo>=0&&(t+=":"+e.colNo),t+=")",t}(e);case"ruby":return function(e){let t="  from ";return(0,s.ri)(e.filename)?t+=e.filename:(0,s.ri)(e.module)?t+="("+e.module+")":t+="?",(0,s.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),(0,s.ri)(e.colNo)&&e.colNo>=0&&(t+=":"+e.colNo),(0,s.ri)(e.function)&&(t+=":in `"+e.function+"'"),t}(e);case"php":return function(e,t){const n="null"===e.function?"{main}":e.function;return`#${t} ${e.filename||e.module}(${e.lineNo}): ${n}`}(e,t);case"python":default:return function(e){let t="";return(0,s.ri)(e.filename)?t+='  File "'+e.filename+'"':(0,s.ri)(e.module)?t+='  Module "'+e.module+'"':t+="  ?",(0,s.ri)(e.lineNo)&&e.lineNo>=0&&(t+=", line "+e.lineNo),(0,s.ri)(e.colNo)&&e.colNo>=0&&(t+=", col "+e.colNo),(0,s.ri)(e.function)&&(t+=", in "+e.function),(0,s.ri)(e.context)&&e.context.forEach((n=>{n[0]===e.lineNo&&(t+="\n    "+(0,s.fy)(n[1]))})),t}(e);case"java":return function(e){let t="    at";return(0,s.ri)(e.module)&&(t+=" "+e.module+"."),(0,s.ri)(e.function)&&(t+=e.function),(0,s.ri)(e.filename)&&(t+="("+e.filename,(0,s.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),t+=")"),t}(e);case"objc":case"cocoa":case"native":return function(e){let t="  ";return(0,s.ri)(e.package)&&(t+=i((0,o.Q6)(e.package),20)),(0,s.ri)(e.instructionAddr)&&(t+=i(e.instructionAddr,12)),t+=" "+(e.function||e.symbolAddr),(0,s.ri)(e.filename)&&(t+=" ("+e.filename,(0,s.ri)(e.lineNo)&&e.lineNo>=0&&(t+=":"+e.lineNo),t+=")"),t}(e)}}function r(e,t,n){const o=[];return(e?.frames??[]).forEach(((e,n)=>{o.push(a(e,n,t))})),"python"!==t&&o.reverse(),n&&o.unshift(function(e,t){return"java"===t?function(e){let t=`${e.type}: ${e.value}`;return e.module&&(t=`${e.module}.${t}`),t}(e):e.type+": "+e.value}(n,t)),o.join("\n")}},"./app/components/modals/diffModal.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>D,modalCss:()=>j});var o=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=n("../node_modules/react/index.js"),a=n("../node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js"),r=n("./app/actionCreators/indicator.tsx"),l=n("./app/components/loadingIndicator.tsx"),c=n("./app/components/segmentedControl.tsx"),u=n("./app/locale.tsx"),p=n("./app/styles/space.tsx"),d=n("./app/utils/getStacktraceBody.tsx"),f=n("./app/utils/withApi.tsx");function m(e){const t=[(0,u.t)("Type: %s",e.type)];e.hash&&t.push((0,u.t)("Hash: %s",e.hash)),e.description&&t.push((0,u.t)("Description: %s",e.description));const n=[t.join("\n")];return"component"in e&&e.component&&n.push(h(e.component).join("\n")),n}function h(e){if(!e.contributes)return[];const{name:t,id:n,hint:o}=e,s=t||n,i=s&&o?`${s} (${o})`:s,a=i?[i]:[];if(e.values)for(const t of e.values)if("string"!=typeof t)for(const e of h(t))a.push(`  ${e}`);else a.push(`  ${t}`);return a}n("../node_modules/core-js/modules/es.array.push.js");var g=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class v extends i.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{loading:!0,groupingDiff:!1,baseEvent:[],targetEvent:[],SplitDiffAsync:void 0}),(0,o.Z)(this,"toggleDiffMode",(e=>{this.setState({groupingDiff:e,loading:!0},this.fetchData)})),(0,o.Z)(this,"fetchEventData",(async(e,t)=>{const{orgId:n,project:o,api:s}=this.props,{groupingDiff:i}=this.state;let a=t;if("latest"===t&&(a=(await s.requestPromise(`/issues/${e}/events/latest/`)).eventID),i){return function(e){return Object.values(e).map(m).flat()}(await s.requestPromise(`/projects/${n}/${o.slug}/events/${a}/grouping-info/`))}const r=await s.requestPromise(`/projects/${n}/${o.slug}/events/${a}/`);return(0,d.Z)(r)}))}componentDidMount(){this.fetchData()}fetchData(){const{baseIssueId:e,targetIssueId:t,baseEventId:o,targetEventId:s}=this.props;Promise.all([Promise.all([n.e("vendors-node_modules_diff_lib_index_mjs"),n.e("app_components_splitDiff_tsx")]).then(n.bind(n,"./app/components/splitDiff.tsx")),this.fetchEventData(e,o??"latest"),this.fetchEventData(t,s??"latest")]).then((e=>{let[{default:t},n,o]=e;this.setState({SplitDiffAsync:t,baseEvent:n,targetEvent:o,loading:!1})})).catch((()=>{(0,r.Iw)((0,u.t)("Error loading events"))}))}render(){const{className:e,project:t}=this.props,{SplitDiffAsync:n,loading:o,groupingDiff:s,baseEvent:i,targetEvent:a}=this.state,r=t.features.includes("similarity-view-v2");return(0,g.BX)(y,{className:e,loading:o,children:[o&&(0,g.tZ)(l.Z,{}),!o&&r&&(0,g.tZ)(b,{children:(0,g.BX)(c.s,{"aria-label":(0,u.t)("Grouping"),size:"sm",value:s?"grouping":"event",onChange:e=>this.toggleDiffMode("grouping"===e),children:[(0,g.tZ)(c.s.Item,{children:(0,u.t)("Diff stack trace and message")},"event"),(0,g.tZ)(c.s.Item,{children:(0,u.t)("Diff grouping information")},"grouping")]})}),!o&&n&&i.map(((e,t)=>(0,g.tZ)(n,{base:e,target:a[t]??"",type:"words"},t)))]})}}v.displayName="IssueDiff",(0,o.Z)(v,"defaultProps",{baseEventId:"latest",targetEventId:"latest"});const x=(0,f.Z)(v),y=(0,s.Z)("div",{shouldForwardProp:e=>"string"==typeof e&&(0,a.Z)(e)&&"loading"!==e,target:"e35ohk91"})("background-color:",(e=>e.theme.backgroundSecondary),";overflow:auto;padding:",(0,p.D)(1),";flex:1;display:flex;flex-direction:column;",(e=>e.loading&&`\n        background-color: ${e.theme.background};\n        justify-content: center;\n        align-items: center;\n      `),";"),b=(0,s.Z)("div",{target:"e35ohk90"})("display:flex;align-items:center;margin-bottom:",(0,p.D)(2),";");function N(e){let{className:t,Body:n,CloseButton:o,...s}=e;return(0,g.BX)(n,{children:[(0,g.tZ)(o,{}),(0,g.tZ)(x,{className:t,...s})]})}N.displayName="DiffModal";const j={name:"1rr6fjx",styles:"position:absolute;left:20px;right:20px;top:20px;bottom:20px;display:flex;padding:0;width:auto;[role='document']{height:100%;display:flex;flex:1;}section{display:flex;width:100%;}"},D=N},"./app/utils/getStacktraceBody.tsx":(e,t,n)=>{n.d(t,{Z:()=>s});var o=n("./app/components/events/interfaces/crashContent/stackTrace/rawContent.tsx");function s(e){if(!e||!e.entries)return[];const t=e.entries.find((e=>{let{type:t}=e;return"exception"===t}));if(!t){const t=e.entries.find((e=>{let{type:t}=e;return"message"===t}));return t?t?.data?.formatted&&[t.data.formatted]:[]}return t.data?t.data.values.filter((e=>!!e.stacktrace)).map((t=>(0,o.ZP)(t.stacktrace,e.platform,t))).reduce(((e,t)=>e.concat(t)),[]):[]}},"./app/utils/useApi.tsx":(e,t,n)=>{n.d(t,{Z:()=>i});var o=n("../node_modules/react/index.js"),s=n("./app/api.tsx");const i=function(){let{persistInFlight:e,api:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,o.useRef)();void 0===n.current&&void 0===t&&(n.current=new s.KU);const i=t??n.current,a=(0,o.useCallback)((()=>{e||i.clear()}),[i,e]);return(0,o.useEffect)((()=>a),[a]),i}},"./app/utils/withApi.tsx":(e,t,n)=>{n.d(t,{Z:()=>a});var o=n("./app/utils/getDisplayName.tsx"),s=n("./app/utils/useApi.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};function n(n){let{api:o,...a}=n;const r=(0,s.Z)({api:o,...t});return(0,i.tZ)(e,{...a,api:r})}return n.displayName=`withApi(${(0,o.Z)(e)})`,n}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_diffModal_tsx.cd8253b3a87a2964db25c60fb0d7b99b.js.map