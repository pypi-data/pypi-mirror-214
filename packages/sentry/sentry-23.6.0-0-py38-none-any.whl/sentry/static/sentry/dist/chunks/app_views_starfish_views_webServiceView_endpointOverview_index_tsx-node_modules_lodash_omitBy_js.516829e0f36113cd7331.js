(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_starfish_views_webServiceView_endpointOverview_index_tsx-node_modules_lodash_omitBy_js"],{"./app/components/performance/layouts.tsx":(t,e,i)=>{"use strict";i.d(e,{c:()=>n});var a=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=i("./app/styles/space.tsx");const n=(0,a.Z)("div",{target:"eufzkx60"})("display:grid;grid-template-columns:1fr;grid-column-gap:",(0,s.D)(2),";grid-row-gap:",(0,s.D)(2),";@media (min-width: ",(t=>t.theme.breakpoints.small),"){grid-template-columns:repeat(2, 1fr);}@media (min-width: ",(t=>t.theme.breakpoints.medium),"){",(t=>t.columns?`\n    grid-template-columns: repeat(${t.columns}, 1fr);\n    `:`\n    grid-template-columns: repeat(auto-fit, minmax(${t.minSize}px, 1fr));\n    `),";}")},"./app/views/starfish/components/textAlign.tsx":(t,e,i)=>{"use strict";i.d(e,{Dq:()=>s,_F:()=>r,xe:()=>n});var a=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");const s=(0,a.Z)("span",{target:"e16p96xr2"})({name:"evqzij",styles:"text-align:right;width:100%"}),n=(0,a.Z)("span",{target:"e16p96xr1"})({name:"zq26zb",styles:"text-align:left;width:100%"}),r=(0,a.Z)("span",{target:"e16p96xr0"})({name:"12wal98",styles:"text-overflow:ellipsis;overflow:hidden;white-space:nowrap"})},"./app/views/starfish/views/webServiceView/endpointOverview/index.tsx":(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>et});var a=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=i("../node_modules/react/index.js"),n=i("./app/components/charts/eventsRequest.tsx"),r=i("./app/components/datePageFilter.tsx"),o=i("./app/components/layouts/thirds.tsx"),d=i("./app/components/organizations/pageFilterBar.tsx"),l=i("./app/components/organizations/pageFilters/container.tsx"),p=i("./app/components/performance/layouts.tsx"),c=i("./app/components/placeholder.tsx"),m=i("./app/components/segmentedControl.tsx"),u=i("./app/locale.tsx"),h=i("./app/styles/space.tsx"),g=i("./app/types/index.tsx"),f=i("./app/utils.tsx"),v=i("./app/utils/discover/charts.tsx"),w=i("./app/utils/discover/discoverQuery.tsx"),y=i("./app/utils/discover/eventView.tsx"),x=i("./app/utils/discover/types.tsx"),Z=i("./app/utils/tokenizeSearch.tsx"),_=i("./app/utils/useLocation.tsx"),b=i("./app/utils/useOrganization.tsx"),k=i("./app/utils/usePageFilters.tsx"),S=i("./app/utils/withApi.tsx"),C=i("./app/views/performance/transactionSummary/utils.tsx"),L=i("./app/views/starfish/colours.tsx"),F=i("./app/views/starfish/components/chart.tsx"),T=i("./app/components/dateTime.tsx"),D=i("./app/components/duration.tsx"),z=i("./app/components/gridEditable/index.tsx"),P=i("./app/components/links/link.tsx"),j=i("./app/components/questionTooltip.tsx"),E=i("./app/utils/discover/fieldRenderers.tsx"),A=i("./app/utils/discover/fields.tsx"),$=i("./app/views/starfish/components/samplesTable/common.tsx");const B=2;var I=i("./app/views/starfish/components/textAlign.tsx"),q=i("./app/views/starfish/views/spans/types.tsx"),O=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const V=[{key:"id",name:"Event ID",width:100},{key:"profile_id",name:"Profile ID",width:140},{key:A.zD,name:"Operation Duration",width:180},{key:"timestamp",name:"Timestamp",width:230},{key:"transaction.duration",name:q.F.duration,width:100},{key:"p95_comparison",name:"Compared to P95",width:100}];function M(t){let{queryConditions:e}=t;const i=(0,_.T)(),a=(0,b.Z)(),n={id:void 0,name:"Endpoint Overview Samples",query:new Z.MY(e).formatString(),projects:[1],fields:[],dataset:x.as.DISCOVER,version:2},r=y.ZP.fromNewQueryWithLocation(n,i),{isLoading:o,data:d,aggregatesData:l}=function(t){const e=(0,_.T)(),i=(0,b.Z)(),a=[{field:"transaction.duration",kind:"field"},{field:"profile_id",kind:"field"},{field:"timestamp",kind:"field"},{field:"spans.browser",kind:"field"},{field:"spans.db",kind:"field"},{field:"spans.http",kind:"field"},{field:"spans.resource",kind:"field"},{field:"spans.ui",kind:"field"}],s=t.clone().withColumns([{kind:"function",function:["p50","transaction.duration",void 0,void 0]},{kind:"function",function:["p95","transaction.duration",void 0,void 0]}]),{isLoading:n,data:r}=(0,w._)({eventView:s,referrer:"starfish-transaction-summary-sample-events",location:e,orgSlug:i.slug}),o=t.clone().withColumns(a).withSorts([{field:"transaction.duration",kind:"desc"}]);o.additionalConditions=new Z.MY(`transaction.duration:>${r?.data?.[0]?.["p95(transaction.duration)"]??0}`);const{isLoading:d,data:l}=(0,w._)({eventView:o,referrer:"starfish-transaction-summary-sample-events",location:e,orgSlug:i.slug,limit:B}),p=t.clone().withColumns(a).withSorts([{field:"transaction.duration",kind:"desc"}]);p.additionalConditions=new Z.MY(`transaction.duration:<=${r?.data?.[0]?.["p50(transaction.duration)"]??0}`);const{isLoading:c,data:m}=(0,w._)({eventView:p,referrer:"starfish-transaction-summary-sample-events",location:e,orgSlug:i.slug,limit:B}),u=t.clone().withColumns(a).withSorts([{field:"transaction.duration",kind:"asc"}]);u.additionalConditions=new Z.MY(`transaction.duration:<=${r?.data?.[0]?.["p50(transaction.duration)"]??0}`);const{isLoading:h,data:g}=(0,w._)({eventView:u,referrer:"starfish-transaction-summary-sample-events",location:e,orgSlug:i.slug,limit:B});return n||d||c||h?{isLoading:!0,data:[]}:{isLoading:!1,data:[...l?.data??[],...m?.data??[],...g?.data??[]],aggregatesData:r?.data[0]??[]}}(r);return(0,O.tZ)(z.ZP,{isLoading:o,data:d,columnOrder:V,columnSortBy:[],location:i,grid:{renderHeadCell:function(t){return"p95_comparison"===t.key?(0,O.tZ)(I.Dq,{children:(0,O.tZ)(I._F,{children:t.name})}):t.key===A.zD?(0,O.BX)(s.Fragment,{children:[t.name,(0,O.tZ)(N,{size:"xs",position:"top",title:(0,u.t)("Span durations are summed over the course of an entire transaction. Any overlapping spans are only counted once.")})]}):(0,O.tZ)(I._F,{children:t.name})},renderBodyCell:function(t,e){return"id"===t.key?(0,O.tZ)(P.Z,{to:`/performance/${e["project.name"]}:${e.id}`,children:e.id.slice(0,8)}):"profile_id"===t.key?e.profile_id?(0,O.tZ)(P.Z,{to:`/profiling/profile/${e["project.name"]}/${e.profile_id}/flamechart/`,children:e.profile_id.slice(0,8)}):"(no value)":"transaction.duration"===t.key?(0,O.tZ)(D.Z,{seconds:e["transaction.duration"]/1e3,fixedDigits:2,abbreviation:!0}):"timestamp"===t.key?(0,O.tZ)(T.Z,{date:e[t.key],year:!0,timeZone:!0,seconds:!0}):"p95_comparison"===t.key?(0,O.tZ)($.fd,{duration:e["transaction.duration"],p95:l?.["p95(transaction.duration)"]??0}):t.key===A.zD?(0,E.Js)(t.key,{})(e,{location:i,organization:a,eventView:r}):(0,O.tZ)(I.xe,{children:e[t.key]})}}})}M.displayName="TransactionSamplesTable";const N=(0,a.Z)(j.Z,{target:"e1g0mid30"})({name:"1u8yswg",styles:"position:relative;left:4px"});var R=i("./app/views/starfish/types.tsx"),X=i("./app/views/starfish/utils/chartValueFormatters/formatThroughput.ts"),Y=i("./app/views/starfish/views/spans/spansTable.tsx"),Q=i("./app/components/issues/groupList.tsx"),G=i("./app/components/organizations/pageFilters/parse.tsx"),W=i("./app/views/starfish/utils/getDateFilters.tsx");function H(t){const{transactionName:e,issueCategory:i}=t,a=(0,b.Z)(),n=["is:unresolved",...i?[`issue.category:${i}`]:[""],...e?[`transaction:${e}`]:[""],...(t=>{const{startTime:e,endTime:i,statsPeriod:a}=(0,W.tZ)(t),{start:s,end:n}=(0,G.fK)({start:e.toDate(),end:i.toDate()});return a?[`statsPeriod:${a}`]:[`start:${s}`,`end:${n}`]})((0,k.Z)())].join(" "),r=(0,s.useMemo)((()=>({project:1,query:n,limit:5,sort:"new"})),[n]);return(0,O.tZ)(Q.Z,{orgId:a.slug,withChart:!1,narrowGroups:!0,endpointPath:`/organizations/${a.slug}/issues/`,query:n,queryParams:r,withPagination:!1,useTintRow:!0,source:"starfish-endpoint-summary"})}H.displayName="IssuesTable";const J=H;var K=i("./app/views/starfish/views/webServiceView/spanGroupBreakdownContainer.tsx");const U=5,tt=(0,S.Z)(n.Z);function et(){const t=(0,_.T)(),e=(0,b.Z)(),{endpoint:i,method:a,statsPeriod:n}=t.query,p=i?Array.isArray(i)?i[0]:i:void 0,c=(0,k.Z)(),[h,S]=(0,s.useState)({spansFilter:R.r.ALL}),[T,D]=(0,s.useState)("ALL"),z=["has:http.method","transaction.op:http.server",`transaction:${p}`,`http.method:${a}`],P=new Z.MY(z),j={id:void 0,name:(0,u.t)("Endpoint Overview"),query:P.formatString(),projects:[1],fields:["tps()","p95(transaction.duration)","http_error_count()"],dataset:x.as.METRICS,start:c.selection.datetime.start??void 0,end:c.selection.datetime.end??void 0,range:c.selection.datetime.period??void 0,version:2},E=y.ZP.fromNewQueryWithLocation(j,t),{data:A,isLoading:$}=(0,w._)({eventView:E,orgSlug:e.slug,location:t});return(0,O.tZ)(l.Z,{children:(0,O.BX)(o.T3,{children:[(0,O.tZ)(o.h4,{children:(0,O.tZ)(o.oB,{children:(0,O.tZ)(o.Dx,{children:`${a} ${p}`})})}),(0,O.BX)(o.uT,{children:[(0,O.tZ)(rt,{children:(0,O.tZ)(d.Z,{condensed:!0,children:(0,O.tZ)(r.Z,{alignDropdown:"left"})})}),(0,O.BX)(o.or,{children:[(0,O.tZ)(ot,{minSize:200,children:(0,O.tZ)(K._2,{transaction:p})}),(0,O.tZ)(dt,{children:(0,O.BX)(m.s,{size:"xs","aria-label":(0,u.t)("Filter Spans"),value:h.spansFilter,onChange:t=>S({...h,spansFilter:t}),children:[(0,O.tZ)(m.s.Item,{children:(0,u.t)("All Spans")},""),(0,O.tZ)(m.s.Item,{children:(0,u.t)("http")},"http"),(0,O.tZ)(m.s.Item,{children:(0,u.t)("db")},"db")]})}),(0,O.tZ)(it,{filter:h.spansFilter,transaction:p}),(0,O.tZ)(nt,{children:(0,u.t)("Sample Events")}),(0,O.tZ)(M,{queryConditions:z}),(0,O.tZ)(dt,{children:(0,O.BX)(m.s,{size:"xs","aria-label":(0,u.t)("Filter issue types"),value:T,onChange:t=>D(t),children:[(0,O.tZ)(m.s.Item,{children:(0,u.t)("All Issues")},"ALL"),(0,O.tZ)(m.s.Item,{children:(0,u.t)("Errors Only")},g.qE.ERROR),(0,O.tZ)(m.s.Item,{children:(0,u.t)("Performance Only")},g.qE.PERFORMANCE)]})}),(0,O.tZ)(J,{issueCategory:"ALL"===T?void 0:T,transactionName:p})]}),(0,O.BX)(o.MF,{children:[(0,O.tZ)(tt,{query:P.formatString(),includePrevious:!1,partial:!0,limit:5,interval:"1h",includeTransformedData:!0,environment:E.environment,project:E.project,period:E.statsPeriod,referrer:"starfish-endpoint-overview",start:E.start,end:E.end,organization:e,yAxis:["tps()","p95(transaction.duration)","http_error_count()"],dataset:x.as.METRICS,children:t=>{let{loading:e,results:i}=t;return i?(0,O.BX)(s.Fragment,{children:[(0,O.tZ)(pt,{children:(0,O.tZ)(lt,{children:q.F.throughput})}),(0,O.tZ)(at,{isLoading:$,value:(0,f.ri)(A)?(0,u.t)("%s/s",A.data[0]["tps()"].toFixed(2)):void 0}),(0,O.tZ)(F.ZP,{statsPeriod:n??"24h",height:80,data:[i[0]],start:"",end:"",loading:e,utc:!1,isLineChart:!0,definedAxisTicks:2,disableXAxis:!0,chartColors:[L.SQ],grid:{left:"8px",right:"0",top:"8px",bottom:"0"},tooltipFormatterOptions:{valueFormatter:t=>(0,X.Z)(t)}}),(0,O.tZ)(C.uI,{}),(0,O.tZ)(pt,{children:(0,O.tZ)(lt,{children:q.F.p95})}),(0,O.tZ)(at,{isLoading:$,value:(0,f.ri)(A)?(0,v.Ew)(A.data[0]["p95(transaction.duration)"],"duration"):void 0}),(0,O.tZ)(F.ZP,{statsPeriod:n??"24h",height:80,data:[i[1]],start:"",end:"",loading:e,utc:!1,isLineChart:!0,definedAxisTicks:2,disableXAxis:!0,chartColors:[L.Tn],grid:{left:"8px",right:"0",top:"8px",bottom:"0"},tooltipFormatterOptions:{valueFormatter:t=>(0,v.Ew)(t,"duration")}}),(0,O.tZ)(C.uI,{}),(0,O.tZ)(pt,{children:(0,O.tZ)(lt,{children:q.F.errorCount})}),(0,O.tZ)(at,{isLoading:$,value:(0,f.ri)(A)?(0,v.Ew)(A.data[0]["http_error_count()"],"integer"):void 0}),(0,O.tZ)(F.ZP,{statsPeriod:E.statsPeriod,height:80,data:[i[2]],start:E.start,end:E.end,loading:e,utc:!1,grid:{left:"8px",right:"0",top:"8px",bottom:"0"},definedAxisTicks:2,isLineChart:!0,chartColors:[L.eO]})]}):null}}),(0,O.tZ)(C.uI,{})]})]})]})})}function it(t){let{filter:e,transaction:i}=t;return(0,O.tZ)(Y.Z,{moduleName:e??R.r.ALL,orderBy:"-time_spent_percentage",onSetOrderBy:()=>{},endpoint:i,limit:U})}function at(t){let{isLoading:e,value:i}=t;return e?(0,O.tZ)(c.Z,{height:"24px"}):(0,O.tZ)(st,{children:i})}et.displayName="EndpointOverview",it.displayName="SpanMetricsTable",at.displayName="ChartSummaryValue";const st=(0,a.Z)("div",{target:"e1mmy0la6"})("font-size:",(t=>t.theme.fontSizeExtraLarge),";"),nt=(0,a.Z)("h3",{target:"e1mmy0la5"})("color:",(t=>t.theme.gray300),";font-size:",(t=>t.theme.fontSizeLarge),";margin:0;margin-bottom:",(0,h.D)(1),";"),rt=(0,a.Z)("div",{target:"e1mmy0la4"})("display:grid;grid-template-rows:auto auto auto;gap:",(0,h.D)(2),";margin-bottom:",(0,h.D)(2),";@media (min-width: ",(t=>t.theme.breakpoints.small),"){grid-template-rows:auto;grid-template-columns:auto 1fr auto;}"),ot=(0,a.Z)(p.c,{target:"e1mmy0la3"})("margin-bottom:",(0,h.D)(2),";"),dt=(0,a.Z)("div",{target:"e1mmy0la2"})("margin-bottom:",(0,h.D)(2),";"),lt=(0,a.Z)("div",{target:"e1mmy0la1"})((t=>t.theme.text.cardTitle),";"),pt=(0,a.Z)("div",{target:"e1mmy0la0"})("padding:0 ",(0,h.D)(1)," 0 0;min-height:24px;width:100%;display:flex;align-items:center;justify-content:space-between;")},"../node_modules/lodash/negate.js":t=>{t.exports=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}},"../node_modules/lodash/omitBy.js":(t,e,i)=>{var a=i("../node_modules/lodash/_baseIteratee.js"),s=i("../node_modules/lodash/negate.js"),n=i("../node_modules/lodash/pickBy.js");t.exports=function(t,e){return n(t,s(a(e)))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_starfish_views_webServiceView_endpointOverview_index_tsx-node_modules_lodash_omitBy_js.1c6c504f1e2d15a701d1f2afbe8a3872.js.map