(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionSpans_index_tsx"],{"./app/components/events/searchBar.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>I}),s("../node_modules/core-js/modules/es.error.cause.js");var n=s("../node_modules/react/index.js"),i=s("../node_modules/lodash/assign.js"),a=s.n(i),r=s("../node_modules/lodash/flatten.js"),o=s.n(r),p=s("../node_modules/lodash/memoize.js"),c=s.n(p),l=s("../node_modules/lodash/omit.js"),u=s.n(l),d=s("./app/actionCreators/tags.tsx"),m=s("./app/components/smartSearchBar/index.tsx"),g=s("./app/constants/index.tsx"),x=s("./app/types/index.tsx"),h=s("./app/utils.tsx"),y=s("./app/utils/discover/fields.tsx"),v=s("./app/utils/fields/index.ts"),f=s("./app/utils/measurements/measurements.tsx"),S=s("./app/utils/useApi.tsx"),T=s("./app/utils/withTags.tsx"),E=s("./app/views/dashboards/utils.tsx"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const w=new RegExp(`^${g.c$}|\\${g.ir}`,"g"),j=new Set(Object.keys(y.wZ)),Z=Object.keys(y.wZ).reduce(((e,t)=>(e[t]={...y.wZ[t],kind:v.IV.FIELD},e)),{}),k=u()(Z,y.J8),_=y.$4.reduce(((e,t)=>(e[t]={name:t,kind:v.IV.METRICS},e)),{}),O=Object.keys(y.jg).reduce(((e,t)=>(e[t]={...y.jg[t],kind:v.IV.FIELD},e)),{});function P(e){const{maxSearchItems:t,organization:s,tags:i,omitTags:r,fields:p,projectIds:l,includeSessionTagsValues:g,maxMenuHeight:T,customMeasurements:P}=e,I=(0,S.Z)(),C=(0,n.useMemo)((()=>(e=>e?.length?e.reduce(((e,t)=>(j.has(t.field)||(0,y.GO)(t.field)||(0,E.nk)(t.field)||(e[t.field]={key:t.field,name:t.field,kind:v.IV.FUNCTION}),e)),{}):[])(p)),[p]),q=(0,n.useMemo)((()=>Object.keys(i).reduce(((e,t)=>(e[t]={...i[t],kind:v.IV.TAG},e)),{})),[i]);(0,n.useEffect)((()=>{L.cache.clear?.()}),[l]);const L=c()(((e,t,n)=>{const i=l?.map(String);return(0,y.h1)(e.key)||(0,y.Xr)(e.key)?Promise.resolve([]):(0,v.bn)(e.key)?Promise.resolve(v.BF):(0,d.Fo)({api:I,orgSlug:s.slug,tagKey:e.key,search:t,projectIds:i,endpointParams:n,includeTransactions:!0,includeSessions:g}).then((e=>o()(e.filter((e=>{let{name:t}=e;return(0,h.ri)(t)})).map((e=>{let{name:t}=e;return t})))),(()=>{throw new Error("Unable to fetch event field values")}))}),((e,t)=>{let{key:s}=e;return`${s}-${t}`})),z=e=>{const t=((e,t)=>{const s=Object.keys(e).reduce(((t,s)=>(t[s]={...e[s],kind:v.IV.MEASUREMENT},t)),{});return t?Object.keys(t).reduce(((e,s)=>(e[s]={...t[s],kind:v.IV.MEASUREMENT},e)),s):s})(e,P),n=s.features.includes("performance-view")?Object.assign({},t,C,_,Z):Object.assign({},k);return a()(n,q,Z,O),n.has={key:v.Sh.HAS,name:"Has property",values:Object.keys(n).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),predefined:!0,kind:v.IV.FIELD},r&&r.length>0?u()(n,r):n};return(0,b.tZ)(f.Z,{children:s=>{let{measurements:n}=s;return(0,b.tZ)(m.Z,{hasRecentSearches:!0,savedSearchType:x.L4.EVENT,onGetTagValues:L,supportedTags:z(n),prepareQuery:e=>e.replace(w,""),maxSearchItems:t,excludedTags:[v.Sh.ENVIRONMENT,v.Sh.TOTAL_COUNT],maxMenuHeight:T??300,customPerformanceMetrics:P,...e})}})}P.displayName="SearchBar";const I=(0,T.Z)(P)},"./app/components/gridEditable/sortLink.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("../node_modules/react-router/es/index.js"),a=s("./app/components/links/link.tsx"),r=s("./app/icons/index.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{align:t,title:s,canSort:n,generateSortLink:a,onClick:r,direction:p,replace:d}=e;const m=a();if(!m||!n)return(0,o.tZ)(l,{align:t,children:s});const g=p?(0,o.tZ)(u,{size:"xs",direction:"desc"===p?"down":"up"}):null;return(0,o.BX)(c,{align:t,to:m,onClick:e=>{d&&(e.preventDefault(),i.browserHistory.replace(m)),r?.(e)},children:[s," ",g]})}p.displayName="SortLink";const c=(0,n.Z)((e=>{const{align:t,css:s,...n}=e;return(0,o.tZ)(a.Z,{...n})}),{target:"esdhr0u2"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),l=(0,n.Z)("div",{target:"esdhr0u1"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),u=(0,n.Z)(r.CC,{target:"esdhr0u0"})({name:"40f4ru",styles:"vertical-align:top"}),d=p},"./app/utils/performance/suspectSpans/suspectSpansQuery.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s("../node_modules/lodash/omit.js"),i=s.n(n),a=s("./app/utils.tsx"),r=s("./app/utils/discover/genericDiscoverQuery.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){const{perSuspect:t,spanOps:s,spanGroups:n,minExclusiveTime:i,maxExclusiveTime:r}=e,o={perSuspect:t,spanOp:s,spanGroup:n,min_exclusive_time:i,max_exclusive_time:r};(0,a.ri)(o.perSuspect)||delete o.perSuspect,(0,a.ri)(o.spanOp)||delete o.spanOp,(0,a.ri)(o.spanGroup)||delete o.spanGroup;const p=e.eventView.getEventsAPIPayload(e.location);return{...o,...p}}function c(e){return(0,o.tZ)(r.ZP,{route:"events-spans-performance",getRequestPayload:p,...i()(e,"children"),children:t=>{let{tableData:s,...n}=t;return e.children({suspectSpans:s,...n})}})}c.displayName="SuspectSpansQuery";const l=c},"./app/utils/withTags.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/react/index.js"),a=s("./app/stores/tagStore.tsx"),r=s("./app/utils/getDisplayName.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const p=function(e){class t extends i.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{tags:a.Z.getState()}),(0,n.Z)(this,"unsubscribe",a.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...s}=this.props;return(0,o.tZ)(e,{tags:t??this.state.tags,...s})}}return t.displayName="WithTags",(0,n.Z)(t,"displayName",`withTags(${(0,r.Z)(e)})`),t}},"./app/views/performance/transactionSummary/transactionSpans/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>H});var n=s("./app/locale.tsx"),i=s("./app/utils/withOrganization.tsx"),a=s("./app/utils/withProjects.tsx"),r=s("./app/views/performance/transactionSummary/pageLayout.tsx"),o=s("./app/views/performance/transactionSummary/tabs.tsx"),p=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),c=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react/index.js")),l=s("../node_modules/react-router/es/index.js"),u=s("../node_modules/lodash/omit.js"),d=s.n(u),m=s("./app/components/compactSelect/index.tsx"),g=s("./app/components/datePageFilter.tsx"),x=s("./app/components/environmentPageFilter.tsx"),h=s("./app/components/events/searchBar.tsx"),y=s("./app/components/layouts/thirds.tsx"),v=s("./app/components/organizations/pageFilterBar.tsx"),f=s("./app/components/organizations/pageFilters/parse.tsx"),S=s("./app/components/pagination.tsx"),T=s("./app/styles/space.tsx"),E=s("./app/utils.tsx"),b=s("./app/utils/analytics.tsx"),w=s("./app/utils/discover/discoverQuery.tsx"),j=s("./app/utils/performance/suspectSpans/suspectSpansQuery.tsx"),Z=s("./app/utils/performanceForSentry/index.tsx"),k=s("./app/utils/queryString.tsx"),_=s("./app/utils/useProjects.tsx"),O=s("./app/components/performance/waterfall/utils.tsx"),P=s("./app/icons/index.tsx"),I=s("./app/utils/discover/genericDiscoverQuery.tsx"),C=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function q(e){return(0,C.tZ)(I.ZP,{route:"events-span-ops",limit:20,...d()(e,"children"),children:t=>{let{tableData:s,...n}=t;return e.children({spanOps:s,...n})}})}q.displayName="SpanOpsQuery";const L=q;var z=s("./app/utils/tokenizeSearch.tsx");function N(e){let{spanOps:t,isLoading:s,error:i}=e;return s?[{value:"isLoading",disabled:!0,label:(0,n.t)("Loadingâ€¦")}]:i?[{value:"error",disabled:!0,label:(0,n.t)("Error loading operations"),leadingItems:(0,C.tZ)(P.FC,{color:"subText"})}]:t.map((e=>({value:e.op,label:e.op,leadingItems:(0,C.tZ)(M,{backgroundColor:(0,O.hd)(e.op)})})))}function V(e){const{location:t,eventView:s,organization:i,handleOpChange:a,transactionName:r}=e,o=new z.MY("");o.setFilterValues("event.type",["transaction"]).setFilterValues("transaction",[r]);const p=s.clone();p.query=o.formatString();const c=(0,k.ro)(t.query.spanOp);return(0,C.tZ)(L,{location:t,orgSlug:i.slug,eventView:p,cursor:"0:0:1",noPagination:!0,children:e=>(0,C.tZ)(m.Z,{clearable:!0,maxMenuWidth:"24rem",disallowEmptySelection:!1,menuTitle:(0,n.t)("Filter by operation"),options:N(e),onChange:e=>a(e?.value),value:c,triggerLabel:c??(0,n.t)("Filter"),triggerProps:{icon:(0,C.tZ)(P.wH,{})}})})}V.displayName="OpsFilter";const M=(0,p.Z)("div",{target:"e8oacth0"})("display:block;width:",(0,T.D)(1),";height:",(0,T.D)(1),";border-radius:100%;background-color:",(e=>e.backgroundColor),";");var D=s("./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx"),F=s("./app/views/performance/transactionSummary/transactionSpans/utils.tsx");const B={spanOp:(e,t)=>(0,b.Gi)("performance_views.spans.change_op",{organization:e,operation_name:t}),sort:(e,t)=>(0,b.Gi)("performance_views.spans.change_sort",{organization:e,sort_column:t})};function U(e){const{location:t,organization:s,eventView:n,projectId:i,transactionName:a}=e,r=(0,k.ro)(t.query.query,"");function o(e){return function(n){B[e]?.(s,n);const i=(0,f.fK)({...t.query||{},[e]:n}),a=["cursor"];(0,E.ri)(n)||a.push(e);const r=d()(i,a);l.browserHistory.push({...t,query:r})}}const p=(0,k.ro)(t.query.spanOp),u=(0,k.ro)(t.query.spanGroup),h=(0,F.KK)(n),T=function(e,t){e=e.clone();const s=F.uQ[t];return e.fields=s?s.map((e=>({field:e}))):[],e}(n,h.field),b=(0,F.zW)(n),{projects:O}=(0,_.Z)();return(0,C.BX)(y.or,{fullWidth:!0,children:[(0,C.BX)(A,{children:[(0,C.tZ)(V,{location:t,eventView:n,organization:s,handleOpChange:o("spanOp"),transactionName:a}),(0,C.BX)(v.Z,{condensed:!0,children:[(0,C.tZ)(x.Z,{}),(0,C.tZ)(g.Z,{alignDropdown:"left",maxPickableDays:F.bc,relativeOptions:F.CS})]}),(0,C.tZ)(G,{organization:s,projectIds:n.project,query:r,fields:n.fields,onSearch:o("query")}),(0,C.tZ)(m.Z,{value:h.field,options:F.E5.map((e=>({value:e.field,label:e.label}))),onChange:e=>o("sort")(e.value),triggerProps:{prefix:h.prefix},triggerLabel:h.label})]}),(0,C.tZ)(w.Z,{eventView:b,orgSlug:s.slug,location:t,referrer:"api.performance.transaction-spans",cursor:"0:0:1",noPagination:!0,children:e=>{let{tableData:n}=e;const r=n?.data?.[0]??null;return(0,C.tZ)(j.Z,{location:t,orgSlug:s.slug,eventView:T,limit:10,perSuspect:0,spanOps:(0,E.ri)(p)?[p]:[],spanGroups:(0,E.ri)(u)?[u]:[],children:e=>{let{suspectSpans:n,isLoading:o,pageLinks:p}=e;return(0,C.BX)(c.Fragment,{children:[(0,C.tZ)(Z.oF,{id:"TransactionSpans-SuspectSpansTable",hasData:!!n?.length,isLoading:o,children:(0,C.tZ)(D.Z,{location:t,organization:s,transactionName:a,project:O.find((e=>e.id===i)),isLoading:o,suspectSpans:n??[],totals:r,sort:h.field})}),(0,C.tZ)(S.Z,{pageLinks:p??null})]})}})}})]})}U.displayName="SpansContent";const A=(0,p.Z)("div",{target:"e13h24431"})("display:grid;gap:",(0,T.D)(2),";margin-bottom:",(0,T.D)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(3, min-content);}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:auto auto 1fr auto;}"),G=(0,p.Z)(h.Z,{target:"e13h24430"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/5;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),X=U;function $(e){const{location:t,organization:s,projects:n}=e;return(0,C.tZ)(r.ZP,{location:t,organization:s,projects:n,tab:o.Z.SPANS,getDocumentTitle:R,generateEventView:F.xz,childComponent:X})}function R(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,n.t)("Performance")].join(" - "):[(0,n.t)("Summary"),(0,n.t)("Performance")].join(" - ")}$.displayName="TransactionSpans";const H=(0,a.Z)((0,i.Z)($))},"./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx":(e,t,s)=>{"use strict";function n(e){let{orgSlug:t,transaction:s,query:n,spanSlug:i,projectID:a}=e;const r=function(e){let{orgSlug:t,spanSlug:s}=e;return`/organizations/${t}/performance/summary/spans/${encodeURIComponent(s.op)}:${s.group}/`}({orgSlug:t,spanSlug:i});return{pathname:r,query:{transaction:s,project:a,environment:n.environment,statsPeriod:n.statsPeriod,start:n.start,end:n.end,query:n.query}}}let i;s.d(t,{BP:()=>n,wL:()=>i}),function(e){e.MIN="min",e.MAX="max"}(i||(i={}))},"./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>g});var n=s("./app/components/gridEditable/index.tsx"),i=s("./app/components/gridEditable/sortLink.tsx"),a=s("./app/components/links/link.tsx"),r=s("./app/locale.tsx"),o=s("./app/utils.tsx"),p=s("./app/utils/discover/fieldRenderers.tsx"),c=s("./app/utils/discover/fields.tsx"),l=s("./app/utils/discover/styles.tsx"),u=s("./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx"),d=s("./app/views/performance/transactionSummary/transactionSpans/types.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(e){const{location:t,organization:s,transactionName:i,isLoading:a,suspectSpans:r,totals:p,sort:c,project:l}=e,u=r.map((e=>({operation:e.op,group:e.group,description:e.description,frequency:(0,o.ri)(e.frequency)&&(0,o.ri)(p?.["count()"])?Math.min(1,e.frequency/p["count()"]):null,avgOccurrences:e.avgOccurrences,p50ExclusiveTime:e.p50ExclusiveTime,p75ExclusiveTime:e.p75ExclusiveTime,p95ExclusiveTime:e.p95ExclusiveTime,p99ExclusiveTime:e.p99ExclusiveTime,sumExclusiveTime:e.sumExclusiveTime})));return(0,m.tZ)(n.ZP,{isLoading:a,data:u,columnOrder:y[c].map((e=>v[e])),columnSortBy:[],grid:{renderHeadCell:x,renderBodyCell:h(t,s,i,l)},location:t})}function x(e,t){const s=(0,c.qG)(e.key,f[e.key]);return(0,m.tZ)(i.Z,{title:e.name,align:s,direction:void 0,canSort:!1,generateSortLink:()=>{}})}function h(e,t,s,n){return function(i,o){const c=(0,p.Js)(i.key,f);if("description"===i.key){const p=(0,u.BP)({orgSlug:t.slug,transaction:s,query:e.query,spanSlug:{op:o.operation,group:o.group},projectID:n?.id});return(0,m.tZ)(l.W2,{children:(0,m.tZ)(a.Z,{to:p,children:o[i.key]??(0,r.t)("(unnamed span)")})})}return c(o,{location:e,organization:t})}}g.displayName="SuspectSpansTable",x.displayName="renderHeadCell";const y={[d.g.AVG_OCCURRENCE]:["operation","description","avgOccurrences","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.g.SUM_EXCLUSIVE_TIME]:["operation","description","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.p.P50_EXCLUSIVE_TIME]:["operation","description","frequency","p50ExclusiveTime","sumExclusiveTime"],[d.p.P75_EXCLUSIVE_TIME]:["operation","description","frequency","p75ExclusiveTime","sumExclusiveTime"],[d.p.P95_EXCLUSIVE_TIME]:["operation","description","frequency","p95ExclusiveTime","sumExclusiveTime"],[d.p.P99_EXCLUSIVE_TIME]:["operation","description","frequency","p99ExclusiveTime","sumExclusiveTime"]},v={operation:{key:"operation",name:(0,r.t)("Span Operation"),width:n.z7},description:{key:"description",name:(0,r.t)("Span Name"),width:n.z7},frequency:{key:"frequency",name:(0,r.t)("Frequency"),width:n.z7},avgOccurrences:{key:"avgOccurrences",name:(0,r.t)("Average Occurrences"),width:n.z7},p50ExclusiveTime:{key:"p50ExclusiveTime",name:(0,r.t)("P50 Self Time"),width:n.z7},p75ExclusiveTime:{key:"p75ExclusiveTime",name:(0,r.t)("P75 Self Time"),width:n.z7},p95ExclusiveTime:{key:"p95ExclusiveTime",name:(0,r.t)("P95 Self Time"),width:n.z7},p99ExclusiveTime:{key:"p99ExclusiveTime",name:(0,r.t)("P99 Self Time"),width:n.z7},sumExclusiveTime:{key:"sumExclusiveTime",name:(0,r.t)("Total Self Time"),width:n.z7}},f={operation:"string",description:"string",frequency:"percentage",avgOccurrences:"number",p50ExclusiveTime:"duration",p75ExclusiveTime:"duration",p95ExclusiveTime:"duration",p99ExclusiveTime:"duration",sumExclusiveTime:"duration"}},"../node_modules/lodash/assign.js":(e,t,s)=>{var n=s("../node_modules/lodash/_assignValue.js"),i=s("../node_modules/lodash/_copyObject.js"),a=s("../node_modules/lodash/_createAssigner.js"),r=s("../node_modules/lodash/isArrayLike.js"),o=s("../node_modules/lodash/_isPrototype.js"),p=s("../node_modules/lodash/keys.js"),c=Object.prototype.hasOwnProperty,l=a((function(e,t){if(o(t)||r(t))i(t,p(t),e);else for(var s in t)c.call(t,s)&&n(e,s,t[s])}));e.exports=l}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionSpans_index_tsx.9182b433b9202ddc05af658b4e518b47.js.map