{"version":3,"file":"chunks/app_views_settings_account_accountNotificationFineTuning_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/data/forms/accountNotificationSettings.tsx","webpack:///./app/views/asyncView.tsx","webpack:///./app/views/settings/account/notifications/fields.tsx","webpack:///./app/views/settings/account/notifications/notificationSettingsByOrganization.tsx","webpack:///./app/views/settings/account/notifications/notificationSettingsByProjects.tsx","webpack:///./app/views/settings/account/notifications/unlinkedAlert.tsx","webpack:///./app/views/settings/account/notifications/notificationSettingsByType.tsx","webpack:///./app/views/settings/account/accountNotificationFineTuning.tsx","webpack:///./app/views/settings/components/defaultSearchBar.tsx"],"sourcesContent":["import {Field} from 'sentry/components/forms/types';\nimport {t} from 'sentry/locale';\n\n// TODO: cleanup unused fields and exports\n\n// Export route to make these forms searchable by label/help\nexport const route = '/settings/account/notifications/';\n\nexport const fields: {[key: string]: Field} = {\n  subscribeByDefault: {\n    name: 'subscribeByDefault',\n    type: 'boolean',\n    label: t('Send Me Alerts'),\n    // TODO(billy): Make this a real link\n    help: t(\n      'Enable this to receive notifications for Alerts sent to your teams. You will always receive alerts configured to be sent directly to you.'\n    ),\n  },\n  workflowNotifications: {\n    name: 'workflowNotifications',\n    type: 'radio',\n    label: t('Send Me Workflow Notifications'),\n    choices: [\n      [0, t('Always')],\n      [1, t('Only On Issues I Subscribe To')],\n      [2, t('Never')],\n    ],\n    help: t('E.g. changes in issue assignment, resolution status, and comments.'),\n  },\n  weeklyReports: {\n    // Form is not visible because currently not implemented\n    name: 'weeklyReports',\n    type: 'boolean',\n    label: t('Send Me Weekly Reports'),\n    help: t(\"Reports contain a summary of what's happened within your organization.\"),\n    disabled: true,\n  },\n  deployNotifications: {\n    name: 'deployNotifications',\n    type: 'radio',\n    label: t('Send Me Deploy Notifications'),\n    choices: [\n      [2, t('Always')],\n      [3, t('Only On Deploys With My Commits')],\n      [4, t('Never')],\n    ],\n    help: t('Deploy emails include release, environment and commit overviews.'),\n  },\n  personalActivityNotifications: {\n    name: 'personalActivityNotifications',\n    type: 'boolean',\n    label: t('Notify Me About My Own Activity'),\n    help: t('Enable this to receive notifications about your own actions on Sentry.'),\n  },\n  selfAssignOnResolve: {\n    name: 'selfAssignOnResolve',\n    type: 'boolean',\n    label: t(\"Claim Unassigned Issues I've Resolved\"),\n    help: t(\"You'll receive notifications about any changes that happen afterwards.\"),\n  },\n};\n","import AsyncComponent from 'sentry/components/asyncComponent';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    return (\n      <SentryDocumentTitle title={this.getTitle()}>\n        {this.renderComponent() as React.ReactChild}\n      </SentryDocumentTitle>\n    );\n  }\n}\n","import {t} from 'sentry/locale';\nimport {SelectValue} from 'sentry/types';\n\nexport type FineTuneField = {\n  description: string;\n  title: string;\n  type: 'select';\n  defaultFieldName?: string;\n  defaultValue?: string;\n  options?: SelectValue<string>[];\n};\n\n// TODO: clean up unused fields\nexport const ACCOUNT_NOTIFICATION_FIELDS: Record<string, FineTuneField> = {\n  alerts: {\n    title: t('Issue Alert Notifications'),\n    description: t(\n      'Notifications from Alert Rules that your team has setup. You’ll always receive notifications from Alerts configured to be sent directly to you.'\n    ),\n    type: 'select',\n    options: [\n      {value: '-1', label: t('Default')},\n      {value: '1', label: t('On')},\n      {value: '0', label: t('Off')},\n    ],\n    defaultValue: '-1',\n    defaultFieldName: 'subscribeByDefault',\n  },\n  workflow: {\n    title: t('Workflow Notifications'),\n    description: t(\n      'Control workflow notifications, e.g. changes in issue assignment, resolution status, and comments.'\n    ),\n    type: 'select',\n    options: [\n      {value: '-1', label: t('Default')},\n      {value: '0', label: t('Always')},\n      {value: '1', label: t('Only on issues I subscribe to')},\n      {value: '2', label: t('Never')},\n    ],\n    defaultValue: '-1',\n    defaultFieldName: 'workflowNotifications',\n  },\n  deploy: {\n    title: t('Deploy Notifications'),\n    description: t(\n      'Control deploy notifications that include release, environment, and commit overviews.'\n    ),\n    type: 'select',\n    options: [\n      {value: '-1', label: t('Default')},\n      {value: '2', label: t('Always')},\n      {value: '3', label: t('Only on deploys with my commits')},\n      {value: '4', label: t('Never')},\n    ],\n    defaultValue: '-1',\n    defaultFieldName: 'deployNotifications',\n  },\n  reports: {\n    title: t('Weekly Reports'),\n    description: t(\n      \"Reports contain a summary of what's happened within the organization.\"\n    ),\n    type: 'select',\n    // API only saves organizations that have this disabled, so we should default to \"On\"\n    defaultValue: '1',\n    options: [\n      {value: '1', label: t('On')},\n      {value: '0', label: t('Off')},\n    ],\n    defaultFieldName: 'weeklyReports',\n  },\n  approval: {\n    title: t('Approvals'),\n    description: t('Notifications from teammates that require review or approval.'),\n    type: 'select',\n    // No choices here because it's going to have dynamic content\n    // Component will create choices,\n  },\n  quota: {\n    title: t('Quota Notifications'),\n    description: t(\n      'Control the notifications you receive for error, transaction, and attachment quota limits.'\n    ),\n    type: 'select',\n    // No choices here because it's going to have dynamic content\n    // Component will create choices,\n  },\n  spikeProtection: {\n    title: t('Spike Protection Notifications'),\n    description: t(\n      'Notifications about spikes on projects that you have enabled spike protection for.'\n    ),\n    type: 'select',\n    defaultValue: '1',\n    options: [\n      {value: '1', label: t('On')},\n      {value: '0', label: t('Off')},\n    ],\n    defaultFieldName: 'spikeProtection',\n  },\n  email: {\n    title: t('Email Routing'),\n    description: t(\n      'On a per project basis, route emails to an alternative email address.'\n    ),\n    type: 'select',\n    // No choices here because it's going to have dynamic content\n    // Component will create choices\n  },\n};\n","import Form from 'sentry/components/forms/form';\nimport JsonForm from 'sentry/components/forms/jsonForm';\nimport {t} from 'sentry/locale';\nimport {OrganizationSummary} from 'sentry/types';\nimport withOrganizations from 'sentry/utils/withOrganizations';\nimport {\n  NotificationSettingsByProviderObject,\n  NotificationSettingsObject,\n} from 'sentry/views/settings/account/notifications/constants';\nimport {\n  getParentData,\n  getParentField,\n} from 'sentry/views/settings/account/notifications/utils';\n\ntype Props = {\n  notificationSettings: NotificationSettingsObject;\n  notificationType: string;\n  onChange: (\n    changedData: NotificationSettingsByProviderObject,\n    parentId: string\n  ) => NotificationSettingsObject;\n  onSubmitSuccess: () => void;\n  organizations: OrganizationSummary[];\n};\n\nfunction NotificationSettingsByOrganization({\n  notificationType,\n  notificationSettings,\n  onChange,\n  onSubmitSuccess,\n  organizations,\n}: Props) {\n  return (\n    <Form\n      saveOnBlur\n      apiMethod=\"PUT\"\n      apiEndpoint=\"/users/me/notification-settings/\"\n      initialData={getParentData(notificationType, notificationSettings, organizations)}\n      onSubmitSuccess={onSubmitSuccess}\n    >\n      <JsonForm\n        title={t('Organizations')}\n        fields={organizations.map(organization =>\n          getParentField(notificationType, notificationSettings, organization, onChange)\n        )}\n      />\n    </Form>\n  );\n}\n\nexport default withOrganizations(NotificationSettingsByOrganization);\n","import {Fragment} from 'react';\nimport styled from '@emotion/styled';\n\nimport AsyncComponent from 'sentry/components/asyncComponent';\nimport EmptyMessage from 'sentry/components/emptyMessage';\nimport Form from 'sentry/components/forms/form';\nimport JsonForm from 'sentry/components/forms/jsonForm';\nimport Pagination from 'sentry/components/pagination';\nimport {t} from 'sentry/locale';\nimport {Project} from 'sentry/types';\nimport {sortProjects} from 'sentry/utils';\nimport {\n  MIN_PROJECTS_FOR_PAGINATION,\n  MIN_PROJECTS_FOR_SEARCH,\n  NotificationSettingsByProviderObject,\n  NotificationSettingsObject,\n} from 'sentry/views/settings/account/notifications/constants';\nimport {\n  getParentData,\n  getParentField,\n  groupByOrganization,\n} from 'sentry/views/settings/account/notifications/utils';\nimport {\n  RenderSearch,\n  SearchWrapper,\n} from 'sentry/views/settings/components/defaultSearchBar';\n\ntype Props = {\n  notificationSettings: NotificationSettingsObject;\n  notificationType: string;\n  onChange: (\n    changedData: NotificationSettingsByProviderObject,\n    parentId: string\n  ) => NotificationSettingsObject;\n  onSubmitSuccess: () => void;\n} & AsyncComponent['props'];\n\ntype State = {\n  projects: Project[];\n} & AsyncComponent['state'];\n\nclass NotificationSettingsByProjects extends AsyncComponent<Props, State> {\n  getDefaultState(): State {\n    return {\n      ...super.getDefaultState(),\n      projects: [],\n    };\n  }\n\n  getEndpoints(): ReturnType<AsyncComponent['getEndpoints']> {\n    return [['projects', '/projects/']];\n  }\n\n  /**\n   * Check the notification settings for how many projects there are.\n   */\n  getProjectCount = (): number => {\n    const {notificationType, notificationSettings} = this.props;\n\n    return Object.values(notificationSettings[notificationType]?.project || {}).length;\n  };\n\n  /**\n   * The UI expects projects to be grouped by organization but can also use\n   * this function to make a single group with all organizations.\n   */\n  getGroupedProjects = (): {[key: string]: Project[]} => {\n    const {projects: stateProjects} = this.state;\n\n    return Object.fromEntries(\n      Object.values(groupByOrganization(sortProjects(stateProjects))).map(\n        ({organization, projects}) => [`${organization.name} Projects`, projects]\n      )\n    );\n  };\n\n  renderBody() {\n    const {notificationType, notificationSettings, onChange, onSubmitSuccess} =\n      this.props;\n    const {projects, projectsPageLinks} = this.state;\n\n    const canSearch = this.getProjectCount() >= MIN_PROJECTS_FOR_SEARCH;\n    const shouldPaginate = projects.length >= MIN_PROJECTS_FOR_PAGINATION;\n\n    const renderSearch: RenderSearch = ({defaultSearchBar}) => (\n      <StyledSearchWrapper>{defaultSearchBar}</StyledSearchWrapper>\n    );\n\n    return (\n      <Fragment>\n        {canSearch &&\n          this.renderSearchInput({\n            stateKey: 'projects',\n            url: '/projects/',\n            placeholder: t('Search Projects'),\n            children: renderSearch,\n          })}\n        <Form\n          saveOnBlur\n          apiMethod=\"PUT\"\n          apiEndpoint=\"/users/me/notification-settings/\"\n          initialData={getParentData(notificationType, notificationSettings, projects)}\n          onSubmitSuccess={onSubmitSuccess}\n        >\n          {projects.length === 0 ? (\n            <EmptyMessage>{t('No projects found')}</EmptyMessage>\n          ) : (\n            Object.entries(this.getGroupedProjects()).map(([groupTitle, parents]) => (\n              <JsonForm\n                collapsible\n                key={groupTitle}\n                title={groupTitle}\n                fields={parents.map(parent =>\n                  getParentField(notificationType, notificationSettings, parent, onChange)\n                )}\n              />\n            ))\n          )}\n        </Form>\n        {canSearch && shouldPaginate && (\n          <Pagination pageLinks={projectsPageLinks} {...this.props} />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default NotificationSettingsByProjects;\n\nconst StyledSearchWrapper = styled(SearchWrapper)`\n  * {\n    width: 100%;\n  }\n`;\n","import styled from '@emotion/styled';\n\nimport {Alert} from 'sentry/components/alert';\nimport {t} from 'sentry/locale';\nimport {OrganizationSummary} from 'sentry/types';\n\ntype Props = {\n  organizations: OrganizationSummary[];\n};\n\nfunction UnlinkedAlert({organizations}: Props) {\n  return (\n    <StyledAlert type=\"warning\" showIcon>\n      {t(\n        'You\\'ve selected Slack as your delivery method, but do not have a linked account for the following organizations. You\\'ll receive email notifications instead until you type \"/sentry link\" into your Slack workspace to link your account. If slash commands are not working, please re-install the Slack integration.'\n      )}\n      <ul>\n        {organizations.map(organization => (\n          <li key={organization.id}>{organization.slug}</li>\n        ))}\n      </ul>\n    </StyledAlert>\n  );\n}\n\nconst StyledAlert = styled(Alert)`\n  margin: 20px 0px;\n`;\n\nexport default UnlinkedAlert;\n","import {Fragment} from 'react';\n\nimport AsyncComponent from 'sentry/components/asyncComponent';\nimport Form from 'sentry/components/forms/form';\nimport JsonForm from 'sentry/components/forms/jsonForm';\nimport {Field} from 'sentry/components/forms/types';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\nimport {t} from 'sentry/locale';\nimport {Organization, OrganizationSummary} from 'sentry/types';\nimport {OrganizationIntegration} from 'sentry/types/integrations';\nimport {trackAnalytics} from 'sentry/utils/analytics';\nimport withOrganizations from 'sentry/utils/withOrganizations';\nimport {\n  ALL_PROVIDER_NAMES,\n  CONFIRMATION_MESSAGE,\n  NotificationSettingsByProviderObject,\n  NotificationSettingsObject,\n} from 'sentry/views/settings/account/notifications/constants';\nimport {ACCOUNT_NOTIFICATION_FIELDS} from 'sentry/views/settings/account/notifications/fields';\nimport {\n  NOTIFICATION_SETTING_FIELDS,\n  QUOTA_FIELDS,\n} from 'sentry/views/settings/account/notifications/fields2';\nimport NotificationSettingsByOrganization from 'sentry/views/settings/account/notifications/notificationSettingsByOrganization';\nimport NotificationSettingsByProjects from 'sentry/views/settings/account/notifications/notificationSettingsByProjects';\nimport {Identity} from 'sentry/views/settings/account/notifications/types';\nimport UnlinkedAlert from 'sentry/views/settings/account/notifications/unlinkedAlert';\nimport {\n  getCurrentDefault,\n  getCurrentProviders,\n  getParentIds,\n  getStateToPutForDefault,\n  getStateToPutForParent,\n  getStateToPutForProvider,\n  isEverythingDisabled,\n  isGroupedByProject,\n  isSufficientlyComplex,\n  mergeNotificationSettings,\n} from 'sentry/views/settings/account/notifications/utils';\nimport SettingsPageHeader from 'sentry/views/settings/components/settingsPageHeader';\nimport TextBlock from 'sentry/views/settings/components/text/textBlock';\n\ntype Props = {\n  notificationType: string;\n  organizations: Organization[];\n} & AsyncComponent['props'];\n\ntype State = {\n  identities: Identity[];\n  notificationSettings: NotificationSettingsObject;\n  organizationIntegrations: OrganizationIntegration[];\n} & AsyncComponent['state'];\n\nconst typeMappedChildren = {\n  quota: [\n    'quotaErrors',\n    'quotaTransactions',\n    'quotaAttachments',\n    'quotaReplays',\n    'quotaWarnings',\n    'quotaSpendAllocations',\n  ],\n};\n\nconst getQueryParams = (notificationType: string) => {\n  // if we need multiple settings on this page\n  // then omit the type so we can load all settings\n  if (notificationType in typeMappedChildren) {\n    return null;\n  }\n  return {type: notificationType};\n};\n\nclass NotificationSettingsByType extends AsyncComponent<Props, State> {\n  getDefaultState(): State {\n    return {\n      ...super.getDefaultState(),\n      notificationSettings: {},\n      identities: [],\n      organizationIntegrations: [],\n    };\n  }\n\n  getEndpoints(): ReturnType<AsyncComponent['getEndpoints']> {\n    const {notificationType} = this.props;\n    return [\n      [\n        'notificationSettings',\n        `/users/me/notification-settings/`,\n        {query: getQueryParams(notificationType)},\n      ],\n      ['identities', `/users/me/identities/`, {query: {provider: 'slack'}}],\n      [\n        'organizationIntegrations',\n        `/users/me/organization-integrations/`,\n        {query: {provider: 'slack'}},\n      ],\n    ];\n  }\n\n  componentDidMount() {\n    super.componentDidMount();\n    trackAnalytics('notification_settings.tuning_page_viewed', {\n      organization: null,\n      notification_type: this.props.notificationType,\n    });\n  }\n\n  trackTuningUpdated(tuningFieldType: string) {\n    trackAnalytics('notification_settings.updated_tuning_setting', {\n      organization: null,\n      notification_type: this.props.notificationType,\n      tuning_field_type: tuningFieldType,\n    });\n  }\n\n  /* Methods responsible for updating state and hitting the API. */\n\n  getStateToPutForProvider = (\n    changedData: NotificationSettingsByProviderObject\n  ): NotificationSettingsObject => {\n    const {notificationType} = this.props;\n    const {notificationSettings} = this.state;\n\n    const updatedNotificationSettings = getStateToPutForProvider(\n      notificationType,\n      notificationSettings,\n      changedData\n    );\n\n    this.setState({\n      notificationSettings: mergeNotificationSettings(\n        notificationSettings,\n        updatedNotificationSettings\n      ),\n    });\n\n    return updatedNotificationSettings;\n  };\n\n  getStateToPutForDependentSetting = (\n    changedData: NotificationSettingsByProviderObject,\n    notificationType: string\n  ) => {\n    const value = changedData[notificationType];\n    const {notificationSettings} = this.state;\n\n    // parent setting will control the which providers we send to\n    // just set every provider to the same value for the child/dependent setting\n    const userSettings = ALL_PROVIDER_NAMES.reduce((accum, provider) => {\n      accum[provider] = value;\n      return accum;\n    }, {});\n\n    // setting is a user-only setting\n    const updatedNotificationSettings = {\n      [notificationType]: {\n        user: {\n          me: userSettings,\n        },\n      },\n    };\n\n    this.setState({\n      notificationSettings: mergeNotificationSettings(\n        notificationSettings,\n        updatedNotificationSettings\n      ),\n    });\n\n    return updatedNotificationSettings;\n  };\n\n  getStateToPutForDefault = (\n    changedData: NotificationSettingsByProviderObject\n  ): NotificationSettingsObject => {\n    const {notificationType} = this.props;\n    const {notificationSettings} = this.state;\n\n    const updatedNotificationSettings = getStateToPutForDefault(\n      notificationType,\n      notificationSettings,\n      changedData,\n      getParentIds(notificationType, notificationSettings)\n    );\n\n    this.setState({\n      notificationSettings: mergeNotificationSettings(\n        notificationSettings,\n        updatedNotificationSettings\n      ),\n    });\n\n    return updatedNotificationSettings;\n  };\n\n  getStateToPutForParent = (\n    changedData: NotificationSettingsByProviderObject,\n    parentId: string\n  ): NotificationSettingsObject => {\n    const {notificationType} = this.props;\n    const {notificationSettings} = this.state;\n\n    const updatedNotificationSettings = getStateToPutForParent(\n      notificationType,\n      notificationSettings,\n      changedData,\n      parentId\n    );\n\n    this.setState({\n      notificationSettings: mergeNotificationSettings(\n        notificationSettings,\n        updatedNotificationSettings\n      ),\n    });\n    return updatedNotificationSettings;\n  };\n\n  /* Methods responsible for rendering the page. */\n\n  getInitialData(): {[key: string]: string | string[]} {\n    const {notificationType} = this.props;\n    const {notificationSettings} = this.state;\n\n    // TODO: Backend should be in charge of providing defaults since it depends on the type\n    const provider = !isEverythingDisabled(notificationType, notificationSettings)\n      ? getCurrentProviders(notificationType, notificationSettings)\n      : ['email', 'slack'];\n\n    const childTypes: string[] = typeMappedChildren[notificationType] || [];\n    const childTypesDefaults = Object.fromEntries(\n      childTypes.map(childType => [\n        childType,\n        getCurrentDefault(childType, notificationSettings),\n      ])\n    );\n\n    return {\n      [notificationType]: getCurrentDefault(notificationType, notificationSettings),\n      provider,\n      ...childTypesDefaults,\n    };\n  }\n\n  getFields(): Field[] {\n    const {notificationType} = this.props;\n    const {notificationSettings} = this.state;\n\n    const help = isGroupedByProject(notificationType)\n      ? t('This is the default for all projects.')\n      : t('This is the default for all organizations.');\n\n    const defaultField: Field = Object.assign(\n      {},\n      NOTIFICATION_SETTING_FIELDS[notificationType],\n      {\n        help,\n        getData: data => this.getStateToPutForDefault(data),\n      }\n    );\n    if (isSufficientlyComplex(notificationType, notificationSettings)) {\n      defaultField.confirm = {never: CONFIRMATION_MESSAGE};\n    }\n\n    const fields: Field[] = [defaultField];\n    if (!isEverythingDisabled(notificationType, notificationSettings)) {\n      fields.push(\n        Object.assign(\n          {\n            help: t('Where personal notifications will be sent.'),\n            getData: data => this.getStateToPutForProvider(data),\n          },\n          NOTIFICATION_SETTING_FIELDS.provider\n        )\n      );\n    }\n\n    // if a quota notification is not disabled, add in our dependent fields\n    if (\n      notificationType === 'quota' &&\n      !isEverythingDisabled(notificationType, notificationSettings)\n    ) {\n      fields.push(\n        ...QUOTA_FIELDS.map(field => ({\n          ...field,\n          type: 'select' as const,\n          getData: data =>\n            this.getStateToPutForDependentSetting(\n              data as NotificationSettingsByProviderObject,\n              field.name\n            ),\n        }))\n      );\n    }\n\n    return fields;\n  }\n\n  getUnlinkedOrgs = (): OrganizationSummary[] => {\n    const {organizations} = this.props;\n    const {identities, organizationIntegrations} = this.state;\n    const integrationExternalIDsByOrganizationID = Object.fromEntries(\n      organizationIntegrations.map(organizationIntegration => [\n        organizationIntegration.organizationId,\n        organizationIntegration.externalId,\n      ])\n    );\n\n    const identitiesByExternalId = Object.fromEntries(\n      identities.map(identity => [identity?.identityProvider?.externalId, identity])\n    );\n\n    return organizations.filter(organization => {\n      const externalID = integrationExternalIDsByOrganizationID[organization.id];\n      const identity = identitiesByExternalId[externalID];\n      return identity === undefined || identity === null;\n    });\n  };\n\n  renderBody() {\n    const {notificationType} = this.props;\n    const {notificationSettings} = this.state;\n    const hasSlack = getCurrentProviders(notificationType, notificationSettings).includes(\n      'slack'\n    );\n    const unlinkedOrgs = this.getUnlinkedOrgs();\n    const {title, description} = ACCOUNT_NOTIFICATION_FIELDS[notificationType];\n    return (\n      <Fragment>\n        <SentryDocumentTitle title={title} />\n        <SettingsPageHeader title={title} />\n        {description && <TextBlock>{description}</TextBlock>}\n        {hasSlack && unlinkedOrgs.length > 0 && (\n          <UnlinkedAlert organizations={unlinkedOrgs} />\n        )}\n        <Form\n          saveOnBlur\n          apiMethod=\"PUT\"\n          apiEndpoint=\"/users/me/notification-settings/\"\n          initialData={this.getInitialData()}\n          onSubmitSuccess={() => this.trackTuningUpdated('general')}\n        >\n          <JsonForm\n            title={\n              isGroupedByProject(notificationType)\n                ? t('All Projects')\n                : t('All Organizations')\n            }\n            fields={this.getFields()}\n          />\n        </Form>\n        {!isEverythingDisabled(notificationType, notificationSettings) &&\n          (isGroupedByProject(notificationType) ? (\n            <NotificationSettingsByProjects\n              notificationType={notificationType}\n              notificationSettings={notificationSettings}\n              onChange={this.getStateToPutForParent}\n              onSubmitSuccess={() => this.trackTuningUpdated('project')}\n            />\n          ) : (\n            <NotificationSettingsByOrganization\n              notificationType={notificationType}\n              notificationSettings={notificationSettings}\n              onChange={this.getStateToPutForParent}\n              onSubmitSuccess={() => this.trackTuningUpdated('organization')}\n            />\n          ))}\n      </Fragment>\n    );\n  }\n}\n\nexport default withOrganizations(NotificationSettingsByType);\n","import {Fragment} from 'react';\nimport {RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport EmptyMessage from 'sentry/components/emptyMessage';\nimport SelectField from 'sentry/components/forms/fields/selectField';\nimport Form from 'sentry/components/forms/form';\nimport JsonForm from 'sentry/components/forms/jsonForm';\nimport Pagination from 'sentry/components/pagination';\nimport {Panel, PanelBody, PanelHeader} from 'sentry/components/panels';\nimport {fields} from 'sentry/data/forms/accountNotificationSettings';\nimport {t} from 'sentry/locale';\nimport {Organization, Project, UserEmail} from 'sentry/types';\nimport withOrganizations from 'sentry/utils/withOrganizations';\nimport AsyncView from 'sentry/views/asyncView';\nimport {\n  ACCOUNT_NOTIFICATION_FIELDS,\n  FineTuneField,\n} from 'sentry/views/settings/account/notifications/fields';\nimport NotificationSettingsByType from 'sentry/views/settings/account/notifications/notificationSettingsByType';\nimport {\n  getNotificationTypeFromPathname,\n  groupByOrganization,\n  isGroupedByProject,\n} from 'sentry/views/settings/account/notifications/utils';\nimport SettingsPageHeader from 'sentry/views/settings/components/settingsPageHeader';\nimport TextBlock from 'sentry/views/settings/components/text/textBlock';\n\nconst PanelBodyLineItem = styled(PanelBody)`\n  font-size: 1rem;\n  &:not(:last-child) {\n    border-bottom: 1px solid ${p => p.theme.innerBorder};\n  }\n`;\n\nconst accountNotifications = [\n  'alerts',\n  'deploy',\n  'workflow',\n  'approval',\n  'quota',\n  'spikeProtection',\n];\n\ntype ANBPProps = {\n  field: FineTuneField;\n  projects: Project[];\n};\n\nfunction AccountNotificationsByProject({projects, field}: ANBPProps) {\n  const projectsByOrg = groupByOrganization(projects);\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const {title, description, ...fieldConfig} = field;\n\n  // Display as select box in this view regardless of the type specified in the config\n  const data = Object.values(projectsByOrg).map(org => ({\n    name: org.organization.name,\n    projects: org.projects.map(project => ({\n      ...fieldConfig,\n      // `name` key refers to field name\n      // we use project.id because slugs are not unique across orgs\n      name: project.id,\n      label: project.slug,\n    })),\n  }));\n\n  return (\n    <Fragment>\n      {data.map(({name, projects: projectFields}) => (\n        <div key={name}>\n          <PanelHeader>{name}</PanelHeader>\n          {projectFields.map(f => (\n            <PanelBodyLineItem key={f.name}>\n              <SelectField\n                defaultValue={f.defaultValue}\n                name={f.name}\n                options={f.options}\n                label={f.label}\n              />\n            </PanelBodyLineItem>\n          ))}\n        </div>\n      ))}\n    </Fragment>\n  );\n}\n\ntype ANBOProps = {\n  field: FineTuneField;\n  organizations: Organization[];\n};\n\nfunction AccountNotificationsByOrganization({organizations, field}: ANBOProps) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const {title, description, ...fieldConfig} = field;\n\n  // Display as select box in this view regardless of the type specified in the config\n  const data = organizations.map(org => ({\n    ...fieldConfig,\n    // `name` key refers to field name\n    // we use org.id to remain consistent project.id use (which is required because slugs are not unique across orgs)\n    name: org.id,\n    label: org.slug,\n  }));\n\n  return (\n    <Fragment>\n      {data.map(f => (\n        <PanelBodyLineItem key={f.name}>\n          <SelectField\n            defaultValue={f.defaultValue}\n            name={f.name}\n            options={f.options}\n            label={f.label}\n          />\n        </PanelBodyLineItem>\n      ))}\n    </Fragment>\n  );\n}\n\nconst AccountNotificationsByOrganizationContainer = withOrganizations(\n  AccountNotificationsByOrganization\n);\n\ntype Props = AsyncView['props'] &\n  RouteComponentProps<{fineTuneType: string}, {}> & {\n    organizations: Organization[];\n  };\n\ntype State = AsyncView['state'] & {\n  emails: UserEmail[] | null;\n  fineTuneData: Record<string, any> | null;\n  notifications: Record<string, any> | null;\n  projects: Project[] | null;\n};\n\nclass AccountNotificationFineTuning extends AsyncView<Props, State> {\n  getEndpoints(): ReturnType<AsyncView['getEndpoints']> {\n    const {fineTuneType: pathnameType} = this.props.params;\n    const fineTuneType = getNotificationTypeFromPathname(pathnameType);\n    const endpoints = [\n      ['notifications', '/users/me/notifications/'],\n      ['fineTuneData', `/users/me/notifications/${fineTuneType}/`],\n    ];\n\n    if (isGroupedByProject(fineTuneType)) {\n      endpoints.push(['projects', '/projects/']);\n    }\n\n    endpoints.push(['emails', '/users/me/emails/']);\n    if (fineTuneType === 'email') {\n      endpoints.push(['emails', '/users/me/emails/']);\n    }\n\n    return endpoints as ReturnType<AsyncView['getEndpoints']>;\n  }\n\n  // Return a sorted list of user's verified emails\n  get emailChoices() {\n    return (\n      this.state.emails\n        ?.filter(({isVerified}) => isVerified)\n        ?.sort((a, b) => {\n          // Sort by primary -> email\n          if (a.isPrimary) {\n            return -1;\n          }\n          if (b.isPrimary) {\n            return 1;\n          }\n\n          return a.email < b.email ? -1 : 1;\n        }) ?? []\n    );\n  }\n\n  renderBody() {\n    const {params} = this.props;\n    const {fineTuneType: pathnameType} = params;\n    const fineTuneType = getNotificationTypeFromPathname(pathnameType);\n\n    if (accountNotifications.includes(fineTuneType)) {\n      return <NotificationSettingsByType notificationType={fineTuneType} />;\n    }\n\n    const {notifications, projects, fineTuneData, projectsPageLinks} = this.state;\n\n    const isProject = isGroupedByProject(fineTuneType);\n    const field = ACCOUNT_NOTIFICATION_FIELDS[fineTuneType];\n    const {title, description} = field;\n\n    const [stateKey, url] = isProject ? this.getEndpoints()[2] : [];\n    const hasProjects = !!projects?.length;\n\n    if (fineTuneType === 'email') {\n      // Fetch verified email addresses\n      field.options = this.emailChoices.map(({email}) => ({value: email, label: email}));\n    }\n\n    if (!notifications || !fineTuneData) {\n      return null;\n    }\n\n    return (\n      <div>\n        <SettingsPageHeader title={title} />\n        {description && <TextBlock>{description}</TextBlock>}\n\n        {field &&\n          field.defaultFieldName &&\n          // not implemented yet\n          field.defaultFieldName !== 'weeklyReports' && (\n            <Form\n              saveOnBlur\n              apiMethod=\"PUT\"\n              apiEndpoint=\"/users/me/notifications/\"\n              initialData={notifications}\n            >\n              <JsonForm\n                title={`Default ${title}`}\n                fields={[fields[field.defaultFieldName]]}\n              />\n            </Form>\n          )}\n        <Panel>\n          <PanelBody>\n            <PanelHeader hasButtons={isProject}>\n              <Heading>{isProject ? t('Projects') : t('Organizations')}</Heading>\n              <div>\n                {isProject &&\n                  this.renderSearchInput({\n                    placeholder: t('Search Projects'),\n                    url,\n                    stateKey,\n                  })}\n              </div>\n            </PanelHeader>\n\n            <Form\n              saveOnBlur\n              apiMethod=\"PUT\"\n              apiEndpoint={`/users/me/notifications/${fineTuneType}/`}\n              initialData={fineTuneData}\n            >\n              {isProject && hasProjects && (\n                <AccountNotificationsByProject projects={projects!} field={field} />\n              )}\n\n              {isProject && !hasProjects && (\n                <EmptyMessage>{t('No projects found')}</EmptyMessage>\n              )}\n\n              {!isProject && (\n                <AccountNotificationsByOrganizationContainer field={field} />\n              )}\n            </Form>\n          </PanelBody>\n        </Panel>\n\n        {projects && <Pagination pageLinks={projectsPageLinks} {...this.props} />}\n      </div>\n    );\n  }\n}\n\nconst Heading = styled('div')`\n  flex: 1;\n`;\n\nexport default AccountNotificationFineTuning;\n","import styled from '@emotion/styled';\n\nimport {space} from 'sentry/styles/space';\nimport AsyncView from 'sentry/views/asyncView';\n\nexport type RenderSearch = React.ComponentProps<\n  typeof AsyncView.prototype.renderSearchInput\n>['children'];\n\nexport const SearchWrapper = styled('div')`\n  display: flex;\n  grid-template-columns: 1fr max-content;\n  gap: ${space(1.5)};\n  margin-top: ${space(4)};\n  margin-bottom: ${space(1.5)};\n  position: relative;\n`;\n"],"names":["route","fields","subscribeByDefault","name","type","label","t","help","workflowNotifications","choices","weeklyReports","disabled","deployNotifications","personalActivityNotifications","selfAssignOnResolve","AsyncView","AsyncComponent","getTitle","render","_jsx","SentryDocumentTitle","title","this","children","renderComponent","displayName","ACCOUNT_NOTIFICATION_FIELDS","alerts","description","options","value","defaultValue","defaultFieldName","workflow","deploy","reports","approval","quota","spikeProtection","email","NotificationSettingsByOrganization","_ref","notificationType","notificationSettings","onChange","onSubmitSuccess","organizations","Form","saveOnBlur","apiMethod","apiEndpoint","initialData","getParentData","JsonForm","map","organization","getParentField","withOrganizations","NotificationSettingsByProjects","constructor","arguments","_defineProperty","props","Object","values","project","length","projects","stateProjects","state","fromEntries","groupByOrganization","sortProjects","getDefaultState","super","getEndpoints","renderBody","projectsPageLinks","canSearch","getProjectCount","MIN_PROJECTS_FOR_SEARCH","shouldPaginate","MIN_PROJECTS_FOR_PAGINATION","_jsxs","Fragment","renderSearchInput","stateKey","url","placeholder","_ref2","defaultSearchBar","StyledSearchWrapper","EmptyMessage","entries","getGroupedProjects","_ref3","groupTitle","parents","collapsible","parent","Pagination","pageLinks","_styled","SearchWrapper","target","styles","UnlinkedAlert","StyledAlert","showIcon","slug","id","Alert","typeMappedChildren","getQueryParams","NotificationSettingsByType","changedData","updatedNotificationSettings","getStateToPutForProvider","setState","mergeNotificationSettings","user","me","ALL_PROVIDER_NAMES","accum","provider","getStateToPutForDefault","getParentIds","parentId","getStateToPutForParent","identities","organizationIntegrations","integrationExternalIDsByOrganizationID","organizationIntegration","organizationId","externalId","identitiesByExternalId","identity","identityProvider","filter","externalID","query","componentDidMount","trackAnalytics","notification_type","trackTuningUpdated","tuningFieldType","tuning_field_type","getInitialData","isEverythingDisabled","getCurrentProviders","childTypes","childTypesDefaults","childType","getCurrentDefault","getFields","isGroupedByProject","defaultField","assign","NOTIFICATION_SETTING_FIELDS","getData","data","isSufficientlyComplex","confirm","never","CONFIRMATION_MESSAGE","push","QUOTA_FIELDS","field","getStateToPutForDependentSetting","hasSlack","includes","unlinkedOrgs","getUnlinkedOrgs","SettingsPageHeader","TextBlock","PanelBodyLineItem","PanelBody","p","theme","innerBorder","accountNotifications","AccountNotificationsByProject","projectsByOrg","fieldConfig","org","projectFields","PanelHeader","f","SelectField","AccountNotificationsByOrganization","AccountNotificationsByOrganizationContainer","AccountNotificationFineTuning","fineTuneType","pathnameType","params","getNotificationTypeFromPathname","endpoints","emailChoices","emails","_ref4","isVerified","sort","a","b","isPrimary","notifications","fineTuneData","isProject","hasProjects","_ref5","Panel","hasButtons","Heading","space"],"sourceRoot":""}