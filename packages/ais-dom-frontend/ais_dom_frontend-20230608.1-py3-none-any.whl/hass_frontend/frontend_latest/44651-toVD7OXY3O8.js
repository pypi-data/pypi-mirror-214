"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[44651,22814,31203],{57966:(e,t,i)=>{i.d(t,{z:()=>a});const a=e=>(t,i)=>e.includes(t,i)},19362:(e,t,i)=>{function a(e){const t=e.split(":").map(Number);return 3600*t[0]+60*t[1]+t[2]}i.d(t,{Z:()=>a})},91168:(e,t,i)=>{i.d(t,{Z:()=>n});const a=e=>e<10?`0${e}`:e;function n(e){const t=Math.floor(e/3600),i=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return t>0?`${t}:${a(i)}:${a(n)}`:i>0?`${i}:${a(n)}`:n>0?""+n:null}},81545:(e,t,i)=>{var a=i(17463),n=i(34541),o=i(47838),s=(i(65666),i(68144)),r=i(79932),d=i(74265);(0,a.Z)([(0,r.Mo)("ha-button-menu")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",key:d.gA,value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"corner",value:()=>"BOTTOM_START"},{kind:"field",decorators:[(0,r.Cb)()],key:"menuCorner",value:()=>"START"},{kind:"field",decorators:[(0,r.Cb)({type:Number})],key:"x",value:()=>null},{kind:"field",decorators:[(0,r.Cb)({type:Number})],key:"y",value:()=>null},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"multi",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"activatable",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"disabled",value:()=>!1},{kind:"field",decorators:[(0,r.Cb)({type:Boolean})],key:"fixed",value:()=>!1},{kind:"field",decorators:[(0,r.IO)("mwc-menu",!0)],key:"_menu",value:void 0},{kind:"get",key:"items",value:function(){var e;return null===(e=this._menu)||void 0===e?void 0:e.items}},{kind:"get",key:"selected",value:function(){var e;return null===(e=this._menu)||void 0===e?void 0:e.selected}},{kind:"method",key:"focus",value:function(){var e,t;null!==(e=this._menu)&&void 0!==e&&e.open?this._menu.focusItemAtIndex(0):null===(t=this._triggerButton)||void 0===t||t.focus()}},{kind:"method",key:"render",value:function(){return s.dy` <div @click="${this._handleClick}"> <slot name="trigger" @slotchange="${this._setTriggerAria}"></slot> </div> <mwc-menu .corner="${this.corner}" .menuCorner="${this.menuCorner}" .fixed="${this.fixed}" .multi="${this.multi}" .activatable="${this.activatable}" .y="${this.y}" .x="${this.x}"> <slot></slot> </mwc-menu> `}},{kind:"method",key:"firstUpdated",value:function(e){(0,n.Z)((0,o.Z)(i.prototype),"firstUpdated",this).call(this,e),"rtl"===document.dir&&this.updateComplete.then((()=>{this.querySelectorAll("mwc-list-item").forEach((e=>{const t=document.createElement("style");t.innerHTML="span.material-icons:first-of-type { margin-left: var(--mdc-list-item-graphic-margin, 32px) !important; margin-right: 0px !important;}",e.shadowRoot.appendChild(t)}))}))}},{kind:"method",key:"_handleClick",value:function(){this.disabled||(this._menu.anchor=this,this._menu.show())}},{kind:"get",key:"_triggerButton",value:function(){return this.querySelector('ha-icon-button[slot="trigger"], mwc-button[slot="trigger"]')}},{kind:"method",key:"_setTriggerAria",value:function(){this._triggerButton&&(this._triggerButton.ariaHasPopup="menu")}},{kind:"get",static:!0,key:"styles",value:function(){return s.iv`:host{display:inline-block;position:relative}::slotted([disabled]){color:var(--disabled-text-color)}`}}]}}),s.oi)},22814:(e,t,i)=>{i.d(t,{TZ:()=>s,W2:()=>o,iI:()=>n,oT:()=>a});const a=e=>e.map((e=>{if("string"!==e.type)return e;switch(e.name){case"username":return{...e,autocomplete:"username"};case"password":return{...e,autocomplete:"current-password"};case"code":return{...e,autocomplete:"one-time-code"};default:return e}})),n=(e,t)=>e.callWS({type:"auth/sign_path",path:t}),o=async(e,t,i,a)=>e.callWS({type:"config/auth_provider/homeassistant/create",user_id:t,username:i,password:a}),s=async(e,t,i)=>e.callWS({type:"config/auth_provider/homeassistant/admin_change_password",user_id:t,password:i})},56007:(e,t,i)=>{i.d(t,{PX:()=>s,V_:()=>r,lz:()=>o,nZ:()=>n,rk:()=>l});var a=i(57966);const n="unavailable",o="unknown",s="off",r=[n,o],d=[n,o,s],l=(0,a.z)(r);(0,a.z)(d)},73734:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.d(t,{WH:()=>h,aT:()=>d,eF:()=>l,mK:()=>u,mZ:()=>c,rv:()=>m});var n=i(19362),o=i(91168),s=i(29171),r=e([s]);s=(r.then?(await r)():r)[0];const d=e=>e.callWS({type:"timer/list"}),l=(e,t)=>e.callWS({type:"timer/create",...t}),c=(e,t,i)=>e.callWS({type:"timer/update",timer_id:t,...i}),h=(e,t)=>e.callWS({type:"timer/delete",timer_id:t}),u=e=>{if(!e.attributes.remaining)return;let t=(0,n.Z)(e.attributes.remaining);if("active"===e.state){const i=(new Date).getTime(),a=new Date(e.last_changed).getTime();t=Math.max(t-(i-a)/1e3,0)}return t},m=(e,t,i)=>{if(!t)return null;if("idle"===t.state||0===i)return(0,s.D1)(e.localize,t,e.locale,e.entities);let a=(0,o.Z)(i||0);return"paused"===t.state&&(a=`${a} (${(0,s.D1)(e.localize,t,e.locale,e.entities)})`),a};a()}catch(e){a(e)}}))},43408:(e,t,i)=>{i.d(t,{H:()=>a});const a=e=>e.callWS({type:"webhook/list"})},94469:(e,t,i)=>{i.d(t,{j:()=>o});var a=i(47181);const n=()=>Promise.all([i.e(28597),i.e(28426),i.e(56299),i.e(97215),i.e(68200),i.e(88700),i.e(38538)]).then(i.bind(i,38538)),o=(e,t)=>{(0,a.B)(e,"show-dialog",{dialogTag:"dialog-ais-file",dialogImport:n,dialogParams:t})}},96321:(e,t,i)=>{var a=i(17463),n=i(34541),o=i(47838),s=i(68144),r=i(79932),d=(i(53973),i(89194),i(22098),i(43408)),l=i(47181);var c=i(11654),h=i(7323);let u=(0,a.Z)(null,(function(e,t){class a extends t{constructor(...t){super(...t),e(this)}}return{F:a,d:[{kind:"field",decorators:[(0,r.Cb)()],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"_localHooks",value:void 0},{kind:"get",static:!0,key:"properties",value:function(){return{hass:{},_localHooks:{}}}},{kind:"method",key:"connectedCallback",value:function(){(0,n.Z)((0,o.Z)(a.prototype),"connectedCallback",this).call(this),this._fetchData()}},{kind:"method",key:"render",value:function(){return s.dy` <ha-card header="Wywołania zwrotne HTTP"> <div class="card-content"> Wywołania zwrotne HTTP (Webhook) używane są do udostępniania powiadomień o zdarzeniach. Wszystko, co jest skonfigurowane do uruchamiania przez wywołanie zwrotne, ma publicznie dostępny unikalny adres URL, aby umożliwić wysyłanie danych do Asystenta domowego z dowolnego miejsca. ${this._renderBody()} <div class="footer"> <a href="https://www.home-assistant.io/docs/automation/trigger/#webhook-trigger" target="_blank"> Dowiedz się więcej o zwrotnym wywołaniu HTTP. </a> </div> </div> </ha-card> `}},{kind:"method",key:"_renderBody",value:function(){return this._localHooks?1===this._localHooks.length?s.dy` <div class="body-text"> Wygląda na to, że nie masz jeszcze zdefiniowanych żadnych wywołań zwrotnych. Rozpocznij od skonfigurowania <a href="/config/integrations"> integracji opartej na wywołaniu zwrotnym </a> lub przez tworzenie <a href="/config/automation/new"> automatyzacji opartej na wyzwalaczu webhook </a>. </div> `:this._localHooks.map((e=>s.dy` ${"aisdomprocesscommandfromframe"===e.webhook_id?s.dy` <div></div> `:s.dy` <div class="webhook" .entry="${e}"> <paper-item-body two-line> <div> ${e.name} ${e.domain===e.name.toLowerCase()?"":` (${e.domain})`} </div> <div secondary>${e.webhook_id}</div> </paper-item-body> <mwc-button @click="${this._handleManageButton}"> Pokaż </mwc-button> </div> `} `)):s.dy` <div class="body-text">Pobieranie…</div> `}},{kind:"method",key:"_showDialog",value:function(e){const t=this._localHooks.find((t=>t.webhook_id===e));var a,n;a=this,n={webhook:t},(0,l.B)(a,"show-dialog",{dialogTag:"dialog-manage-ais-cloudhook",dialogImport:()=>Promise.all([i.e(46992),i.e(42977),i.e(31338),i.e(28597),i.e(86215)]).then(i.bind(i,96519)),dialogParams:n})}},{kind:"method",key:"_handleManageButton",value:function(e){const t=e.currentTarget.parentElement.entry;this._showDialog(t.webhook_id)}},{kind:"method",key:"_fetchData",value:async function(){if(!(0,h.p)(this.hass,"webhook"))return void(this._localHooks=[]);const e=await(0,d.H)(this.hass);this._localHooks=e.filter((e=>!e.local_only&&("mobile_app"!==e.domain||"Deleted Webhook"!==e.name)))}},{kind:"get",static:!0,key:"styles",value:function(){return[c.Qx,s.iv`.body-text{padding:8px 0}.webhook{display:flex;padding:4px 0}.progress{margin-right:16px;display:flex;flex-direction:column;justify-content:center}.footer{padding-top:16px}.body-text a,.footer a{color:var(--primary-color)}`]}}]}}),s.oi);customElements.define("ais-webhooks",u)},73142:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.r(t);var n=i(17463),o=(i(44577),i(81545),i(31203)),s=(i(27289),i(12730),i(68144)),r=i(79932),d=(i(60010),i(38353),i(27213),i(96321),i(43709),i(94469)),l=e([o]);o=(l.then?(await l)():l)[0];const c="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z";(0,n.Z)([(0,r.Mo)("ha-config-ais-dom-config-remote")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"_qrCode",value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"narrow",value:void 0},{kind:"field",decorators:[(0,r.Cb)()],key:"remoteDomain",value:void 0},{kind:"method",key:"_generateQR",value:async function(){const e=await i.e(51970).then(i.t.bind(i,51970,19)),t=await e.toCanvas(`${this.remoteDomain}`,{width:280,errorCorrectionLevel:"Q"}),a=t.getContext("2d"),n=new Image;n.src="/static/icons/favicon-192x192.png",await new Promise((e=>{n.onload=e})),a.drawImage(n,t.width/3,t.height/3,t.width/3,t.height/3),this._qrCode=s.dy`<img src="${t.toDataURL()}">`}},{kind:"method",key:"changeRemote",value:function(){this.hass.callService("input_boolean","toggle",{entity_id:"input_boolean.ais_remote_access"})}},{kind:"method",key:"enableGatePariringByPin",value:function(){this.hass.callService("ais_cloud","enable_gate_pairing_by_pin")}},{kind:"method",key:"firstUpdated",value:function(){this._generateQR()}},{kind:"method",key:"render",value:function(){return this.remoteDomain="https://"+this.hass.states["sensor.ais_secure_android_id_dom"].state+".paczka.pro",s.dy` <hass-subpage header="Konfiguracja bramki AIS dom"> ${"on"===this.hass.states["input_boolean.ais_remote_access"].state?s.dy` <ha-button-menu corner="BOTTOM_START" slot="toolbar-icon"> <mwc-icon-button slot="trigger" alt="menu"> <ha-svg-icon .path="${c}"></ha-svg-icon> </mwc-icon-button> <mwc-list-item @click="${this._openCloudflareFileConfig}"> Cloudflare config.yaml </mwc-list-item> <mwc-list-item @click="${this._restartTunnelService}"> Restart tunnel sevice </mwc-list-item> </ha-button-menu> `:" "} <div> <ha-config-section> <span slot="header">Zdalny dostęp</span> <span slot="introduction">W tej sekcji możesz skonfigurować zdalny dostęp do bramki</span> <ha-card header="Szyfrowany tunel"> <div id="ha-switch-id"> <ha-switch .checked="${"on"===this.hass.states["input_boolean.ais_remote_access"].state}" @change="${this.changeRemote}"></ha-switch> </div> <div class="card-content"> Tunel zapewnia bezpieczne zdalne połączenie z Twoim urządzeniem kiedy jesteś z dala od domu. Twoja bramka dostępna ${"on"===this.hass.states["input_boolean.ais_remote_access"].state?s.dy` jest `:" będzie "} z Internetu pod adresem <a href="${this.remoteDomain}" target="_blank">${this.remoteDomain}</a>. <div class="center-container border" style="height:320px;text-align:center"> <div id="qr" style="text-align:center;margin-top:10px"> ${this._qrCode?this._qrCode:s.dy` <mwc-button @click="${this._generateQR}">Pokaż kod QR </mwc-button> `} </div> Zeskanuj kod QR za pomocą aplikacji na telefonie. </div> </div> <div class="card-content" style="text-align:center"> <svg style="width:48px;height:48px" viewBox="0 0 24 24"> <path fill="#929395" d="M1,11H6L3.5,8.5L4.92,7.08L9.84,12L4.92,16.92L3.5,15.5L6,13H1V11M8,0H16L16.83,5H17A2,2 0 0,1 19,7V17C19,18.11 18.1,19 17,19H16.83L16,24H8L7.17,19H7C6.46,19 6,18.79 5.62,18.44L7.06,17H17V7H7.06L5.62,5.56C6,5.21 6.46,5 7,5H7.17L8,0Z"/> </svg> <br> ${"active"===this.hass.states["timer.ais_dom_pin_join"].state?s.dy`PIN aktywny przez dwie munuty: <br> <span class="pin">${this.hass.states["sensor.gate_pairing_pin"].state}</span><br> `:s.dy`<br> <mwc-button @click="${this.enableGatePariringByPin}">Generuj kod PIN</mwc-button>`} </div> <div class="card-actions"> <a href="https://www.ai-speaker.com/docs/ais_bramka_remote_www_index" target="_blank"> <mwc-button>Dowiedz się jak to działa</mwc-button> </a> </div> </ha-card> <ais-webhooks .hass="${this.hass}"></ais-webhooks> </ha-config-section> </div> </hass-subpage> `}},{kind:"method",key:"_openCloudflareFileConfig",value:async function(){const e="/data/data/com.termux/files/home/.cloudflared/config.yaml",t={dialogTitle:"Cloudflare config.yaml",filePath:e,fileBody:await this.hass.callApi("POST","ais_file/read",{filePath:e}),readonly:!0};(0,d.j)(this,t)}},{kind:"method",key:"_restartTunnelService",value:async function(){this.hass.callService("ais_shell_command","restart_pm2_service",{service:"tunnel"})}},{kind:"get",static:!0,key:"styles",value:function(){return[s.iv`.content{padding-bottom:32px}a{color:var(--primary-color)}span.pin{color:var(--primary-color);font-size:2em}.border{margin-bottom:12px;border-bottom:2px solid rgba(0,0,0,.11);max-width:1040px}.narrow .border{max-width:640px}.center-container{@apply --layout-vertical;@apply --layout-center-center;height:70px}ha-card>div#ha-switch-id{margin:-4px 0;position:absolute;right:8px;top:32px}.card-actions a{text-decoration:none}`]}}]}}),s.oi);a()}catch(e){a(e)}}))},31203:(e,t,i)=>{i.a(e,(async(e,a)=>{try{i.r(t);var n=i(17463),o=i(34541),s=i(47838),r=i(68144),d=i(79932),l=i(73734),c=i(53658),h=i(91476),u=i(75502),m=e([l,h]);[l,h]=m.then?(await m)():m;(0,n.Z)([(0,d.Mo)("hui-timer-entity-row")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,d.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,d.SB)()],key:"_timeRemaining",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"method",key:"setConfig",value:function(e){if(!e)throw new Error("Invalid configuration");if(this._config=e,!this.hass)return;const t=this.hass.states[this._config.entity];t?this._startInterval(t):this._clearInterval()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.Z)((0,s.Z)(i.prototype),"disconnectedCallback",this).call(this),this._clearInterval()}},{kind:"method",key:"connectedCallback",value:function(){if((0,o.Z)((0,s.Z)(i.prototype),"connectedCallback",this).call(this),this._config&&this._config.entity){var e;const t=null===(e=this.hass)||void 0===e?void 0:e.states[this._config.entity];t&&this._startInterval(t)}}},{kind:"method",key:"render",value:function(){if(!this._config||!this.hass)return r.Ld;const e=this.hass.states[this._config.entity];return e?r.dy` <hui-generic-entity-row .hass="${this.hass}" .config="${this._config}"> <div class="text-content"> ${(0,l.rv)(this.hass,e,this._timeRemaining)} </div> </hui-generic-entity-row> `:r.dy` <hui-warning> ${(0,u.i)(this.hass,this._config.entity)} </hui-warning> `}},{kind:"method",key:"shouldUpdate",value:function(e){return!!e.has("_timeRemaining")||(0,c.G2)(this,e)}},{kind:"method",key:"updated",value:function(e){if((0,o.Z)((0,s.Z)(i.prototype),"updated",this).call(this,e),!this._config||!e.has("hass"))return;const t=this.hass.states[this._config.entity],a=e.get("hass");(a?a.states[this._config.entity]:void 0)!==t?this._startInterval(t):t||this._clearInterval()}},{kind:"method",key:"_clearInterval",value:function(){this._interval&&(window.clearInterval(this._interval),this._interval=void 0)}},{kind:"method",key:"_startInterval",value:function(e){this._clearInterval(),this._calculateRemaining(e),"active"===e.state&&(this._interval=window.setInterval((()=>this._calculateRemaining(e)),1e3))}},{kind:"method",key:"_calculateRemaining",value:function(e){this._timeRemaining=(0,l.mK)(e)}}]}}),r.oi);a()}catch(e){a(e)}}))}}]);
//# sourceMappingURL=44651-toVD7OXY3O8.js.map