"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[91097],{7323:(e,t,i)=>{i.d(t,{p:()=>o});const o=(e,t)=>e&&e.config.components.includes(t)},81582:(e,t,i)=>{i.d(t,{DJ:()=>o,RQ:()=>a,iJ:()=>r,pB:()=>n});const o=(e,t,i)=>{const o={type:"config_entries/subscribe"};return i&&i.type&&(o.type_filter=i.type),e.connection.subscribeMessage((e=>t(e)),o)},n=(e,t)=>{const i={};return t&&(t.type&&(i.type_filter=t.type),t.domain&&(i.domain=t.domain)),e.callWS({type:"config_entries/get",...i})},a=(e,t)=>e.callWS({type:"config_entries/get_single",entry_id:t}),r=(e,t)=>e.callApi("DELETE",`config/config_entries/entry/${t}`)},73728:(e,t,i)=>{i.d(t,{D4:()=>d,D7:()=>h,Ky:()=>s,V3:()=>g,WW:()=>f,XO:()=>l,ZJ:()=>u,oi:()=>c});var o=i(97330),n=i(38346),a=i(5986);const r={"HA-Frontend-Base":`${location.protocol}//${location.host}`},s=(e,t)=>{var i;return e.callApi("POST","config/config_entries/flow",{handler:t,show_advanced_options:Boolean(null===(i=e.userData)||void 0===i?void 0:i.showAdvanced)},r)},d=(e,t)=>e.callApi("GET",`config/config_entries/flow/${t}`,void 0,r),l=(e,t,i)=>e.callApi("POST",`config/config_entries/flow/${t}`,i,r),c=(e,t)=>e.callApi("DELETE",`config/config_entries/flow/${t}`),h=e=>e.sendMessagePromise({type:"config_entries/flow/progress"}),p=(e,t)=>e.subscribeEvents((0,n.D)((()=>h(e).then((e=>t.setState(e,!0)))),500,!0),"config_entry_discovered"),u=e=>(0,o._)(e,"_configFlowProgress",h,p),g=(e,t)=>u(e.connection).subscribe(t),f=(e,t)=>t.context.title_placeholders&&0!==Object.keys(t.context.title_placeholders).length?e(`component.${t.handler}.config.flow_title`,t.context.title_placeholders)||("name"in t.context.title_placeholders?t.context.title_placeholders.name:(0,a.Lh)(e,t.handler)):(0,a.Lh)(e,t.handler)},2852:(e,t,i)=>{i.d(t,{q:()=>s,t:()=>d});var o=i(68144),n=i(73728),a=i(5986),r=i(52871);const s=r.G,d=(e,t)=>(0,r.w)(e,t,{loadDevicesAndAreas:!0,createFlow:async(e,t)=>{const[i]=await Promise.all([(0,n.Ky)(e,t),e.loadBackendTranslation("config",t),e.loadBackendTranslation("selector",t),e.loadBackendTranslation("title",t)]);return i},fetchFlow:async(e,t)=>{const i=await(0,n.D4)(e,t);return await e.loadBackendTranslation("config",i.handler),await e.loadBackendTranslation("selector",i.handler),i},handleFlowStep:n.XO,deleteFlow:n.oi,renderAbortDescription(e,t){const i=e.localize(`component.${t.handler}.config.abort.${t.reason}`,t.description_placeholders);return i?o.dy` <ha-markdown allowsvg breaks .content="${i}"></ha-markdown> `:""},renderShowFormStepHeader:(e,t)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.title`,t.description_placeholders)||e.localize(`component.${t.handler}.title`),renderShowFormStepDescription(e,t){const i=e.localize(`component.${t.handler}.config.step.${t.step_id}.description`,t.description_placeholders);return i?o.dy` <ha-markdown allowsvg breaks .content="${i}"></ha-markdown> `:""},renderShowFormStepFieldLabel:(e,t,i)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.data.${i.name}`),renderShowFormStepFieldHelper(e,t,i){const n=e.localize(`component.${t.handler}.config.step.${t.step_id}.data_description.${i.name}`,t.description_placeholders);return n?o.dy`<ha-markdown breaks .content="${n}"></ha-markdown>`:""},renderShowFormStepFieldError:(e,t,i)=>e.localize(`component.${t.handler}.config.error.${i}`,t.description_placeholders)||i,renderShowFormStepFieldLocalizeValue:(e,t,i)=>e.localize(`component.${t.handler}.selector.${i}`),renderShowFormStepSubmitButton:(e,t)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.submit`)||e.localize("ui.panel.config.integrations.config_flow."+(!1===t.last_step?"next":"submit")),renderExternalStepHeader:(e,t)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.title`)||e.localize("ui.panel.config.integrations.config_flow.external_step.open_site"),renderExternalStepDescription(e,t){const i=e.localize(`component.${t.handler}.config.${t.step_id}.description`,t.description_placeholders);return o.dy` <p> ${e.localize("ui.panel.config.integrations.config_flow.external_step.description")} </p> ${i?o.dy` <ha-markdown allowsvg breaks .content="${i}"></ha-markdown> `:""} `},renderCreateEntryDescription(e,t){const i=e.localize(`component.${t.handler}.config.create_entry.${t.description||"default"}`,t.description_placeholders);return o.dy` ${i?o.dy` <ha-markdown allowsvg breaks .content="${i}"></ha-markdown> `:""} <p> ${e.localize("ui.panel.config.integrations.config_flow.created_config","name",t.title)} </p> `},renderShowFormProgressHeader:(e,t)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.title`)||e.localize(`component.${t.handler}.title`),renderShowFormProgressDescription(e,t){const i=e.localize(`component.${t.handler}.config.progress.${t.progress_action}`,t.description_placeholders);return i?o.dy` <ha-markdown allowsvg breaks .content="${i}"></ha-markdown> `:""},renderMenuHeader:(e,t)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.title`)||e.localize(`component.${t.handler}.title`),renderMenuDescription(e,t){const i=e.localize(`component.${t.handler}.config.step.${t.step_id}.description`,t.description_placeholders);return i?o.dy` <ha-markdown allowsvg breaks .content="${i}"></ha-markdown> `:""},renderMenuOption:(e,t,i)=>e.localize(`component.${t.handler}.config.step.${t.step_id}.menu_options.${i}`,t.description_placeholders),renderLoadingDescription(e,t,i,o){if("loading_flow"!==t&&"loading_step"!==t)return"";const n=(null==o?void 0:o.handler)||i;return e.localize(`ui.panel.config.integrations.config_flow.loading.${t}`,{integration:n?(0,a.Lh)(e.localize,n):e.localize("ui.panel.config.integrations.config_flow.loading.fallback_title")})}})},52871:(e,t,i)=>{i.d(t,{G:()=>n,w:()=>a});var o=i(47181);const n=()=>Promise.all([i.e(46992),i.e(42977),i.e(31338),i.e(28597),i.e(28426),i.e(7270),i.e(52154),i.e(90457),i.e(59159)]).then(i.bind(i,59159)),a=(e,t,i)=>{(0,o.B)(e,"show-dialog",{dialogTag:"dialog-data-entry-flow",dialogImport:n,dialogParams:{...t,flowConfig:i,dialogParentElement:e}})}},73826:(e,t,i)=>{i.d(t,{f:()=>s});var o=i(17463),n=i(34541),a=i(47838),r=i(79932);const s=e=>(0,o.Z)(null,(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,r.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,n.Z)((0,a.Z)(i.prototype),"connectedCallback",this).call(this),this.__checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,n.Z)((0,a.Z)(i.prototype),"disconnectedCallback",this).call(this),this.__unsubs){for(;this.__unsubs.length;){const e=this.__unsubs.pop();e instanceof Promise?e.then((e=>e())):e()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(e){if((0,n.Z)((0,a.Z)(i.prototype),"updated",this).call(this,e),e.has("hass"))this.__checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const t of e.keys())if(this.hassSubscribeRequiredHostProps.includes(t))return void this.__checkSubscribed()}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"__checkSubscribed",value:function(){var e;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(e=this.hassSubscribeRequiredHostProps)&&void 0!==e&&e.some((e=>void 0===this[e]))||(this.__unsubs=this.hassSubscribe())}}]}}),e)},41725:(e,t,i)=>{var o=i(17463),n=i(68144),a=i(79932);i(52039);(0,o.Z)([(0,a.Mo)("action-badge")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,a.Cb)()],key:"icon",value:void 0},{kind:"field",decorators:[(0,a.Cb)()],key:"title",value:void 0},{kind:"field",decorators:[(0,a.Cb)()],key:"badgeIcon",value:void 0},{kind:"field",decorators:[(0,a.Cb)({type:Boolean,reflect:!0})],key:"clickable",value:()=>!1},{kind:"method",key:"render",value:function(){return n.dy` <div class="icon"> <ha-svg-icon .path="${this.icon}"></ha-svg-icon> ${this.badgeIcon?n.dy`<ha-svg-icon class="badge" .path="${this.badgeIcon}"></ha-svg-icon>`:""} </div> <div class="title">${this.title}</div> `}},{kind:"get",static:!0,key:"styles",value:function(){return n.iv`:host{display:inline-flex;flex-direction:column;text-align:center;color:var(--primary-text-color)}:host([clickable]){color:var(--primary-text-color)}.icon{position:relative;box-sizing:border-box;margin:0 auto 8px;height:40px;width:40px;border-radius:50%;border:1px solid var(--secondary-text-color);display:flex;align-items:center;justify-content:center}:host([clickable]) .icon{border-color:var(--primary-color);border-width:2px}.badge{position:absolute;color:var(--primary-color);bottom:-5px;right:-5px;background-color:#fff;border-radius:50%;width:18px;display:block;height:18px}.title{min-height:2.3em;word-break:break-word}`}}]}}),n.oi)},84912:(e,t,i)=>{var o=i(17463),n=i(68144),a=i(79932),r=(i(52039),i(11254));(0,o.Z)([(0,a.Mo)("integration-badge")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,a.Cb)()],key:"domain",value:void 0},{kind:"field",decorators:[(0,a.Cb)()],key:"title",value:void 0},{kind:"field",decorators:[(0,a.Cb)()],key:"badgeIcon",value:void 0},{kind:"field",decorators:[(0,a.Cb)({type:Boolean})],key:"darkOptimizedIcon",value:void 0},{kind:"field",decorators:[(0,a.Cb)({type:Boolean,reflect:!0})],key:"clickable",value:()=>!1},{kind:"method",key:"render",value:function(){return n.dy` <div class="icon"> <img alt="" src="${(0,r.X1)({domain:this.domain,type:"icon",darkOptimized:this.darkOptimizedIcon})}" referrerpolicy="no-referrer"> ${this.badgeIcon?n.dy`<ha-svg-icon class="badge" .path="${this.badgeIcon}"></ha-svg-icon>`:""} </div> <div class="title">${this.title}</div> `}},{kind:"get",static:!0,key:"styles",value:function(){return n.iv`:host{display:inline-flex;flex-direction:column;text-align:center;color:var(--primary-text-color)}:host([clickable]){color:var(--primary-text-color)}img{max-width:100%;max-height:100%}.icon{position:relative;margin:0 auto 8px;height:40px;width:40px;display:flex;align-items:center;justify-content:center}.badge{position:absolute;color:#fff;bottom:-7px;right:-10px;background-color:var(--label-badge-green);border-radius:50%;display:block;--mdc-icon-size:18px;border:2px solid #fff}.title{min-height:2.3em;word-break:break-word}`}}]}}),n.oi)},91097:(e,t,i)=>{i.r(t);var o=i(17463),n=i(34541),a=i(47838),r=(i(14271),i(68144)),s=i(79932),d=i(7323),l=i(47181),c=i(85415),h=i(81582),p=i(73728),u=i(5986);var g=i(2852),f=i(73826),b=i(72160);i(41725),i(84912);const m=new Set(["hassio","met","radio_browser","rpi_power","sun"]);(0,o.Z)([(0,s.Mo)("onboarding-integrations")],(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,s.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,s.Cb)()],key:"onboardingLocalize",value:void 0},{kind:"field",decorators:[(0,s.SB)()],key:"_entries",value:()=>[]},{kind:"field",decorators:[(0,s.SB)()],key:"_discovered",value:void 0},{kind:"method",key:"hassSubscribe",value:function(){return[(0,p.V3)(this.hass,(e=>{this._discovered=e;const t=new Set;for(const i of e)i.context.title_placeholders&&t.add(i.handler);this.hass.loadBackendTranslation("config",Array.from(t))})),(0,h.DJ)(this.hass,(e=>{let t=!1;const i=[];if(e.forEach((e=>{if(null===e.type||"added"===e.type){if(m.has(e.entry.domain))return;i.push(e.entry),null===e.type&&(t=!0)}else if("removed"===e.type)this._entries=this._entries.filter((t=>t.entry_id!==e.entry.entry_id));else if("updated"===e.type){if(m.has(e.entry.domain))return;const t=e.entry;this._entries=this._entries.map((e=>e.entry_id===t.entry_id?t:e))}})),!i.length&&!t)return;const o=t?[]:this._entries;this._entries=[...o,...i]}),{type:["device","hub","service"]})]}},{kind:"method",key:"render",value:function(){if(!this._discovered)return r.Ld;const e=[...this._entries.map((e=>{var t;const i=e.title||(0,u.Lh)(this.hass.localize,e.domain)||e.domain;return[i,r.dy` <integration-badge .domain="${e.domain}" .title="${i}" .badgeIcon="${"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}" .darkOptimizedIcon="${null===(t=this.hass.themes)||void 0===t?void 0:t.darkMode}"></integration-badge> `]})),...this._discovered.map((e=>{var t;const i=(0,p.WW)(this.hass.localize,e);return[i,r.dy` <button .flowId="${e.flow_id}" @click="${this._continueFlow}"> <integration-badge clickable .domain="${e.handler}" .title="${i}" .darkOptimizedIcon="${null===(t=this.hass.themes)||void 0===t?void 0:t.darkMode}"></integration-badge> </button> `]}))].sort(((e,t)=>(0,c.$)(e[0],t[0],this.hass.locale.language))).map((e=>e[1]));return r.dy` <p> ${this.onboardingLocalize("ui.panel.page-onboarding.integration.intro")} </p> <div class="badges"> ${e} <button @click="${this._createFlow}"> <action-badge clickable title="${this.onboardingLocalize("ui.panel.page-onboarding.integration.more_integrations")}" .icon="${"M16,12A2,2 0 0,1 18,10A2,2 0 0,1 20,12A2,2 0 0,1 18,14A2,2 0 0,1 16,12M10,12A2,2 0 0,1 12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z"}"></action-badge> </button> </div> <div class="footer"> <mwc-button @click="${this._finish}"> ${this.onboardingLocalize("ui.panel.page-onboarding.integration.finish")} </mwc-button> </div> `}},{kind:"method",key:"firstUpdated",value:function(e){(0,n.Z)((0,a.Z)(i.prototype),"firstUpdated",this).call(this,e),this.hass.loadBackendTranslation("title",void 0,!0),this._scanUSBDevices(),(0,g.q)()}},{kind:"method",key:"_createFlow",value:function(){(0,b.E)(this)}},{kind:"method",key:"_continueFlow",value:function(e){(0,g.t)(this,{continueFlowId:e.currentTarget.flowId,dialogClosedCallback:()=>{(0,p.ZJ)(this.hass.connection).refresh()}})}},{kind:"method",key:"_scanUSBDevices",value:async function(){var e;(0,d.p)(this.hass,"usb")&&await(e=this.hass,e.callWS({type:"usb/scan"}))}},{kind:"method",key:"_finish",value:async function(){(0,l.B)(this,"onboarding-step",{type:"integration"})}},{kind:"get",static:!0,key:"styles",value:function(){return r.iv`.badges{margin-top:24px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;align-items:flex-start}.badges>*{width:96px;margin-bottom:24px}button{cursor:pointer;padding:0;border:0;background:0;font:inherit}.footer{text-align:right}`}}]}}),(0,f.f)(r.oi))},72160:(e,t,i)=>{i.d(t,{E:()=>n,u:()=>a});var o=i(47181);const n=(e,t)=>{(0,o.B)(e,"show-dialog",{dialogTag:"dialog-add-integration",dialogImport:()=>Promise.all([i.e(46992),i.e(42977),i.e(63436),i.e(28597),i.e(52154),i.e(81480),i.e(75814)]).then(i.bind(i,92205)),dialogParams:t})},a=(e,t)=>{(0,o.B)(e,"show-dialog",{dialogTag:"dialog-yaml-integration",dialogImport:()=>i.e(64348).then(i.bind(i,64348)),dialogParams:t})}},11254:(e,t,i)=>{i.d(t,{X1:()=>o,u4:()=>n,zC:()=>a});const o=e=>e.domain.startsWith("ais_")?`https://ai-speaker.com/images/brands/${e.domain}/${e.type}.png`:`https://brands.home-assistant.io/${e.brand?"brands/":""}${e.useFallback?"_/":""}${e.domain}/${e.darkOptimized?"dark_":""}${e.type}.png`,n=e=>e.split("/")[4],a=e=>e.startsWith("https://brands.home-assistant.io/")}}]);
//# sourceMappingURL=91097-Lw6tZ7LCjRA.js.map