"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[46653],{54531:function(e,t,i){i.d(t,{Qc:function(){return d},Xr:function(){return c},zJ:function(){return o}});var a=["zone","persistent_notification"],r=function(e,t){var i,a,r,n,s,o,c,d;if("call-service"===t.action&&(null!==(i=t.target)&&void 0!==i&&i.entity_id||null!==(a=t.service_data)&&void 0!==a&&a.entity_id||null!==(r=t.data)&&void 0!==r&&r.entity_id)){var l=null!==(n=null!==(s=null===(o=t.service_data)||void 0===o?void 0:o.entity_id)&&void 0!==s?s:null===(c=t.data)||void 0===c?void 0:c.entity_id)&&void 0!==n?n:null===(d=t.target)||void 0===d?void 0:d.entity_id;Array.isArray(l)||(l=[l]);for(var h=0,u=l;h<u.length;h++){var p=u[h];e.add(p)}}},n=function(e,t){"string"!=typeof t?(t.entity&&e.add(t.entity),t.camera_image&&e.add(t.camera_image),t.tap_action&&r(e,t.tap_action),t.hold_action&&r(e,t.hold_action)):e.add(t)},s=function e(t,i){i.entity&&n(t,i.entity),i.entities&&Array.isArray(i.entities)&&i.entities.forEach((function(e){return n(t,e)})),i.card&&e(t,i.card),i.cards&&Array.isArray(i.cards)&&i.cards.forEach((function(i){return e(t,i)})),i.elements&&Array.isArray(i.elements)&&i.elements.forEach((function(i){return e(t,i)})),i.badges&&Array.isArray(i.badges)&&i.badges.forEach((function(e){return n(t,e)}))},o=function(e){var t=new Set;return e.views.forEach((function(e){return s(t,e)})),t},c=function(e,t){for(var i=new Set,r=0,n=Object.keys(e.states);r<n.length;r++){var s=n[r];t.has(s)||a.includes(s.split(".",1)[0])||i.add(s)}return i},d=function(e,t){var i=o(t);return c(e,i)}},46653:function(e,t,i){var a,r,n,s,o,c=i(99312),d=i(81043),l=i(53709),h=i(88962),u=i(33368),p=i(71650),v=i(82390),f=i(69205),y=i(70906),m=i(91808),g=(i(17333),i(91993),i(81480)),k=i(68144),_=i(79932),w=i(83448),E=i(47501),b=i(62601),x=i(14516),C=i(47181),Z=(i(31206),i(65040),i(56007)),z=i(9893),A=i(54531),S=i(51153),R=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t,i,a,r){var n,s,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={type:i},e.next=3,(0,S.Do)(i);case 3:if(!(s=e.sent)||!s.getStubConfig){e.next=9;break}return e.next=7,s.getStubConfig(t,a,r);case 7:o=e.sent,n=Object.assign(Object.assign({},n),o);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t,i,a,r){return e.apply(this,arguments)}}(),j=[{type:"alarm-panel",showElement:!0},{type:"button",showElement:!0},{type:"calendar",showElement:!0},{type:"entities",showElement:!0},{type:"entity",showElement:!0},{type:"gauge",showElement:!0},{type:"glance",showElement:!0},{type:"history-graph",showElement:!0},{type:"statistics-graph",showElement:!1},{type:"statistic",showElement:!0},{type:"humidifier",showElement:!0},{type:"light",showElement:!0},{type:"map",showElement:!0},{type:"markdown",showElement:!0},{type:"media-control",showElement:!0},{type:"picture",showElement:!0},{type:"picture-elements",showElement:!0},{type:"picture-entity",showElement:!0},{type:"picture-glance",showElement:!0},{type:"plant-status",showElement:!0},{type:"sensor",showElement:!0},{type:"thermostat",showElement:!0},{type:"weather-forecast",showElement:!0},{type:"area",showElement:!0},{type:"tile",showElement:!0},{type:"conditional"},{type:"entity-filter"},{type:"grid"},{type:"horizontal-stack"},{type:"iframe"},{type:"logbook"},{type:"vertical-stack"},{type:"shopping-list"}];(0,m.Z)([(0,_.Mo)("hui-card-picker")],(function(e,t){var i,m=function(t){(0,f.Z)(a,t);var i=(0,y.Z)(a);function a(){var t;(0,p.Z)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=i.call.apply(i,[this].concat(n)),e((0,v.Z)(t)),t}return(0,u.Z)(a)}(t);return{F:m,d:[{kind:"field",decorators:[(0,_.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,_.SB)()],key:"_cards",value:function(){return[]}},{kind:"field",key:"lovelace",value:void 0},{kind:"field",key:"cardPicked",value:void 0},{kind:"field",decorators:[(0,_.SB)()],key:"_filter",value:function(){return""}},{kind:"field",decorators:[(0,_.SB)()],key:"_width",value:void 0},{kind:"field",decorators:[(0,_.SB)()],key:"_height",value:void 0},{kind:"field",key:"_unusedEntities",value:void 0},{kind:"field",key:"_usedEntities",value:void 0},{kind:"field",key:"_filterCards",value:function(){return(0,x.Z)((function(e,t){if(!t)return e;var i=e.map((function(e){return e.card})),a=new g.Z(i,{keys:["type","name","description"],isCaseSensitive:!1,minMatchCharLength:2,threshold:.2});return i=a.search(t).map((function(e){return e.item})),e.filter((function(e){return i.includes(e.card)}))}))}},{kind:"method",key:"render",value:function(){return this.hass&&this.lovelace&&this._unusedEntities&&this._usedEntities?(0,k.dy)(a||(a=(0,h.Z)([' <search-input .hass="','" .filter="','" @value-changed="','" .label="','"></search-input> <div id="content" style="','"> <div class="cards-container"> ',' </div> <div class="cards-container"> <div class="card manual" @click="','" .config="','"> <div class="card-header"> ',' </div> <div class="preview description"> '," </div> </div> </div> </div> "])),this.hass,this._filter,this._handleSearchChange,this.hass.localize("ui.panel.lovelace.editor.edit_card.search_cards"),(0,E.V)({width:this._width?"".concat(this._width,"px"):"auto",height:this._height?"".concat(this._height,"px"):"auto"}),this._filterCards(this._cards,this._filter).map((function(e){return e.element})),this._cardPicked,{type:""},this.hass.localize("ui.panel.lovelace.editor.card.generic.manual"),this.hass.localize("ui.panel.lovelace.editor.card.generic.manual_description")):k.Ld}},{kind:"method",key:"shouldUpdate",value:function(e){var t=e.get("hass");return!t||t.locale!==this.hass.locale}},{kind:"method",key:"firstUpdated",value:function(){var e=this;if(this.hass&&this.lovelace){var t=(0,A.zJ)(this.lovelace),i=(0,A.Xr)(this.hass,t);this._usedEntities=(0,l.Z)(t).filter((function(t){return e.hass.states[t]&&!(0,Z.rk)(e.hass.states[t].state)})),this._unusedEntities=(0,l.Z)(i).filter((function(t){return e.hass.states[t]&&!(0,Z.rk)(e.hass.states[t].state)})),this._loadCards()}}},{kind:"method",key:"_loadCards",value:function(){var e=this,t=j.map((function(t){return Object.assign({name:e.hass.localize("ui.panel.lovelace.editor.card.".concat(t.type,".name")),description:e.hass.localize("ui.panel.lovelace.editor.card.".concat(t.type,".description"))},t)}));z.kb.length>0&&(t=t.concat(z.kb.map((function(e){return{type:e.type,name:e.name,description:e.description,showElement:e.preview,isCustom:!0}})))),this._cards=t.map((function(t){return{card:t,element:(0,k.dy)(r||(r=(0,h.Z)(["",""])),(0,b.C)(e._renderCardElement(t),(0,k.dy)(n||(n=(0,h.Z)([' <div class="card spinner"> <ha-circular-progress active alt="Loading"></ha-circular-progress> </div> '])))))}}))}},{kind:"method",key:"_handleSearchChange",value:function(e){var t=e.detail.value;if(t){if(!this._width||!this._height){var i=this.shadowRoot.getElementById("content");if(i&&!this._width){var a=i.clientWidth;a&&(this._width=a)}if(i&&!this._height){var r=i.clientHeight;r&&(this._height=r)}}}else this._width=void 0,this._height=void 0;this._filter=t}},{kind:"method",key:"_cardPicked",value:function(e){var t=e.currentTarget.config;(0,C.B)(this,"config-changed",{config:t})}},{kind:"method",key:"_tryCreateCardElement",value:function(e){var t=this,i=(0,S.l$)(e);return i.hass=this.hass,i.addEventListener("ll-rebuild",(function(a){a.stopPropagation(),t._rebuildCard(i,e)}),{once:!0}),i}},{kind:"method",key:"_rebuildCard",value:function(e,t){var i;try{i=this._tryCreateCardElement(t)}catch(a){return}e.parentElement&&e.parentElement.replaceChild(i,e)}},{kind:"method",key:"_renderCardElement",value:(i=(0,d.Z)((0,c.Z)().mark((function e(t){var i,a,r,n,o,d,l,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.type,a=t.showElement,r=t.isCustom,n=t.name,o=t.description,d=r?(0,z.cs)(i):void 0,r&&(i="".concat(z.Qo).concat(i)),u={type:i},!this.hass||!this.lovelace){e.next=10;break}return e.next=8,R(this.hass,i,this._unusedEntities,this._usedEntities);case 8:if(u=e.sent,a)try{l=this._tryCreateCardElement(u)}catch(c){l=void 0}case 10:return e.abrupt("return",(0,k.dy)(s||(s=(0,h.Z)([' <div class="card"> <div class="overlay" @click="','" .config="','"></div> <div class="card-header"> ',' </div> <div class="preview ','"> '," </div> </div> "])),this._cardPicked,u,d?"".concat(this.hass.localize("ui.panel.lovelace.editor.cardpicker.custom_card"),": ").concat(d.name||d.type):n,(0,w.$)({description:!l||"HUI-ERROR-CARD"===l.tagName}),l&&"HUI-ERROR-CARD"!==l.tagName?l:d?d.description||this.hass.localize("ui.panel.lovelace.editor.cardpicker.no_description"):o));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return[(0,k.iv)(o||(o=(0,h.Z)(["search-input{display:block;--mdc-shape-small:var(--card-picker-search-shape);margin:var(--card-picker-search-margin)}.cards-container{display:grid;grid-gap:8px 8px;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));margin-top:20px}.card{height:100%;max-width:500px;display:flex;flex-direction:column;border-radius:var(--ha-card-border-radius,12px);background:var(--primary-background-color,#fafafa);cursor:pointer;position:relative}.card-header{color:var(--ha-card-header-color,--primary-text-color);font-family:var(--ha-card-header-font-family,inherit);font-size:16px;font-weight:700;letter-spacing:-.012em;line-height:20px;padding:12px 16px;display:block;text-align:center;background:var(--ha-card-background,var(--card-background-color,#fff));border-bottom:1px solid var(--divider-color)}.preview{pointer-events:none;margin:20px;flex-grow:1;display:flex;align-items:center;justify-content:center}.preview>:first-child{zoom:.6;display:block;width:100%}.description{text-align:center}.spinner{align-items:center;justify-content:center}.overlay{position:absolute;width:100%;height:100%;z-index:1;box-sizing:border-box;border:var(--ha-card-border-width,1px) solid var(--ha-card-border-color,var(--divider-color));border-radius:var(--ha-card-border-radius,12px)}.manual{max-width:none}"])))]}}]}}),k.oi)}}]);
//# sourceMappingURL=46653-kkZ1xayrhq0.js.map