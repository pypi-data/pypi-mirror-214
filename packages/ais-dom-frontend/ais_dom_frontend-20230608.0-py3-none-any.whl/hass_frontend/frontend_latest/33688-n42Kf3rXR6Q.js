"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[33688],{33688:(e,t,i)=>{i.a(e,(async(e,s)=>{try{i.r(t);var n=i(17463),r=i(34541),a=i(47838),o=i(68144),l=i(79932),h=i(50467),d=i(53936),f=i(15688),u=i(90271),c=i(51153),_=e([c]);c=(_.then?(await _)():_)[0];let y=(0,n.Z)(null,(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"method",static:!0,key:"getStubConfig",value:function(e,t,i){const s=(0,f.j)(e,3,t,i,["light","switch","sensor"]);return{type:"entity-filter",entities:s,state_filter:[s[0]?e.states[s[0]].state:""],card:{type:"entities"}}}},{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,l.Cb)()],key:"isPanel",value:()=>!1},{kind:"field",decorators:[(0,l.Cb)()],key:"editMode",value:()=>!1},{kind:"field",decorators:[(0,l.SB)()],key:"_config",value:void 0},{kind:"field",key:"_element",value:void 0},{kind:"field",key:"_configEntities",value:void 0},{kind:"field",key:"_baseCardConfig",value:void 0},{kind:"field",key:"_oldEntities",value:void 0},{kind:"method",key:"getCardSize",value:function(){return this._element?(0,h.N)(this._element):1}},{kind:"method",key:"setConfig",value:function(e){if(!e.entities.length||!Array.isArray(e.entities))throw new Error("Entities must be specified");if(!(e.state_filter&&Array.isArray(e.state_filter)||e.entities.every((e=>"object"==typeof e&&e.state_filter&&Array.isArray(e.state_filter)))))throw new Error("Incorrect filter config");this._configEntities=(0,u.A)(e.entities),this._config=e,this._baseCardConfig={type:"entities",entities:[],...this._config.card},this.lastChild&&this.removeChild(this.lastChild),this._element=this._createCardElement(this._baseCardConfig)}},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"shouldUpdate",value:function(e){return this._element&&(this._element.hass=this.hass,this._element.editMode=this.editMode,this._element.isPanel=this.isPanel),!!e.has("_config")||!!e.has("hass")&&this._haveEntitiesChanged(e.get("hass"))}},{kind:"method",key:"update",value:function(e){if((0,r.Z)((0,a.Z)(i.prototype),"update",this).call(this,e),!(this.hass&&this._config&&this._configEntities&&this._element))return;const t=this._configEntities.filter((e=>{const t=this.hass.states[e.entity];if(!t)return!1;if(e.state_filter){for(const i of e.state_filter)if((0,d.A)(t,i))return!0}else for(const e of this._config.state_filter)if((0,d.A)(t,e))return!0;return!1}));if(0!==t.length||!1!==this._config.show_empty){if(this.lastChild){if("HUI-ERROR-CARD"!==this._element.tagName){this._oldEntities&&t.length===this._oldEntities.length&&t.every(((e,t)=>e===this._oldEntities[t]))||(this._oldEntities=t,this._element.setConfig({...this._baseCardConfig,entities:t}))}}else this._element.setConfig({...this._baseCardConfig,entities:t}),this._oldEntities=t;this.lastChild||this.appendChild(this._element),this.style.display="block"}else this.style.display="none"}},{kind:"method",key:"_haveEntitiesChanged",value:function(e){if(!this.hass||!e)return!0;if(!this._configEntities)return!0;if(this.hass.localize!==e.localize)return!0;for(const t of this._configEntities)if(this.hass.states[t.entity]!==e.states[t.entity])return!0;return!1}},{kind:"method",key:"_createCardElement",value:function(e){const t=(0,c.Z6)(e);return this.hass&&(t.hass=this.hass),t.isPanel=this.isPanel,t.editMode=this.editMode,t.addEventListener("ll-rebuild",(i=>{i.stopPropagation(),this._rebuildCard(t,e)}),{once:!0}),t}},{kind:"method",key:"_rebuildCard",value:function(e,t){const i=this._createCardElement(t);e.parentElement&&e.parentElement.replaceChild(i,e),this._element=i}}]}}),o.fl);customElements.define("hui-entity-filter-card",y),s()}catch(e){s(e)}}))},53936:(e,t,i)=>{i.d(t,{A:()=>s});const s=(e,t)=>{var i;const s=t.operator||"==";let n=null!==(i=t.value)&&void 0!==i?i:t,r=t.attribute?e.attributes[t.attribute]:e.state;if("=="===s||"!="===s){const e="number"==typeof n||"string"==typeof n&&n.trim()&&!isNaN(Number(n)),t="number"==typeof r||"string"==typeof r&&r.trim()&&!isNaN(Number(r));e&&t&&(n=Number(n),r=Number(r))}switch(s){case"==":return r===n;case"<=":return r<=n;case"<":return r<n;case">=":return r>=n;case">":return r>n;case"!=":return r!==n;case"in":return!(!Array.isArray(n)&&"string"!=typeof n)&&n.includes(r);case"not in":return!(!Array.isArray(n)&&"string"!=typeof n)&&!n.includes(r);case"regex":return null!==r&&"object"==typeof r?RegExp(n).test(JSON.stringify(r)):RegExp(n).test(r);default:return!1}}}}]);
//# sourceMappingURL=33688-n42Kf3rXR6Q.js.map