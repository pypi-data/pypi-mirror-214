version: 2

build:
  os: "ubuntu-20.04"
  tools:
    python: "3.9"
  jobs:
    pre_build:
      - make pre-docs
      - find -L /bin -samefile /bin/sh
      - >
        {
                echo 'figure.facecolor = (1.0, 1.0, 1.0, 0.0)';
                echo 'axes.facecolor = (1.0, 1.0, 1.0, 0.0)';
        } > doc/sphinx/source/example/matplotlibrc
      - cat doc/sphinx/source/example/matplotlibrc

sphinx:
  configuration: doc/sphinx/source/conf.py

python:
  install:
    - method: pip
      path: .
    - requirements: doc/requirements.txt
